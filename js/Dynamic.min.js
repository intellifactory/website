(function(n){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});n.IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i of Object.getOwnPropertyNames(n))t[i]=n[i];return Object.setPrototypeOf(t,Object.getPrototypeOf(n)),t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},PrintObject:function(n){var t="{ ",i=!0;for(var r of Object.getOwnPropertyNames(n))i?i=!1:t+=", ",t+=r+" = "+n[r];return t+(i?"}":" }")},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};n.IntelliFactory.Runtime.OnLoad(function(){n.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});n.ignore=function(){};n.id=function(n){return n};n.fst=function(n){return n[0]};n.snd=function(n){return n[1]};n.trd=function(n){return n[2]};n.console||(n.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(self);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN;b=a.Client=a.Client||{};c=b.Highlight=b.Highlight||{};d=b.Newsletter=b.Newsletter||{};e=b.Contact=b.Contact||{};f=b.Jobs=b.Jobs||{};g=a.EventTarget;h=a.Node;i=a.WebSharper=a.WebSharper||{};j=i.JavaScript=i.JavaScript||{};k=j.JS=j.JS||{};l=i.Operators=i.Operators||{};m=i.Unchecked=i.Unchecked||{};n=j.Pervasives=j.Pervasives||{};o=i.Arrays=i.Arrays||{};p=a.Element;q=a.HTMLElement;r=i.UI=i.UI||{};s=r.View=r.View||{};t=i.Obj=i.Obj||{};u=r.ListModel=r.ListModel||{};v=a.WindowOrWorkerGlobalScope;w=i.Strings=i.Strings||{};x=a.StartupCode$Dynamic$Client=a.StartupCode$Dynamic$Client||{};y=r.Snap=r.Snap||{};z=a.Blob;A=i.Seq=i.Seq||{};B=i.Utils=i.Utils||{};C=r.Var=r.Var||{};D=i.List=i.List||{};E=D.T=D.T||{};F=r.HtmlModule=r.HtmlModule||{};G=F.attr=F.attr||{};H=i.Enumerator=i.Enumerator||{};I=i.Collections=i.Collections||{};J=I.Dictionary=I.Dictionary||{};K=a.Object;L=r.Storage=r.Storage||{};M=r.AttrProxy=r.AttrProxy||{};N=r.Doc=r.Doc||{};O=r.Client=r.Client||{};P=O.Templates=O.Templates||{};Q=H.T=H.T||{};R=i.Numeric=i.Numeric||{};S=L.ArrayStorage=L.ArrayStorage||{};T=r.Attrs=r.Attrs||{};U=r.DomUtility=r.DomUtility||{};V=r.Docs=r.Docs||{};W=r.Var$1=r.Var$1||{};X=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};Y=I.HashSet=I.HashSet||{};Z=r.ConcreteVar=r.ConcreteVar||{};_0=r.Elt=r.Elt||{};_1=r.Array=r.Array||{};_2=r.DocElemNode=r.DocElemNode||{};_3=a.CharacterData;_4=I.DictionaryUtil=I.DictionaryUtil||{};_5=P.Prepare=P.Prepare||{};_6=i.Slice=i.Slice||{};_7=I.KeyCollection=I.KeyCollection||{};_8=r.An=r.An||{};_9=O.Settings=O.Settings||{};_=r.Abbrev=r.Abbrev||{};$=_.Mailbox=_.Mailbox||{};ba=_.Fresh=_.Fresh||{};bb=r.Updates=r.Updates||{};bc=O.Attrs=O.Attrs||{};bd=bc.Dyn=bc.Dyn||{};be=O.Docs=O.Docs||{};bf=be.RunState=be.RunState||{};bg=be.NodeSet=be.NodeSet||{};bh=i.Concurrency=i.Concurrency||{};bi=r.Anims=r.Anims||{};bj=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bk=i.Queue=i.Queue||{};bl=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bm=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bn=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bo=r.AppendList=r.AppendList||{};bp=I.HashSetUtil=I.HashSetUtil||{};bq=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};br=r.BindVar=r.BindVar||{};bs=r.String=r.String||{};bt=r.CheckedInput=r.CheckedInput||{};bu=bh.Scheduler=bh.Scheduler||{};bv=r.Easing=r.Easing||{};bw=bh.AsyncBody=bh.AsyncBody||{};bx=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};by=bh.CT=bh.CT||{};bz=_.HashSet=_.HashSet||{};bA=i.Char=i.Char||{};bB=i.CancellationTokenSource=i.CancellationTokenSource||{};bC=be.DomNodes=be.DomNodes||{};bD=a.Error;bE=i.OperationCanceledException=i.OperationCanceledException||{};bF=i.Lazy=i.Lazy||{};bG=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bH=i.LazyExtensionsProxy=i.LazyExtensionsProxy||{};bI=bH.LazyRecord=bH.LazyRecord||{};bJ=a.hljs;bK=a.IntelliFactory;bL=bK&&bK.Runtime;bM=a.console;bN=a.Date;b.Main=function(){c.Run();d.SignUpAction();e.SendMessageAction();f.SendJobAction();};c.Run=function(){function bO(bP,bQ,bR,bS){bJ.highlightBlock(bP);}self.document.querySelectorAll("code[class^=language-]").forEach(bL.CreateFuncWithArgs(function(bP){return bO(bP[0],bP[1],bP[2],bP[3]);}),void 0);};d.SignUpAction=function(){var bO,bP;bO=self.document.getElementById("signup");bP=self.document.getElementById("newsletter-form");if(!m.Equals(bP,null)&&!m.Equals(bP,void 0))bP.addEventListener("submit",function(bQ){return bQ.preventDefault();});if(!m.Equals(bO,null)&&!m.Equals(bO,void 0))bO.addEventListener("click",function(bQ){var bR,bS,bT,bU;bQ.preventDefault();bR=self.document.getElementById("newsletter-input").value;return w.Trim(bR)!==""?(bS=self.document.getElementById("newsletter-alert-list"),(bS.replaceChildren.apply(bS,[]),bO.setAttribute("disabled","disabled"),bO.classList.add("btn-disabled"),bT=new a.FormData(),bT.append("email",bR),bT.append("type","Blogs"),void(self.fetch("https://api.intellifactory.com/api/newsletter",(bU={},bU.method="POST",bU.body=bT,bU)).then(function(){var bV;bV=self.document.createElement("div");bV.className="success-alert";bV.textContent="You have successfully signed up!";bO.removeAttribute("disabled");bO.classList.remove("btn-disabled");return bS.appendChild(bV);}))["catch"](function(){var bV;bV=self.document.createElement("div");bV.className="error-alert";bV.textContent="Sorry, we could not sign you for the newsletter!";bO.removeAttribute("disabled");bO.classList.remove("btn-disabled");return bS.appendChild(bV);}))):null;});};e.SendMessageAction=function(){var bO,bP;bO=self.document.getElementById("contact-button");bP=self.document.getElementById("contact-form");if(!m.Equals(bP,null)&&!m.Equals(bP,void 0))bP.addEventListener("submit",function(bQ){return bQ.preventDefault();});if(!m.Equals(bO,null)&&!m.Equals(bO,void 0))bO.addEventListener("click",function(bQ){var bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf;bQ.preventDefault();bR=self.document.querySelector("#contact-form *[name=\"email\"]");bS=self.document.querySelector("#contact-form *[name=\"name\"]");bT=self.document.querySelector("#contact-form *[name=\"message\"]");bU=self.document.querySelector("#contact-form *[name=\"accept_terms\"]");bR.classList.remove("input-failed-validation");bV=(bW=bR.nextElementSibling,bW!==void 0?{$:1,$0:bW}:null);if(bV==null);else bV.$0.classList.add("hidden");bS.classList.remove("input-failed-validation");bX=(bY=bS.nextElementSibling,bY!==void 0?{$:1,$0:bY}:null);if(bX==null);else bX.$0.classList.add("hidden");bT.classList.remove("input-failed-validation");bZ=(b0=bT.nextElementSibling,b0!==void 0?{$:1,$0:b0}:null);if(bZ==null);else bZ.$0.classList.add("hidden");b1=(b2=bU.nextElementSibling,b2!==void 0?{$:1,$0:b2}:null);if(b1==null);else b1.$0.classList.remove("text-red");b3=bR.value;b4=bS.value;b5=bT.value;b6=bU.checked;if(bR.validity.typeMismatch||w.Trim(b3)===""){bR.classList.add("input-failed-validation");b7=(b8=bR.nextElementSibling,b8!==void 0?{$:1,$0:b8}:null);b7==null?void 0:b7.$0.classList.remove("hidden");}if(w.Trim(b4)===""){bS.classList.add("input-failed-validation");b9=(b_=bS.nextElementSibling,b_!==void 0?{$:1,$0:b_}:null);b9==null?void 0:b9.$0.classList.remove("hidden");}if(w.Trim(b5)===""){bT.classList.add("input-failed-validation");b$=(ca=bT.nextElementSibling,ca!==void 0?{$:1,$0:ca}:null);b$==null?void 0:b$.$0.classList.remove("hidden");}if(!b6){cb=(cc=bU.nextElementSibling,cc!==void 0?{$:1,$0:cc}:null);cb==null?void 0:cb.$0.classList.add("text-red");}return!bR.validity.typeMismatch&&w.Trim(b4)!==""&&w.Trim(b5)!==""&&b6?(cd=self.document.getElementById("contact-alert-list"),(cd.replaceChildren.apply(cd,[]),bO.setAttribute("disabled","disabled"),bO.classList.add("btn-disabled"),ce=new a.FormData(),ce.append("email",b3),ce.append("name",b4),ce.append("message",b5),void(self.fetch("https://api.intellifactory.com/api/contact",(cf={},cf.method="POST",cf.body=ce,cf)).then(function(){var cg;cg=self.document.querySelector("#contact-form .modal");self.document.querySelector("#contact-form .modal .modal-button").addEventListener("click",function(){var ch;ch=self.document.querySelector("#contact-form .modal");bR.value="";bS.value="";bT.value="";bU.checked=false;ch.classList.add("hidden");bO.removeAttribute("disabled");return bO.classList.remove("btn-disabled");});return cg.classList.remove("hidden");}))["catch"](function(){var cg;cg=self.document.createElement("div");cg.className="error-alert";cg.textContent="Sorry, we could not send your message!";bO.removeAttribute("disabled");bO.classList.remove("btn-disabled");return cd.appendChild(cg);}))):null;});};f.SendJobAction=function(){var bO,bP,bQ;bO=self.document.getElementById("JobSendFiles");if(!m.Equals(bO,null)&&!m.Equals(bO,void 0)){bO.addEventListener("submit",function(bR){return bR.preventDefault();});bP=self.document.querySelector("#JobSendFiles #hidden-input");self.document.querySelector("#JobSendFiles #button").addEventListener("click",function(){return bP.click();});bP.addEventListener("change",function(bR){return s.Get(function(bS){f.fileHandle(bS,bR.target.files);},f.currentSize());});bQ=self.document.getElementById("JobUploadArea");bQ.addEventListener("dragleave",function(bR){bR.preventDefault();bQ.classList.remove("draggedOver");});bQ.addEventListener("dragenter",function(bR){bR.preventDefault();bQ.classList.add("draggedOver");});bQ.addEventListener("dragover",function(bR){bR.preventDefault();bR.dataTransfer.dropEffect="copy";bM.log(bR.dataTransfer.files.length);});bQ.addEventListener("drop",function(bR){bR.preventDefault();s.Get(function(bS){f.fileHandle(bS,bR.dataTransfer.files);},f.currentSize());bQ.classList.remove("draggedOver");});}if(!m.Equals(f.button(),null)&&!m.Equals(f.button(),void 0))f.button().addEventListener("click",function(bR){var bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7;bR.preventDefault();bS=self.document.querySelector("#JobSendFiles-form *[name=\"email\"]");bT=self.document.querySelector("#JobSendFiles *[name=\"name\"]");bU=self.document.querySelector("#JobSendFiles *[name=\"message\"]");bS.classList.remove("input-failed-validation");bV=(bW=bS.nextElementSibling,bW!==void 0?{$:1,$0:bW}:null);if(bV==null);else bV.$0.classList.add("hidden");bT.classList.remove("input-failed-validation");bX=(bY=bT.nextElementSibling,bY!==void 0?{$:1,$0:bY}:null);if(bX==null);else bX.$0.classList.add("hidden");bZ=bS.value;b0=bT.value;b1=bU.value;if(bS.validity.typeMismatch||w.Trim(bZ)===""){bS.classList.add("input-failed-validation");b2=(b3=bS.nextElementSibling,b3!==void 0?{$:1,$0:b3}:null);b2==null?void 0:b2.$0.classList.remove("hidden");}if(w.Trim(b0)===""){bT.classList.add("input-failed-validation");b4=(b5=bT.nextElementSibling,b5!==void 0?{$:1,$0:b5}:null);b4==null?void 0:b4.$0.classList.remove("hidden");}return!bS.validity.typeMismatch&&w.Trim(b0)!==""?(f.button().setAttribute("disabled","disabled"),f.button().classList.add("btn-disabled"),b6=new a.FormData(),b6.append("email",bZ),b6.append("name",b0),w.Trim(b1)!==""?b6.append("github",b1):void 0,f.files().Iter(function(b8){b6.append("files",b8[1],b8[0]);}),void(self.fetch("https://api.intellifactory.com/api/jobs",(b7={},b7.method="POST",b7.body=b6,b7)).then(function(){var b8;b8=self.document.querySelector("#JobSendFiles .modal");self.document.querySelector("#JobSendFiles .modal .modal-button").addEventListener("click",function(){var b9;b9=self.document.querySelector("#JobSendFiles .modal");bS.value="";bT.value="";bU.value="";f.files().Clear();b9.classList.add("hidden");f.button().removeAttribute("disabled");return f.button().classList.remove("btn-disabled");});return b8.classList.remove("hidden");}))["catch"](function(){var b8,b9;b8=self.document.querySelector("#JobSendFiles .modal");b9=self.document.querySelector("#JobSendFiles .modal .modal-button");self.document.querySelector("#JobSendFiles .modal .modal-content").textContent="Sorry, we could not send your job application!";b9.addEventListener("click",function(){var b_;b_=self.document.querySelector("#JobSendFiles .modal");bS.value="";bT.value="";bU.value="";f.files().Clear();b_.classList.add("hidden");f.button().removeAttribute("disabled");return f.button().classList.remove("btn-disabled");});return b8.classList.remove("hidden");})):null;});};f.currentSize=function(){x.$cctor();return x.currentSize;};f.fileHandle=function(bO,bP){var bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4;bQ=null;bR=false;bS=0;bZ=D.ofSeq(l.range(0,bP.length-1));b0=H.Get(bZ);try{while(b0.MoveNext()){b1=bP.item(b0.Current());if(m.Equals(bQ,null)&&b1.size>f.singleMax())bQ={$:1,$0:b1.name};bS=bS+b1.size;}}finally{if(typeof b0=="object"&&"Dispose"in b0)b0.Dispose();}if(m.Equals(bQ,null)&&bO+bS>f.totalMax())bR=true;if(bQ!=null&&bQ.$==1){bT=bQ.$0;bU=self.document.querySelector("#JobSendFiles .modal");bV=self.document.querySelector("#JobSendFiles .modal .modal-button");bW=self.document.querySelector("#JobSendFiles .modal .modal-content");bV.addEventListener("click",function(){var b5;b5=self.document.querySelector("#JobSendFiles .modal");bW.textContent=(function(b6){return function(b7){return b6(B.toSafe(b7)+" is larger then 5MB");};}(a.id))(bT);b5.classList.add("hidden");f.button().removeAttribute("disabled");return f.button().classList.remove("btn-disabled");});bU.classList.remove("hidden");}else if(bR){bX=self.document.querySelector("#JobSendFiles .modal");bY=self.document.querySelector("#JobSendFiles .modal .modal-button");self.document.querySelector("#JobSendFiles .modal .modal-content").textContent="The total file size have exceeded 10MB!";bY.addEventListener("click",function(){self.document.querySelector("#JobSendFiles .modal").classList.add("hidden");f.button().removeAttribute("disabled");return f.button().classList.remove("btn-disabled");});bX.classList.remove("hidden");}else{b2=D.ofSeq(l.range(0,bP.length-1));b3=H.Get(b2);try{while(b3.MoveNext()){b4=bP.item(b3.Current());f.files().Append([b4.name,b4]);}}finally{if(typeof b3=="object"&&"Dispose"in b3)b3.Dispose();}}};f.button=function(){x.$cctor();return x.button;};f.files=function(){x.$cctor();return x.files;};f.singleMax=function(){x.$cctor();return x.singleMax;};f.totalMax=function(){x.$cctor();return x.totalMax;};k.GetFieldValues=function(bO){var bP,bQ;bP=[];for(var bR in bO)bP.push(bO[bR]);return bP;};l.range=function(bO,bP){var bQ;bQ=1+bP-bO;return bQ<=0?[]:A.init(bQ,function(bR){return bR+bO;});};l.FailWith=function(bO){throw new bD(bO);};l.KeyValue=function(bO){return[bO.K,bO.V];};m.Equals=function(bO,bP){var bQ,bR,bS,bT;if(bO===bP)return true;else{bQ=typeof bO;if(bQ=="object"){if(bO===null||bO===void 0||bP===null||bP===void 0||!m.Equals(typeof bP,"object"))return false;else if("Equals"in bO)return bO.Equals(bP);else if("Equals"in bP)return false;else if(bO instanceof a.Array&&bP instanceof a.Array)return m.arrayEquals(bO,bP);else if(bO instanceof a.Date&&bP instanceof a.Date)return m.dateEquals(bO,bP);else{bR=[true];for(var bU in bO)if(function(bV){bR[0]=!bO.hasOwnProperty(bV)||bP.hasOwnProperty(bV)&&m.Equals(bO[bV],bP[bV]);return!bR[0];}(bU))break;if(bR[0]){for(var bV in bP)if(function(bW){bR[0]=!bP.hasOwnProperty(bW)||bO.hasOwnProperty(bW);return!bR[0];}(bV))break;}return bR[0];}}else return bQ=="function"&&("$Func"in bO?bO.$Func===bP.$Func&&bO.$Target===bP.$Target:"$Invokes"in bO&&"$Invokes"in bP&&m.arrayEquals(bO.$Invokes,bP.$Invokes));}};m.arrayEquals=function(bO,bP){var bQ,bR;if(o.length(bO)===o.length(bP)){bQ=true;bR=0;while(bQ&&bR<o.length(bO)){!m.Equals(o.get(bO,bR),o.get(bP,bR))?bQ=false:void 0;bR=bR+1;}return bQ;}else return false;};m.dateEquals=function(bO,bP){return bO.getTime()===bP.getTime();};m.Hash=function(bO){var bP;bP=typeof bO;return bP=="function"?0:bP=="boolean"?bO?1:0:bP=="number"?bO:bP=="string"?m.hashString(bO):bP=="object"?bO==null?0:bO instanceof a.Array?m.hashArray(bO):m.hashObject(bO):0;};m.hashString=function(bO){var bP,bQ,bR;if(bO===null)return 0;else{bP=5381;for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)bP=m.hashMix(bP,bO[bQ].charCodeAt());return bP;}};m.hashArray=function(bO){var bP,bQ,bR;bP=-34948909;for(bQ=0,bR=o.length(bO)-1;bQ<=bR;bQ++)bP=m.hashMix(bP,m.Hash(o.get(bO,bQ)));return bP;};m.hashObject=function(bO){var bP,bQ;if("GetHashCode"in bO)return bO.GetHashCode();else{bP=[0];for(var bR in bO)if(function(bS){bP[0]=m.hashMix(m.hashMix(bP[0],m.hashString(bS)),m.Hash(bO[bS]));return false;}(bR))break;return bP[0];}};m.hashMix=function(bO,bP){return(bO<<5)+bO+bP;};m.Compare=function(bO,bP){var bQ,bR,bS,bT,bU,bV;if(bO===bP)return 0;else{bR=typeof bO;switch(bR=="function"?1:bR=="boolean"?2:bR=="number"?2:bR=="string"?2:bR=="object"?3:0){case 0:return typeof bP=="undefined"?0:-1;case 1:return l.FailWith("Cannot compare function values.");case 2:return bO<bP?-1:1;case 3:if(bO===null)bS=-1;else if(bP===null)bS=1;else if("CompareTo"in bO)bS=bO.CompareTo(bP);else if("CompareTo0"in bO)bS=bO.CompareTo0(bP);else if(bO instanceof a.Array&&bP instanceof a.Array)bS=m.compareArrays(bO,bP);else if(bO instanceof a.Date&&bP instanceof a.Date)bS=m.compareDates(bO,bP);else{bT=[0];for(var bW in bO)if(function(bX){return!bO.hasOwnProperty(bX)?false:!bP.hasOwnProperty(bX)?(bT[0]=1,true):(bT[0]=m.Compare(bO[bX],bP[bX]),bT[0]!==0);}(bW))break;if(bT[0]===0){for(var bX in bP)if(function(bY){return!bP.hasOwnProperty(bY)?false:!bO.hasOwnProperty(bY)&&(bT[0]=-1,true);}(bX))break;}bS=bT[0];}return bS;}}};m.compareArrays=function(bO,bP){var bQ,bR;if(o.length(bO)<o.length(bP))return -1;else if(o.length(bO)>o.length(bP))return 1;else{bQ=0;bR=0;while(bQ===0&&bR<o.length(bO)){bQ=m.Compare(o.get(bO,bR),o.get(bP,bR));bR=bR+1;}return bQ;}};m.compareDates=function(bO,bP){return m.Compare(bO.getTime(),bP.getTime());};n.NewFromSeq=function(bO){var bP,bQ,bR;bP={};bQ=H.Get(bO);try{while(bQ.MoveNext()){bR=bQ.Current();bP[bR[0]]=bR[1];}}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}return bP;};o.get=function(bO,bP){o.checkBounds(bO,bP);return bO[bP];};o.length=function(bO){return bO.dims===2?bO.length*bO.length:bO.length;};o.checkBounds=function(bO,bP){if(bP<0||bP>=bO.length)l.FailWith("Index was outside the bounds of the array.");};o.set=function(bO,bP,bQ){o.checkBounds(bO,bP);bO[bP]=bQ;};s.Get=function(bO,bP){var bQ;function bR(){y.WhenRun(bP(),function(bS){if(!bQ[0]){bQ[0]=true;bO(bS);}},function(){if(!bQ[0])bR();});}bQ=[false];bR();};s.Map=function(bO,bP){return s.CreateLazy(function(){return y.Map(bO,bP());});};s.CreateLazy=function(bO){var bP;bP={c:null,o:bO};return function(){var bQ,bR;bQ=bP.c;return bQ===null?(bQ=bP.o(),bP.c=bQ,(bR=bQ.s,bR!=null&&bR.$==0)?bP.o=null:y.WhenObsoleteRun(bQ,function(){bP.c=null;}),bQ):bQ;};};s.Const=function(bO){var bP;bP=y.New({$:0,$0:bO});return function(){return bP;};};s.Bind=function(bO,bP){return s.Join(s.Map(bO,bP));};s.Join=function(bO){return s.CreateLazy(function(){return y.Join(bO());});};s.MapSeqCachedViewBy=function(bO,bP,bQ){var bR;bR=[new J.New$5()];return s.Map(function(bS){var bT,bU,bV;bT=bR[0];bU=new J.New$5();bV=_1.mapInPlace(function(bW){var bX,bY,bZ;bX=bO(bW);bY=bT.ContainsKey(bX)?(bZ=bT.get_Item(bX),(W.Set(bZ.r,bW),bZ)):s.ConvertSeqNode(function(b0){return bP(bX,b0);},bW);bU.set_Item(bX,bY);return bY.e;},o.ofSeq(bS));bR[0]=bU;return bV;},bQ);};s.Sink=function(bO,bP){function bQ(){y.WhenRun(bP(),bO,function(){bh.scheduler().Fork(bQ);});}bh.scheduler().Fork(bQ);};s.ConvertSeqNode=function(bO,bP){var bQ,bR;bQ=W.Create$1(bP);bR=bQ.get_View();return{e:bO(bR),r:bQ,w:bR};};s.Map2Unit=function(bO,bP){return s.CreateLazy(function(){return y.Map2Unit(bO(),bP());});};t=i.Obj=bL.Class({Equals:function(bO){return this===bO;},GetHashCode:function(){return -1;}},null,t);t.New=bL.Ctor(function(){},t);u=r.ListModel=bL.Class({Iter:function(bO){o.iter(bO,this["var"].Get());},Clear:function(){this["var"].Set(this.storage.SSet([]));this.ObsoleteAll();},ObsoleteAll:function(){A.iter(function(bO){y.Obsolete(bO.V);},this.it);this.it.Clear();},RemoveByKey:function(bO){var bP;bP=this;this["var"].Set(this.storage.SRemoveIf(function(bQ){return m.Equals(bP.key(bQ),bO);},this["var"].Get()));this.ObsoleteKey(bO);},Append:function(bO){var bP,bQ,bR,bS;bP=this;bQ=this["var"].Get();bR=this.key(bO);bS=o.tryFindIndex(function(bT){return m.Equals(bP.key(bT),bR);},bQ);if(bS!=null&&bS.$==1)this["var"].Set(this.storage.SSetAt(bS.$0,bO,bQ));else this["var"].Set(this.storage.SAppend(bO,bQ));this.ObsoleteKey(bR);},ObsoleteKey:function(bO){var bP,bQ;bP=(bQ=null,[this.it.TryGetValue(bO,{get:function(){return bQ;},set:function(bR){bQ=bR;}}),bQ]);if(bP[0]){y.Obsolete(bP[1]);this.it.Remove(bO);}},GetEnumerator:function(){return H.Get(this["var"].Get());},GetEnumerator0:function(){return H.Get0(this["var"].Get());}},t,u);u.New=bL.Ctor(function(bO,bP){u.New$3.call(this,bO,W.Create$1(o.ofSeq(A.distinctBy(bO,bP.SInit()))),bP);},u);u.New$3=bL.Ctor(function(bO,bP,bQ){t.New.call(this);this.key=bO;this["var"]=bP;this.storage=bQ;this.v=s.Map(function(bR){return bR.slice();},this["var"].get_View());this.it=new J.New$5();},u);w.Trim=function(bO){return bO.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};w.concat=function(bO,bP){return o.ofSeq(bP).join(bO);};w.SplitChars=function(bO,bP,bQ){return w.Split(bO,new a.RegExp("["+w.RegexEscape(bP.join(""))+"]"),bQ);};w.StartsWith=function(bO,bP){return bO.substring(0,bP.length)==bP;};w.Split=function(bO,bP,bQ){return bQ===1?o.filter(function(bR){return bR!=="";},w.SplitWith(bO,bP)):w.SplitWith(bO,bP);};w.RegexEscape=function(bO){return bO.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};w.SplitWith=function(bO,bP){return bO.split(bP);};w.forall=function(bO,bP){return A.forall(bO,w.protect(bP));};w.protect=function(bO){return bO===null?"":bO;};x.$cctor=function(){var bO;x.$cctor=a.ignore;x.totalMax=10*1024*1024;x.singleMax=5*1024*1024;x.button=self.document.getElementById("JobSend");x.files=u.Create(function(bP){return bP[0];},E.Empty);bO=N.EmbedView(s.Map(function(){var bP;function bQ(bR,bS){return N.Element("div",[],[N.Element("span",[M.Create("class","fileName")],[N.TextNode(bR)]),N.Element("span",[M.HandlerImpl("click",function(){return function(){return f.files().RemoveByKey(bR);};})],[N.TextNode("x")])]);}bP=f.files();return N.ConvertSeqBy(bP.key,function(bR){return function(bS){return bQ(bR,bS);};},bP["var"].get_View());},f.files().v));P.LoadLocalTemplates("");N.RunById("JobFiles",bO);x.currentSize=s.Map(function(bP){return A.sumBy(function(bQ){return bQ.size;},A.map(function(bQ){return bQ[1];},bP));},f.files().v);};y.WhenRun=function(bO,bP,bQ){var bR;bR=bO.s;if(bR==null)bQ();else bR!=null&&bR.$==2?(bR.$1.push(bQ),bP(bR.$0)):bR!=null&&bR.$==3?(bR.$0.push(bP),bR.$1.push(bQ)):bP(bR.$0);};y.Map=function(bO,bP){var bQ,bR;bQ=bP.s;return bQ!=null&&bQ.$==0?y.New({$:0,$0:bO(bQ.$0)}):(bR=y.New({$:3,$0:[],$1:[]}),(y.When(bP,function(bS){y.MarkDone(bR,bP,bO(bS));},bR),bR));};y.WhenObsoleteRun=function(bO,bP){var bQ;bQ=bO.s;if(bQ==null)bP();else bQ!=null&&bQ.$==2?bQ.$1.push(bP):bQ!=null&&bQ.$==3?bQ.$1.push(bP):void 0;};y.When=function(bO,bP,bQ){var bR;bR=bO.s;if(bR==null)y.Obsolete(bQ);else bR!=null&&bR.$==2?(y.EnqueueSafe(bR.$1,bQ),bP(bR.$0)):bR!=null&&bR.$==3?(bR.$0.push(bP),y.EnqueueSafe(bR.$1,bQ)):bP(bR.$0);};y.MarkDone=function(bO,bP,bQ){var bR;if(bR=bP.s,bR!=null&&bR.$==0)y.MarkForever(bO,bQ);else y.MarkReady(bO,bQ);};y.EnqueueSafe=function(bO,bP){var bQ,bR,bS,bT;bO.push(bP);if(bO.length%20===0){bQ=bO.slice(0);bk.Clear(bO);for(bR=0,bS=o.length(bQ)-1;bR<=bS;bR++){bT=o.get(bQ,bR);if(typeof bT=="object")(function(bU){if(bU.s)bO.push(bU);}(bT));else(function(bU){bO.push(bU);}(bT));}}else void 0;};y.MarkForever=function(bO,bP){var bQ,bR,bS,bT;bQ=bO.s;if(bQ!=null&&bQ.$==3){bO.s={$:0,$0:bP};bR=bQ.$0;for(bS=0,bT=o.length(bR)-1;bS<=bT;bS++)(o.get(bR,bS))(bP);}else void 0;};y.MarkReady=function(bO,bP){var bQ,bR,bS,bT;bQ=bO.s;if(bQ!=null&&bQ.$==3){bO.s={$:2,$0:bP,$1:bQ.$1};bR=bQ.$0;for(bS=0,bT=o.length(bR)-1;bS<=bT;bS++)(o.get(bR,bS))(bP);}else void 0;};y.Join=function(bO){var bP;bP=y.New({$:3,$0:[],$1:[]});y.When(bO,function(bQ){var bR;bR=bQ();y.When(bR,function(bS){var bT,bU;if((bT=bR.s,bT!=null&&bT.$==0)&&(bU=bO.s,bU!=null&&bU.$==0))y.MarkForever(bP,bS);else y.MarkReady(bP,bS);},bP);},bP);return bP;};y.Copy=function(bO){var bP,bQ,bR;bP=bO.s;return bP==null?bO:bP!=null&&bP.$==2?(bQ=y.New({$:2,$0:bP.$0,$1:[]}),(y.WhenObsolete(bO,bQ),bQ)):bP!=null&&bP.$==3?(bR=y.New({$:3,$0:[],$1:[]}),(y.When(bO,function(bS){y.MarkDone(bR,bO,bS);},bR),bR)):bO;};y.Map2Unit=function(bO,bP){var bQ,bR,bS;function bT(){var bU,bV,bW;if(!(bU=bS.s,bU!=null&&bU.$==0||bU!=null&&bU.$==2)){bV=y.ValueAndForever(bO);bW=y.ValueAndForever(bP);if(bV!=null&&bV.$==1)bW!=null&&bW.$==1?bV.$0[1]&&bW.$0[1]?y.MarkForever(bS,null):y.MarkReady(bS,null):void 0;}}bQ=bO.s;bR=bP.s;return bQ!=null&&bQ.$==0?bR!=null&&bR.$==0?y.New({$:0,$0:null}):bP:bR!=null&&bR.$==0?bO:(bS=y.New({$:3,$0:[],$1:[]}),(y.When(bO,bT,bS),y.When(bP,bT,bS),bS));};y.WhenObsolete=function(bO,bP){var bQ;bQ=bO.s;if(bQ==null)y.Obsolete(bP);else bQ!=null&&bQ.$==2?y.EnqueueSafe(bQ.$1,bP):bQ!=null&&bQ.$==3?y.EnqueueSafe(bQ.$1,bP):void 0;};y.ValueAndForever=function(bO){var bP;bP=bO.s;return bP!=null&&bP.$==0?{$:1,$0:[bP.$0,true]}:bP!=null&&bP.$==2?{$:1,$0:[bP.$0,false]}:null;};A.map=function(bO,bP){return{GetEnumerator:function(){var bQ;bQ=H.Get(bP);return new Q.New(null,null,function(bR){return bQ.MoveNext()&&(bR.c=bO(bQ.Current()),true);},function(){bQ.Dispose();});}};};A.sumBy=function(bO,bP){return A.fold(function(bQ,bR){return bQ+bO(bR);},0,bP);};A.init=function(bO,bP){return A.take(bO,A.initInfinite(bP));};A.iter=function(bO,bP){var bQ;bQ=H.Get(bP);try{while(bQ.MoveNext())bO(bQ.Current());}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};A.fold=function(bO,bP,bQ){var bR,bS;bR=bP;bS=H.Get(bQ);try{while(bS.MoveNext())bR=bO(bR,bS.Current());return bR;}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}};A.take=function(bO,bP){bO<0?A.nonNegative():void 0;return{GetEnumerator:function(){var bQ;bQ=[H.Get(bP)];return new Q.New(0,null,function(bR){var bS;bR.s=bR.s+1;return bR.s>bO?false:(bS=bQ[0],m.Equals(bS,null)?A.insufficient():bS.MoveNext()?(bR.c=bS.Current(),bR.s===bO?(bS.Dispose(),bQ[0]=null):void 0,true):(bS.Dispose(),bQ[0]=null,A.insufficient()));},function(){var bR;bR=bQ[0];if(!m.Equals(bR,null))bR.Dispose();});}};};A.initInfinite=function(bO){return{GetEnumerator:function(){return new Q.New(0,null,function(bP){bP.c=bO(bP.s);bP.s=bP.s+1;return true;},void 0);}};};A.distinctBy=function(bO,bP){return{GetEnumerator:function(){var bQ,bR;bQ=H.Get(bP);bR=new Y.New$3();return new Q.New(null,null,function(bS){var bT,bU;if(bQ.MoveNext()){bT=bQ.Current();bU=bR.Add(bO(bT));while(!bU&&bQ.MoveNext()){bT=bQ.Current();bU=bR.Add(bO(bT));}return bU&&(bS.c=bT,true);}else return false;},function(){bQ.Dispose();});}};};A.head=function(bO){var bP;bP=H.Get(bO);try{return bP.MoveNext()?bP.Current():A.insufficient();}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};A.max=function(bO){var bP,bQ,bR;bP=H.Get(bO);try{if(!bP.MoveNext())A.seqEmpty();bQ=bP.Current();while(bP.MoveNext()){bR=bP.Current();if(m.Compare(bR,bQ)===1)bQ=bR;}return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};A.forall=function(bO,bP){return!A.exists(function(bQ){return!bO(bQ);},bP);};A.seqEmpty=function(){return l.FailWith("The input sequence was empty.");};A.exists=function(bO,bP){var bQ,bR;bQ=H.Get(bP);try{bR=false;while(!bR&&bQ.MoveNext())bR=bO(bQ.Current());return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};B.toSafe=function(bO){return bO==null?"":bO;};o.iter=function(bO,bP){var bQ,bR;for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++)bO(bP[bQ]);};o.tryFindIndex=function(bO,bP){var bQ,bR;bQ=null;bR=0;while(bR<bP.length&&bQ==null){bO(bP[bR])?bQ={$:1,$0:bR}:void 0;bR=bR+1;}return bQ;};o.ofSeq=function(bO){var bP,bQ;if(bO instanceof a.Array)return bO.slice();else if(bO instanceof E)return o.ofList(bO);else{bP=[];bQ=H.Get(bO);try{while(bQ.MoveNext())bP.push(bQ.Current());return bP;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}}};o.concat=function(bO){return a.Array.prototype.concat.apply([],o.ofSeq(bO));};o.ofList=function(bO){var bP,bQ;bQ=[];bP=bO;while(!(bP.$==0)){bQ.push(D.head(bP));bP=D.tail(bP);}return bQ;};o.tryPick=function(bO,bP){var bQ,bR,bS;bQ=null;bR=0;while(bR<bP.length&&bQ==null){bS=bO(bP[bR]);if(bS!=null&&bS.$==1)bQ=bS;bR=bR+1;}return bQ;};o.filter=function(bO,bP){var bQ,bR,bS;bQ=[];for(bR=0,bS=bP.length-1;bR<=bS;bR++)if(bO(bP[bR]))bQ.push(bP[bR]);return bQ;};o.exists=function(bO,bP){var bQ,bR,bS,bT;bQ=false;bR=0;bT=o.length(bP);while(!bQ&&bR<bT)if(bO(bP[bR]))bQ=true;else bR=bR+1;return bQ;};o.map=function(bO,bP){var bQ,bR,bS;bQ=new a.Array(bP.length);for(bR=0,bS=bP.length-1;bR<=bS;bR++)bQ[bR]=bO(bP[bR]);return bQ;};o.foldBack=function(bO,bP,bQ){var bR,bS,bT,bU,bV;bR=bQ;bT=bP.length;for(bU=1,bV=bT;bU<=bV;bU++)bR=bO(bP[bT-bU],bR);return bR;};o.pick=function(bO,bP){var bQ;bQ=o.tryPick(bO,bP);return bQ==null?l.FailWith("KeyNotFoundException"):bQ.$0;};o.choose=function(bO,bP){var bQ,bR,bS,bT;bQ=[];for(bR=0,bS=bP.length-1;bR<=bS;bR++){bT=bO(bP[bR]);if(bT==null);else bQ.push(bT.$0);}return bQ;};o.create=function(bO,bP){var bQ,bR,bS;bQ=new a.Array(bO);for(bR=0,bS=bO-1;bR<=bS;bR++)bQ[bR]=bP;return bQ;};o.init=function(bO,bP){var bQ,bR,bS;if(bO<0)l.FailWith("Negative size given.");else null;bQ=new a.Array(bO);for(bR=0,bS=bO-1;bR<=bS;bR++)bQ[bR]=bP(bR);return bQ;};o.forall=function(bO,bP){var bQ,bR,bS,bT;bQ=true;bR=0;bT=o.length(bP);while(bQ&&bR<bT)if(bO(bP[bR]))bR=bR+1;else bQ=false;return bQ;};C=r.Var=bL.Class({},t,C);C.New=bL.Ctor(function(){t.New.call(this);},C);u.Create=function(bO,bP){return u.CreateWithStorage(bO,L.InMemory(o.ofSeq(bP)));};u.CreateWithStorage=function(bO,bP){return new u.New(bO,bP);};E=D.T=bL.Class({GetEnumerator:function(){return new Q.New(this,null,function(bO){var bP;bP=bO.s;return bP.$==0?false:(bO.c=bP.$0,bO.s=bP.$1,true);},void 0);},GetEnumerator0:function(){return H.Get(this);}},null,E);E.Empty=new E({$:0});s=r.View=bL.Class({},null,s);G=F.attr=bL.Class({},t,G);y.Obsolete=function(bO){var bP,bQ,bR,bS,bT;bQ=bO.s;if(bQ==null||(bQ!=null&&bQ.$==2?(bP=bQ.$1,false):bQ!=null&&bQ.$==3?(bP=bQ.$1,false):true))void 0;else{bO.s=null;for(bR=0,bS=o.length(bP)-1;bR<=bS;bR++){bT=o.get(bP,bR);if(typeof bT=="object")(function(bU){y.Obsolete(bU);}(bT));else bT();}}};y.New=function(bO){return{s:bO};};H.Get=function(bO){return bO instanceof a.Array?H.ArrayEnumerator(bO):m.Equals(typeof bO,"string")?H.StringEnumerator(bO):bO.GetEnumerator();};H.ArrayEnumerator=function(bO){return new Q.New(0,null,function(bP){var bQ;bQ=bP.s;return bQ<o.length(bO)&&(bP.c=o.get(bO,bQ),bP.s=bQ+1,true);},void 0);};H.StringEnumerator=function(bO){return new Q.New(0,null,function(bP){var bQ;bQ=bP.s;return bQ<bO.length&&(bP.c=bO[bQ],bP.s=bQ+1,true);},void 0);};H.Get0=function(bO){return bO instanceof a.Array?H.ArrayEnumerator(bO):m.Equals(typeof bO,"string")?H.StringEnumerator(bO):"GetEnumerator0"in bO?bO.GetEnumerator0():bO.GetEnumerator();};D.ofSeq=function(bO){var bP,bQ,bR,bS,bT,bU;if(bO instanceof E)return bO;else if(bO instanceof a.Array)return D.ofArray(bO);else{bP=H.Get(bO);try{bR=bP.MoveNext();if(!bR)bQ=E.Empty;else{bT=new E({$:1});bS=bT;while(bR){bS.$0=bP.Current();if(bP.MoveNext())bS=(bU=new E({$:1}),bS.$1=bU,bU);else bR=false;}bS.$1=E.Empty;bQ=bT;}return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}}};D.ofArray=function(bO){var bP,bQ,bR;bP=E.Empty;for(bQ=o.length(bO)-1,bR=0;bQ>=bR;bQ--)bP=new E({$:1,$0:o.get(bO,bQ),$1:bP});return bP;};D.head=function(bO){return bO.$==1?bO.$0:D.listEmpty();};D.tail=function(bO){return bO.$==1?bO.$1:D.listEmpty();};D.listEmpty=function(){return l.FailWith("The input list was empty.");};J=I.Dictionary=bL.Class({Clear:function(){this.data=[];this.count=0;},TryGetValue:function(bO,bP){var bQ,bR,bS;bQ=this;bR=this.data[this.hash(bO)];return bR==null?false:(bS=o.tryPick(function(bT){var bU;bU=l.KeyValue(bT);return bQ.equals.apply(null,[bU[0],bO])?{$:1,$0:bU[1]}:null;},bR),bS!=null&&bS.$==1&&(bP.set(bS.$0),true));},Remove:function(bO){return this.remove(bO);},set_Item:function(bO,bP){this.set(bO,bP);},remove:function(bO){var bP,bQ,bR,bS;bP=this;bQ=this.hash(bO);bR=this.data[bQ];return bR==null?false:(bS=o.filter(function(bT){return!bP.equals.apply(null,[(l.KeyValue(bT))[0],bO]);},bR),o.length(bS)<bR.length&&(this.count=this.count-1,this.data[bQ]=bS,true));},ContainsKey:function(bO){var bP,bQ;bP=this;bQ=this.data[this.hash(bO)];return bQ==null?false:o.exists(function(bR){return bP.equals.apply(null,[(l.KeyValue(bR))[0],bO]);},bQ);},get_Keys:function(){return new _7.New(this);},set:function(bO,bP){var bQ,bR,bS,bT;bQ=this;bR=this.hash(bO);bS=this.data[bR];if(bS==null){this.count=this.count+1;this.data[bR]=new a.Array({K:bO,V:bP});}else{bT=o.tryFindIndex(function(bU){return bQ.equals.apply(null,[(l.KeyValue(bU))[0],bO]);},bS);bT==null?(this.count=this.count+1,bS.push({K:bO,V:bP})):bS[bT.$0]={K:bO,V:bP};}},get_Item:function(bO){return this.get(bO);},get:function(bO){var bP,bQ;bP=this;bQ=this.data[this.hash(bO)];return bQ==null?_4.notPresent():o.pick(function(bR){var bS;bS=l.KeyValue(bR);return bP.equals.apply(null,[bS[0],bO])?{$:1,$0:bS[1]}:null;},bQ);},GetEnumerator:function(){return H.Get0(this);},GetEnumerator0:function(){return H.Get0(o.concat(k.GetFieldValues(this.data)));}},t,J);J.New$5=bL.Ctor(function(){J.New$6.call(this,[],m.Equals,m.Hash);},J);J.New$6=bL.Ctor(function(bO,bP,bQ){var bR,bS;t.New.call(this);this.equals=bP;this.hash=bQ;this.count=0;this.data=[];bR=H.Get(bO);try{while(bR.MoveNext()){bS=bR.Current();this.set(bS.K,bS.V);}}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}},J);L.InMemory=function(bO){return new S.New(bO);};M=r.AttrProxy=bL.Class({},null,M);M.Create=function(bO,bP){return T.Static(function(bQ){bQ.setAttribute(bO,bP);});};M.HandlerImpl=function(bO,bP){return T.Static(function(bQ){bQ.addEventListener(bO,function(bR){return(bP(bQ))(bR);},false);});};M.Concat=function(bO){var bP;bP=_1.ofSeqNonCopying(bO);return _1.TreeReduce(T.EmptyAttr(),M.Append,bP);};M.Append=function(bO,bP){return T.AppendTree(bO,bP);};N=r.Doc=bL.Class({},t,N);N.TextNode=function(bO){return N.Mk({$:5,$0:self.document.createTextNode(bO)},s.Const());};N.EmbedView=function(bO){var bP;bP=V.CreateEmbedNode();return N.Mk({$:2,$0:bP},s.Map(a.ignore,s.Bind(function(bQ){V.UpdateEmbedNode(bP,bQ.docNode);return bQ.updates;},bO)));};N.RunById=function(bO,bP){var bQ;bQ=self.document.getElementById(bO);if(m.Equals(bQ,null))l.FailWith("invalid id: "+bO);else N.Run(bQ,bP);};N.Element=function(bO,bP,bQ){var bR,bS;bR=M.Concat(bP);bS=N.Concat(bQ);return _0.New(self.document.createElement(bO),bR,bS);};N.Mk=function(bO,bP){return new N.New(bO,bP);};N.Run=function(bO,bP){V.LinkElement(bO,bP.docNode);N.RunInPlace(false,bO,bP);};N.ConvertSeqBy=function(bO,bP,bQ){return N.Flatten(s.MapSeqCachedViewBy(bO,function(bR,bS){return(bP(bR))(bS);},bQ));};N.Concat=function(bO){var bP;bP=_1.ofSeqNonCopying(bO);return _1.TreeReduce(N.get_Empty(),N.Append,bP);};N.RunInPlace=function(bO,bP,bQ){var bR;bR=V.CreateRunState(bP,bQ.docNode);s.Sink(_8.get_UseAnimations()||_9.BatchUpdatesEnabled()?$.StartProcessor(V.PerformAnimatedUpdate(bO,bR,bQ.docNode)):function(){V.PerformSyncUpdate(bO,bR,bQ.docNode);},bQ.updates);};N.Flatten=function(bO){return N.EmbedView(s.Map(N.Concat,bO));};N.Append=function(bO,bP){return N.Mk({$:0,$0:bO.docNode,$1:bP.docNode},s.Map2Unit(bO.updates,bP.updates));};N.get_Empty=function(){return N.Mk(null,s.Const());};N.New=bL.Ctor(function(bO,bP){t.New.call(this);this.docNode=bO;this.updates=bP;},N);P.LoadLocalTemplates=function(bO){!P.LocalTemplatesLoaded()?(P.set_LocalTemplatesLoaded(true),P.LoadNestedTemplates(self.document.body,"")):void 0;P.LoadedTemplates().set_Item(bO,P.LoadedTemplateFile(""));};P.LocalTemplatesLoaded=function(){X.$cctor();return X.LocalTemplatesLoaded;};P.set_LocalTemplatesLoaded=function(bO){X.$cctor();X.LocalTemplatesLoaded=bO;};P.LoadNestedTemplates=function(bO,bP){var bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3;function bQ(b4){var b5,b6;if(!bR.ContainsKey(b4)){b5=(b6=null,[bS.TryGetValue(b4,{get:function(){return b6;},set:function(b7){b6=b7;}}),b6]);if(b5[0]){b3.Add(b4);bS.Remove(b4);P.PrepareTemplateStrict(bP,{$:1,$0:b4},b5[1],{$:1,$0:bQ});}else bM.warn(b3.Contains(b4)?"Encountered loop when instantiating "+b4:"Local template does not exist: "+b4);}}bR=P.LoadedTemplateFile(bP);bS=new J.New$5();bT=bO.querySelectorAll("[ws-template]");for(bU=0,bV=bT.length-1;bU<=bV;bU++){bW=bT[bU];bX=bW.getAttribute("ws-template").toLowerCase();bW.removeAttribute("ws-template");bS.set_Item(bX,P.FakeRootSingle(bW));}bY=bO.querySelectorAll("[ws-children-template]");for(bZ=0,b0=bY.length-1;bZ<=b0;bZ++){b1=bY[bZ];b2=b1.getAttribute("ws-children-template").toLowerCase();b1.removeAttribute("ws-children-template");bS.set_Item(b2,P.FakeRoot(b1));}b3=new Y.New$3();while(bS.count>0)bQ(A.head(bS.get_Keys()));};P.LoadedTemplates=function(){X.$cctor();return X.LoadedTemplates;};P.LoadedTemplateFile=function(bO){var bP,bQ,bR;bP=(bQ=null,[P.LoadedTemplates().TryGetValue(bO,{get:function(){return bQ;},set:function(bS){bQ=bS;}}),bQ]);return bP[0]?bP[1]:(bR=new J.New$5(),(P.LoadedTemplates().set_Item(bO,bR),bR));};P.FakeRootSingle=function(bO){var bP,bQ,bR,bS;bO.removeAttribute("ws-template");bP=bO.getAttribute("ws-replace");if(bP===null);else{bO.removeAttribute("ws-replace");bQ=bO.parentNode;m.Equals(bQ,null)?void 0:(bR=self.document.createElement(bO.tagName),bR.setAttribute("ws-replace",bP),bQ.replaceChild(bR,bO));}bS=self.document.createElement("div");bS.appendChild(bO);return bS;};P.FakeRoot=function(bO){var bP;bP=self.document.createElement("div");while(bO.hasChildNodes())bP.appendChild(bO.firstChild);return bP;};P.PrepareTemplateStrict=function(bO,bP,bQ,bR){var bS;function bT(bZ,b0){var b1,b2,b3,b4,b5,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp;function b6(cq){}while(true)switch(bZ){case 0:if(b0!==null){b1=b0.nextSibling;if(m.Equals(b0.nodeType,h.TEXT_NODE))_5.convertTextNode(b0);else if(m.Equals(b0.nodeType,h.ELEMENT_NODE))bV(b0);b0=b1;}else return null;break;case 1:b7=_6.string(b0.nodeName,{$:1,$0:3},null).toLowerCase();b8=(b2=b7.indexOf("."),b2===-1?[bO,b7]:[_6.string(b7,null,{$:1,$0:b2-1}),_6.string(b7,{$:1,$0:b2+1},null)]);b9=b8[1];b_=b8[0];if(b_!==""&&!P.LoadedTemplates().ContainsKey(b_))return _5.failNotLoaded(b9);else{if(b_===""&&bR!=null)bR.$0(b9);b$=P.LoadedTemplates().get_Item(b_);if(!b$.ContainsKey(b9))return _5.failNotLoaded(b9);else{ca=b$.get_Item(b9);cb=ca.cloneNode(true);cc=new Y.New$3();cd=new J.New$5();ce=b0.attributes;for(cf=0,cg=ce.length-1;cf<=cg;cf++){ch=ce.item(cf).name.toLowerCase();cd.set_Item(ch,(ci=ce.item(cf).nodeValue,ci===""?ch:ci.toLowerCase()));if(!cc.Add(ch))bM.warn("Hole mapped twice",ch);}for(cj=0,ck=b0.childNodes.length-1;cj<=ck;cj++){cl=b0.childNodes[cj];if(m.Equals(cl.nodeType,h.ELEMENT_NODE))!cc.Add(cl.nodeName.toLowerCase())?bM.warn("Hole filled twice",b9):void 0;}cm=b0.childNodes.length===1&&m.Equals(b0.firstChild.nodeType,h.TEXT_NODE);if(cm){b4=_5.fillTextHole(cb,b0.firstChild.textContent,b9);((function(cq){return function(cr){if(cr!=null)cq(cr.$0);};}((b5=function(cq){return function(cr){return cq.Add(cr);};}(cc),function(cq){return b6(b5(cq));})))(b4));}_5.removeHolesExcept(cb,cc);if(!cm){for(cn=0,co=b0.childNodes.length-1;cn<=co;cn++){cp=b0.childNodes[cn];if(m.Equals(cp.nodeType,h.ELEMENT_NODE))cp.hasAttributes()?_5.fillInstanceAttrs(cb,cp):bU(cb,cp);}}_5.mapHoles(cb,cd);_5.fill(cb,b0.parentNode,b0);b0.parentNode.removeChild(b0);return;}}break;}}function bU(bZ,b0){var b1,b3,b4;function b2(b5,b6){var b7;if(b3==="title"&&b0.hasChildNodes()){b7=U.ParseHTMLIntoFakeRoot(b0.textContent);b0.removeChild(b0.firstChild);while(b7.hasChildNodes())b0.appendChild(b7.firstChild);}else null;bV(b0);return _5.fill(b0,b5,b6);}b3=b0.nodeName.toLowerCase();P.foreachNotPreserved(bZ,"[ws-attr-holes]",function(b5){var b6,b7,b8,b9,b_;b6=w.SplitChars(b5.getAttribute("ws-attr-holes"),[" "],1);for(b7=0,b8=b6.length-1;b7<=b8;b7++){b9=o.get(b6,b7);b5.setAttribute(b9,(b_=new a.RegExp("\\${"+b3+"}","ig"),b5.getAttribute(b9).replace(b_,b0.textContent)));}});b4=bZ.querySelector("[ws-hole="+b3+"]");if(m.Equals(b4,null)){b1=bZ.querySelector("[ws-replace="+b3+"]");return m.Equals(b1,null)?null:(b2(b1.parentNode,b1),void b1.parentNode.removeChild(b1));}else{while(b4.hasChildNodes())b4.removeChild(b4.lastChild);b4.removeAttribute("ws-hole");return b2(b4,null);}}function bV(bZ){if(!bZ.hasAttribute("ws-preserve"))if(w.StartsWith(bZ.nodeName.toLowerCase(),"ws-"))bX(bZ);else{_5.convertAttrs(bZ);bW(bZ.firstChild);}}function bW(bZ){return bT(0,bZ);}function bX(bZ){return bT(1,bZ);}function bY(bZ){var b0,b1,b2,b3;while(true){b0=bZ.querySelector("[ws-template]");if(m.Equals(b0,null)){b1=bZ.querySelector("[ws-children-template]");if(m.Equals(b1,null))return null;else{b2=b1.getAttribute("ws-children-template");b1.removeAttribute("ws-children-template");P.PrepareTemplateStrict(bO,{$:1,$0:b2},b1,null);bZ=bZ;}}else{b3=b0.getAttribute("ws-template");(P.PrepareSingleTemplate(bO,{$:1,$0:b3},b0))(null);bZ=bZ;}}}bS=(bP==null?"":bP.$0).toLowerCase();P.LoadedTemplateFile(bO).set_Item(bS,bQ);if(bQ.hasChildNodes()){bY(bQ);bW(bQ.firstChild);}};P.foreachNotPreserved=function(bO,bP,bQ){U.IterSelector(bO,bP,function(bR){if(bR.closest("[ws-preserve]")==null)bQ(bR);});};P.PrepareSingleTemplate=function(bO,bP,bQ){var bR;bR=P.FakeRootSingle(bQ);return function(bS){P.PrepareTemplateStrict(bO,bP,bR,bS);};};P.TextHoleRE=function(){X.$cctor();return X.TextHoleRE;};Q=H.T=bL.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},t,Q);Q.New=bL.Ctor(function(bO,bP,bQ,bR){t.New.call(this);this.s=bO;this.c=bP;this.n=bQ;this.d=bR;},Q);R.TryParseInt32=function(bO,bP){return R.TryParse(bO,-2147483648,2147483647,bP);};S=L.ArrayStorage=bL.Class({SSet:function(bO){return o.ofSeq(bO);},SRemoveIf:function(bO,bP){return o.filter(function(bQ){return!bO(bQ);},bP);},SSetAt:function(bO,bP,bQ){o.set(bQ,bO,bP);return bQ;},SAppend:function(bO,bP){bP.push(bO);return bP;},SInit:function(){return this.init;}},t,S);S.New=bL.Ctor(function(bO){t.New.call(this);this.init=bO;},S);T.Static=function(bO){return new M({$:3,$0:bO});};T.Updates=function(bO){return _1.MapTreeReduce(function(bP){return bP.NChanged();},s.Const(),s.Map2Unit,bO.DynNodes);};T.AppendTree=function(bO,bP){var bQ;return bO===null?bP:bP===null?bO:(bQ=new M({$:2,$0:bO,$1:bP}),(T.SetFlags(bQ,T.Flags(bO)|T.Flags(bP)),bQ));};T.EmptyAttr=function(){bl.$cctor();return bl.EmptyAttr;};T.Insert=function(bO,bP){var bQ,bR,bS;function bT(bU){var bV,bW;while(true)if(!(bU===null)){if(bU!=null&&bU.$==1)return bQ.push(bU.$0);else if(bU!=null&&bU.$==2){bV=bU.$1;bW=bU.$0;bT(bW);bU=bV;}else return bU!=null&&bU.$==3?bU.$0(bO):bU!=null&&bU.$==4?bR.push(bU.$0):null;}else return null;}bQ=[];bR=[];bT(bP);bS=bQ.slice(0);return bd.New(bO,T.Flags(bP),bS,bR.length===0?null:{$:1,$0:function(bU){A.iter(function(bV){bV(bU);},bR);}});};T.SetFlags=function(bO,bP){bO.flags=bP;};T.Flags=function(bO){return bO!==null&&bO.hasOwnProperty("flags")?bO.flags:0;};T.HasExitAnim=function(bO){var bP;bP=2;return(bO.DynFlags&bP)===bP;};T.GetExitAnim=function(bO){return T.GetAnim(bO,function(bP,bQ){return bP.NGetExitAnim(bQ);});};T.HasEnterAnim=function(bO){var bP;bP=1;return(bO.DynFlags&bP)===bP;};T.GetEnterAnim=function(bO){return T.GetAnim(bO,function(bP,bQ){return bP.NGetEnterAnim(bQ);});};T.HasChangeAnim=function(bO){var bP;bP=4;return(bO.DynFlags&bP)===bP;};T.GetChangeAnim=function(bO){return T.GetAnim(bO,function(bP,bQ){return bP.NGetChangeAnim(bQ);});};T.GetAnim=function(bO,bP){return _8.Concat(o.map(function(bQ){return bP(bQ,bO.DynElem);},bO.DynNodes));};T.Sync=function(bO,bP){o.iter(function(bQ){bQ.NSync(bO);},bP.DynNodes);};U.ParseHTMLIntoFakeRoot=function(bO){var bP,bQ,bR,bS,bT;function bU(bV,bW){var bX;while(true)if(bW===0)return bV;else{bX=bW;bV=bV.lastChild;bW=bX-1;}}bP=self.document.createElement("div");return!U.rhtml().test(bO)?(bP.appendChild(self.document.createTextNode(bO)),bP):(bQ=(bR=U.rtagName().exec(bO),m.Equals(bR,null)?"":o.get(bR,1).toLowerCase()),(bS=(bT=(U.wrapMap())[bQ],bT?bT:U.defaultWrap()),(bP.innerHTML=bS[1]+bO.replace(U.rxhtmlTag(),"<$1></$2>")+bS[2],bU(bP,bS[0]))));};U.rhtml=function(){bm.$cctor();return bm.rhtml;};U.wrapMap=function(){bm.$cctor();return bm.wrapMap;};U.defaultWrap=function(){bm.$cctor();return bm.defaultWrap;};U.rxhtmlTag=function(){bm.$cctor();return bm.rxhtmlTag;};U.rtagName=function(){bm.$cctor();return bm.rtagName;};U.IterSelector=function(bO,bP,bQ){var bR,bS,bT;bR=bO.querySelectorAll(bP);for(bS=0,bT=bR.length-1;bS<=bT;bS++)bQ(bR[bS]);};U.InsertAt=function(bO,bP,bQ){var bR;if(!(bQ.parentNode===bO&&bP===(bR=bQ.nextSibling,m.Equals(bR,null)?null:bR)))bO.insertBefore(bQ,bP);};U.RemoveNode=function(bO,bP){if(bP.parentNode===bO)bO.removeChild(bP);};V.CreateEmbedNode=function(){return{Current:null,Dirty:false};};V.UpdateEmbedNode=function(bO,bP){bO.Current=bP;bO.Dirty=true;};V.LinkElement=function(bO,bP){V.InsertDoc(bO,bP,null);};V.InsertDoc=function(bO,bP,bQ){var bR,bS,bT;while(true)if(bP!=null&&bP.$==1)return V.InsertNode(bO,bP.$0.El,bQ);else if(bP!=null&&bP.$==2){bR=bP.$0;bR.Dirty=false;bP=bR.Current;}else if(bP==null)return bQ;else if(bP!=null&&bP.$==4)return V.InsertNode(bO,bP.$0.Text,bQ);else if(bP!=null&&bP.$==5)return V.InsertNode(bO,bP.$0,bQ);else if(bP!=null&&bP.$==6)return o.foldBack(function(bU,bV){return(((bL.Curried3(function(bW,bX,bY){return bX==null||bX.constructor===K?V.InsertDoc(bW,bX,bY):V.InsertNode(bW,bX,bY);}))(bO))(bU))(bV);},bP.$0.Els,bQ);else{bS=bP.$1;bT=bP.$0;bP=bT;bQ=V.InsertDoc(bO,bS,bQ);}};V.CreateRunState=function(bO,bP){return bf.New(bg.get_Empty(),V.CreateElemNode(bO,T.EmptyAttr(),bP));};V.PerformAnimatedUpdate=function(bO,bP,bQ){var bR;return _8.get_UseAnimations()?(bR=null,bh.Delay(function(){var bS,bT,bU;bS=bg.FindAll(bQ);bT=V.ComputeChangeAnim(bP,bS);bU=V.ComputeEnterAnim(bP,bS);return bh.Bind(_8.Play(_8.Append(bT,V.ComputeExitAnim(bP,bS))),function(){return bh.Bind(V.SyncElemNodesNextFrame(bO,bP),function(){return bh.Bind(_8.Play(bU),function(){bP.PreviousNodes=bS;return bh.Return(null);});});});})):V.SyncElemNodesNextFrame(bO,bP);};V.PerformSyncUpdate=function(bO,bP,bQ){var bR;bR=bg.FindAll(bQ);V.SyncElemNode(bO,bP.Top);bP.PreviousNodes=bR;};V.CreateElemNode=function(bO,bP,bQ){var bR;V.LinkElement(bO,bQ);bR=T.Insert(bO,bP);return _2.New(bR,bQ,null,bO,ba.Int(),bL.GetOptional(bR.OnAfterRender));};V.InsertNode=function(bO,bP,bQ){U.InsertAt(bO,bQ,bP);return bP;};V.SyncElemNodesNextFrame=function(bO,bP){function bQ(bR){a.requestAnimationFrame(function(){V.SyncElemNode(bO,bP.Top);bR();});}return _9.BatchUpdatesEnabled()?bh.FromContinuations(function(bR,bS,bT){return bQ.apply(null,[bR,bS,bT]);}):(V.SyncElemNode(bO,bP.Top),bh.Return(null));};V.ComputeExitAnim=function(bO,bP){return _8.Concat(o.map(function(bQ){return T.GetExitAnim(bQ.Attr);},bg.ToArray(bg.Except(bP,bg.Filter(function(bQ){return T.HasExitAnim(bQ.Attr);},bO.PreviousNodes)))));};V.ComputeEnterAnim=function(bO,bP){return _8.Concat(o.map(function(bQ){return T.GetEnterAnim(bQ.Attr);},bg.ToArray(bg.Except(bO.PreviousNodes,bg.Filter(function(bQ){return T.HasEnterAnim(bQ.Attr);},bP)))));};V.ComputeChangeAnim=function(bO,bP){var bQ;function bR(bS){return T.HasChangeAnim(bS.Attr);}bQ=function(bS){return bg.Filter(bR,bS);};return _8.Concat(o.map(function(bS){return T.GetChangeAnim(bS.Attr);},bg.ToArray(bg.Intersect(bQ(bO.PreviousNodes),bQ(bP)))));};V.SyncElemNode=function(bO,bP){!bO?V.SyncElement(bP):void 0;V.Sync(bP.Children);V.AfterRender(bP);};V.SyncElement=function(bO){function bP(bQ){function bR(bS){var bT,bU,bV,bW;while(true){if(bS!=null&&bS.$==0){bU=bS.$1;bV=bS.$0;if(bR(bV))return true;else bS=bU;}else if(bS!=null&&bS.$==2){bW=bS.$0;if(bW.Dirty)return true;else bS=bW.Current;}else return bS!=null&&bS.$==6&&(bT=bS.$0,bT.Dirty||o.exists(bP,bT.Holes));}}return bR(bQ.Children);}T.Sync(bO.El,bO.Attr);if(bP(bO))V.DoSyncElement(bO);};V.Sync=function(bO){var bP,bQ,bR,bS,bT;while(true){if(bO!=null&&bO.$==1)return V.SyncElemNode(false,bO.$0);else if(bO!=null&&bO.$==2){bR=bO.$0;bO=bR.Current;}else if(bO==null)return null;else if(bO!=null&&bO.$==5)return null;else if(bO!=null&&bO.$==4){bP=bO.$0;return bP.Dirty?(bP.Text.nodeValue=bP.Value,bP.Dirty=false):null;}else if(bO!=null&&bO.$==6){bQ=bO.$0;o.iter(function(bU){return function(bV){V.SyncElemNode(bU,bV);};}(false),bQ.Holes);o.iter(function(bU){T.Sync(bU[0],bU[1]);},bQ.Attrs);return V.AfterRender(bQ);}else{bS=bO.$1;bT=bO.$0;V.Sync(bT);bO=bS;}}};V.AfterRender=function(bO){var bP;bP=bL.GetOptional(bO.Render);if(bP!=null&&bP.$==1){bP.$0(bO.El);bL.SetOptional(bO,"Render",null);}};V.DoSyncElement=function(bO){var bP,bQ,bR;function bS(bT,bU){var bV,bW,bX,bY;while(true){if(bT!=null&&bT.$==1)return bT.$0.El;else if(bT!=null&&bT.$==2){bW=bT.$0;if(bW.Dirty){bW.Dirty=false;return V.InsertDoc(bP,bW.Current,bU);}else bT=bW.Current;}else if(bT==null)return bU;else if(bT!=null&&bT.$==4)return bT.$0.Text;else if(bT!=null&&bT.$==5)return bT.$0;else if(bT!=null&&bT.$==6){bV=bT.$0;bV.Dirty?bV.Dirty=false:void 0;return o.foldBack(function(bZ,b0){return bZ==null||bZ.constructor===K?bS(bZ,b0):bZ;},bV.Els,bU);}else{bX=bT.$1;bY=bT.$0;bT=bY;bU=bS(bX,bU);}}}bP=bO.El;bC.Iter((bQ=bO.El,function(bT){U.RemoveNode(bQ,bT);}),bC.Except(bC.DocChildren(bO),bC.Children(bO.El,bL.GetOptional(bO.Delimiters))));bS(bO.Children,(bR=bL.GetOptional(bO.Delimiters),bR!=null&&bR.$==1?bR.$0[1]:null));};A.nonNegative=function(){return l.FailWith("The input must be non-negative.");};A.insufficient=function(){return l.FailWith("The input sequence has an insufficient number of elements.");};W=r.Var$1=bL.Class({},t,W);W.Create$1=function(bO){return new Z.New(false,y.New({$:2,$0:bO,$1:[]}),bO);};W.Set=function(bO,bP){bO.Set(bP);};X.$cctor=function(){X.$cctor=a.ignore;X.LoadedTemplates=new J.New$5();X.LocalTemplatesLoaded=false;X.GlobalHoles=new J.New$5();X.TextHoleRE="\\${([^}]+)}";X.RenderedFullDocTemplate=null;};Y=I.HashSet=bL.Class({Add:function(bO){return this.add(bO);},Contains:function(bO){var bP;bP=this.data[this.hash(bO)];return bP==null?false:this.arrContains(bO,bP);},add:function(bO){var bP,bQ;bP=this.hash(bO);bQ=this.data[bP];return bQ==null?(this.data[bP]=[bO],this.count=this.count+1,true):this.arrContains(bO,bQ)?false:(bQ.push(bO),this.count=this.count+1,true);},arrContains:function(bO,bP){var bQ,bR,bS,bT;bQ=true;bR=0;bT=bP.length;while(bQ&&bR<bT)if(this.equals.apply(null,[bP[bR],bO]))bQ=false;else bR=bR+1;return!bQ;},ExceptWith:function(bO){var bP;bP=H.Get(bO);try{while(bP.MoveNext())this.Remove(bP.Current());}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bO){var bP,bQ,bR,bS;bP=0;bQ=bp.concat(this.data);for(bR=0,bS=bQ.length-1;bR<=bS;bR++)o.set(bO,bR,bQ[bR]);},IntersectWith:function(bO){var bP,bQ,bR,bS,bT;bP=new Y.New$4(bO,this.equals,this.hash);bQ=bp.concat(this.data);for(bR=0,bS=bQ.length-1;bR<=bS;bR++){bT=bQ[bR];if(!bP.Contains(bT))this.Remove(bT);}},Remove:function(bO){var bP;bP=this.data[this.hash(bO)];return bP==null?false:this.arrRemove(bO,bP)&&(this.count=this.count-1,true);},arrRemove:function(bO,bP){var bQ,bR,bS,bT;bQ=true;bR=0;bT=bP.length;while(bQ&&bR<bT)if(this.equals.apply(null,[bP[bR],bO])){bP.splice.apply(bP,[bR,1]);bQ=false;}else bR=bR+1;return!bQ;},GetEnumerator:function(){return H.Get(bp.concat(this.data));},GetEnumerator0:function(){return H.Get(bp.concat(this.data));}},t,Y);Y.New$3=bL.Ctor(function(){Y.New$4.call(this,[],m.Equals,m.Hash);},Y);Y.New$4=bL.Ctor(function(bO,bP,bQ){var bR;t.New.call(this);this.equals=bP;this.hash=bQ;this.data=[];this.count=0;bR=H.Get(bO);try{while(bR.MoveNext())this.add(bR.Current());}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}},Y);Y.New$2=bL.Ctor(function(bO){Y.New$4.call(this,bO,m.Equals,m.Hash);},Y);Z=r.ConcreteVar=bL.Class({Get:function(){return this.current;},Set:function(bO){if(this.isConst)(function(bP){return bP("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bP){bM.log(bP);}));else{y.Obsolete(this.snap);this.current=bO;this.snap=y.New({$:2,$0:bO,$1:[]});}},get_View:function(){return this.view;},UpdateMaybe:function(bO){var bP;bP=bO(this.Get());if(bP!=null&&bP.$==1)this.Set(bP.$0);}},C,Z);Z.New=bL.Ctor(function(bO,bP,bQ){var bR;bR=this;C.New.call(this);this.isConst=bO;this.current=bQ;this.snap=bP;this.view=function(){return bR.snap;};this.id=ba.Int();},Z);_0=r.Elt=bL.Class({},N,_0);_0.New=function(bO,bP,bQ){var bR,bS;bR=V.CreateElemNode(bO,bP,bQ.docNode);bS=bb.Create(bQ.updates);return new _0.New$1({$:1,$0:bR},s.Map2Unit(T.Updates(bR.Attr),bS.v),bO,bS);};_0.New$1=bL.Ctor(function(bO,bP,bQ,bR){N.New.call(this,bO,bP);this.docNode$1=bO;this.updates$1=bP;this.elt=bQ;this.rvUpdates=bR;},_0);_1.ofSeqNonCopying=function(bO){var bP,bQ;if(bO instanceof a.Array)return bO;else if(bO instanceof E)return o.ofList(bO);else if(bO===null)return[];else{bP=[];bQ=H.Get(bO);try{while(bQ.MoveNext())bP.push(bQ.Current());return bP;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}}};_1.TreeReduce=function(bO,bP,bQ){var bR;function bS(bT){return function(bU){var bV,bW;return bU<=0?bO:bU===1&&(bT>=0&&bT<bR)?o.get(bQ,bT):(bW=bU/2>>0,bP((bS(bT))(bW),(bS(bT+bW))(bU-bW)));};}bR=o.length(bQ);return(bS(0))(bR);};_1.mapInPlace=function(bO,bP){var bQ,bR;for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++)bP[bQ]=bO(bP[bQ]);return bP;};_1.MapTreeReduce=function(bO,bP,bQ,bR){var bS;function bT(bU){return function(bV){var bW,bX;return bV<=0?bP:bV===1&&(bU>=0&&bU<bS)?bO(o.get(bR,bU)):(bX=bV/2>>0,bQ((bT(bU))(bX),(bT(bU+bX))(bV-bX)));};}bS=o.length(bR);return(bT(0))(bS);};_2=r.DocElemNode=bL.Class({Equals:function(bO){return this.ElKey===bO.ElKey;},GetHashCode:function(){return this.ElKey;}},null,_2);_2.New=function(bO,bP,bQ,bR,bS,bT){var bU;return new _2((bU={Attr:bO,Children:bP,El:bR,ElKey:bS},(bL.SetOptional(bU,"Delimiters",bQ),bL.SetOptional(bU,"Render",bT),bU)));};_4.notPresent=function(){return l.FailWith("The given key was not present in the dictionary.");};_5.convertTextNode=function(bO){var bP,bQ,bR,bS,bT,bU;bP=null;bQ=0;bS=bO.textContent;bT=new a.RegExp(P.TextHoleRE(),"g");while(bP=bT.exec(bS),bP!==null){bO.parentNode.insertBefore(self.document.createTextNode(_6.string(bS,{$:1,$0:bQ},{$:1,$0:bT.lastIndex-o.get(bP,0).length-1})),bO);bQ=bT.lastIndex;bU=self.document.createElement("span");bU.setAttribute("ws-replace",o.get(bP,1).toLowerCase());bO.parentNode.insertBefore(bU,bO);}bT.lastIndex=0;bO.textContent=_6.string(bS,{$:1,$0:bQ},null);};_5.failNotLoaded=function(bO){bM.warn("Instantiating non-loaded template",bO);};_5.fillTextHole=function(bO,bP,bQ){var bR;bR=bO.querySelector("[ws-replace]");return m.Equals(bR,null)?(bM.warn("Filling non-existent text hole",bQ),null):(bR.parentNode.replaceChild(self.document.createTextNode(bP),bR),{$:1,$0:bR.getAttribute("ws-replace")});};_5.removeHolesExcept=function(bO,bP){function bQ(bR){P.foreachNotPreserved(bO,"["+bR+"]",function(bS){if(!bP.Contains(bS.getAttribute(bR)))bS.removeAttribute(bR);});}bQ("ws-attr");bQ("ws-onafterrender");bQ("ws-var");P.foreachNotPreserved(bO,"[ws-hole]",function(bR){if(!bP.Contains(bR.getAttribute("ws-hole"))){bR.removeAttribute("ws-hole");while(bR.hasChildNodes())bR.removeChild(bR.lastChild);}});P.foreachNotPreserved(bO,"[ws-replace]",function(bR){if(!bP.Contains(bR.getAttribute("ws-replace")))bR.parentNode.removeChild(bR);});P.foreachNotPreserved(bO,"[ws-on]",function(bR){bR.setAttribute("ws-on",w.concat(" ",o.filter(function(bS){return bP.Contains(o.get(w.SplitChars(bS,[":"],1),1));},w.SplitChars(bR.getAttribute("ws-on"),[" "],1))));});P.foreachNotPreserved(bO,"[ws-attr-holes]",function(bR){var bS,bT,bU,bV,bW;bS=w.SplitChars(bR.getAttribute("ws-attr-holes"),[" "],1);for(bT=0,bU=bS.length-1;bT<=bU;bT++){bV=o.get(bS,bT);bR.setAttribute(bV,(bW=new a.RegExp(P.TextHoleRE(),"g"),bR.getAttribute(bV).replace(bW,function(bX,bY){return bP.Contains(bY)?bX:"";})));}});};_5.fillInstanceAttrs=function(bO,bP){var bQ,bR,bS,bT,bU;_5.convertAttrs(bP);bQ=bP.nodeName.toLowerCase();bR=bO.querySelector("[ws-attr="+bQ+"]");if(m.Equals(bR,null))bM.warn("Filling non-existent attr hole",bQ);else{bR.removeAttribute("ws-attr");for(bS=0,bT=bP.attributes.length-1;bS<=bT;bS++){bU=bP.attributes.item(bS);if(bU.name==="class"&&bR.hasAttribute("class"))bR.setAttribute("class",bR.getAttribute("class")+" "+bU.nodeValue);else bR.setAttribute(bU.name,bU.nodeValue);}}};_5.mapHoles=function(bO,bP){function bQ(bR){P.foreachNotPreserved(bO,"["+bR+"]",function(bS){var bT,bU;bT=(bU=null,[bP.TryGetValue(bS.getAttribute(bR).toLowerCase(),{get:function(){return bU;},set:function(bV){bU=bV;}}),bU]);if(bT[0])bS.setAttribute(bR,bT[1]);});}bQ("ws-hole");bQ("ws-replace");bQ("ws-attr");bQ("ws-onafterrender");bQ("ws-var");P.foreachNotPreserved(bO,"[ws-on]",function(bR){bR.setAttribute("ws-on",w.concat(" ",o.map(function(bS){var bT,bU,bV;bT=w.SplitChars(bS,[":"],1);bU=(bV=null,[bP.TryGetValue(o.get(bT,1),{get:function(){return bV;},set:function(bW){bV=bW;}}),bV]);return bU[0]?o.get(bT,0)+":"+bU[1]:bS;},w.SplitChars(bR.getAttribute("ws-on"),[" "],1))));});P.foreachNotPreserved(bO,"[ws-attr-holes]",function(bR){var bS,bT,bU;bS=w.SplitChars(bR.getAttribute("ws-attr-holes"),[" "],1);for(bT=0,bU=bS.length-1;bT<=bU;bT++)(function(){var bV;function bW(bX,bY){var bZ;bZ=l.KeyValue(bY);return bX.replace(new a.RegExp("\\${"+bZ[0]+"}","ig"),"${"+bZ[1]+"}");}bV=o.get(bS,bT);return bR.setAttribute(bV,(((bL.Curried3(A.fold))(bW))(bR.getAttribute(bV)))(bP));}());});};_5.fill=function(bO,bP,bQ){while(true)if(bO.hasChildNodes())bQ=bP.insertBefore(bO.lastChild,bQ);else return null;};_5.convertAttrs=function(bO){var bQ,bR,bS,bT,bU,bV,bW,bX;function bP(bY){var bZ;bZ=bO.getAttribute(bY);if(bZ===null);else bO.setAttribute(bY,bZ.toLowerCase());}bQ=bO.attributes;bR=[];bS=[];bT=[];for(bU=0,bV=bQ.length-1;bU<=bV;bU++){bW=bQ.item(bU);if(w.StartsWith(bW.nodeName,"ws-on")&&bW.nodeName!=="ws-onafterrender"&&bW.nodeName!=="ws-on"){bR.push(bW.nodeName);bS.push(_6.string(bW.nodeName,{$:1,$0:"ws-on".length},null)+":"+bW.nodeValue.toLowerCase());}else!w.StartsWith(bW.nodeName,"ws-")&&(new a.RegExp(P.TextHoleRE())).test(bW.nodeValue)?(bW.nodeValue=(bX=new a.RegExp(P.TextHoleRE(),"g"),bW.nodeValue.replace(bX,function(bY,bZ){return"${"+bZ.toLowerCase()+"}";})),bT.push(bW.nodeName)):void 0;}if(!(bS.length==0))bO.setAttribute("ws-on",w.concat(" ",bS));if(!(bT.length==0))bO.setAttribute("ws-attr-holes",w.concat(" ",bT));bP("ws-hole");bP("ws-replace");bP("ws-attr");bP("ws-onafterrender");bP("ws-var");o.iter(function(bY){bO.removeAttribute(bY);},bR);};_6.string=function(bO,bP,bQ){var bR,bS;return bP==null?bQ!=null&&bQ.$==1?(bR=bQ.$0,bR<0?"":bO.slice(0,bR+1)):"":bQ==null?bO.slice(bP.$0):(bS=bQ.$0,bS<0?"":bO.slice(bP.$0,bS+1));};_7=I.KeyCollection=bL.Class({GetEnumerator$1:function(){return H.Get(A.map(function(bO){return bO.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},t,_7);_7.New=bL.Ctor(function(bO){t.New.call(this);this.d=bO;},_7);_8.get_UseAnimations=function(){return bi.UseAnimations();};_8.Play=function(bO){var bP;bP=null;return bh.Delay(function(){return bh.Bind(_8.Run(a.ignore,bi.Actions(bO)),function(){bi.Finalize(bO);return bh.Return(null);});});};_8.Append=function(bO,bP){return{$:0,$0:bo.Append(bO.$0,bP.$0)};};_8.Run=function(bO,bP){var bQ;function bR(bS){function bT(bU){return function(bV){var bW;bW=bV-bU;bP.Compute(bW);bO();return bW<=bQ?void a.requestAnimationFrame(function(bX){(bT(bU))(bX);}):bS();};}a.requestAnimationFrame(function(bU){(bT(bU))(bU);});}bQ=bP.Duration;return bQ===0?bh.Zero():bh.FromContinuations(function(bS,bT,bU){return bR.apply(null,[bS,bT,bU]);});};_8.Concat=function(bO){return{$:0,$0:bo.Concat(A.map(bi.List,bO))};};_9.BatchUpdatesEnabled=function(){bj.$cctor();return bj.BatchUpdatesEnabled;};$.StartProcessor=function(bO){var bP;function bQ(){var bR;bR=null;return bh.Delay(function(){return bh.Bind(bO,function(){var bS;bS=bP[0];return m.Equals(bS,1)?(bP[0]=0,bh.Zero()):m.Equals(bS,2)?(bP[0]=1,bQ()):bh.Zero();});});}bP=[0];return function(){var bR;bR=bP[0];if(m.Equals(bR,0)){bP[0]=1;bh.Start(bQ(),null);}else m.Equals(bR,1)?bP[0]=2:void 0;};};ba.Int=function(){ba.set_counter(ba.counter()+1);return ba.counter();};ba.set_counter=function(bO){bq.$cctor();bq.counter=bO;};ba.counter=function(){bq.$cctor();return bq.counter;};bb=r.Updates=bL.Class({},null,bb);bb.Create=function(bO){var bP;bP=null;bP=bb.New(bO,null,function(){var bQ;bQ=bP.s;return bQ===null?(bQ=y.Copy(bP.c()),bP.s=bQ,y.WhenObsoleteRun(bQ,function(){bP.s=null;}),bQ):bQ;});return bP;};bb.New=function(bO,bP,bQ){return new bb({c:bO,s:bP,v:bQ});};bd.New=function(bO,bP,bQ,bR){var bS;bS={DynElem:bO,DynFlags:bP,DynNodes:bQ};bL.SetOptional(bS,"OnAfterRender",bR);return bS;};bf.New=function(bO,bP){return{PreviousNodes:bO,Top:bP};};bg.get_Empty=function(){return{$:0,$0:new Y.New$3()};};bg.FindAll=function(bO){var bP;function bQ(bT,bU){var bV,bW,bX,bY,bZ;while(true)switch(bT){case 0:if(bU!=null&&bU.$==0){bW=bU.$1;bX=bU.$0;bQ(0,bX);bU=bW;}else if(bU!=null&&bU.$==1){bY=bU.$0;bU=bY;bT=1;}else if(bU!=null&&bU.$==2){bZ=bU.$0;bU=bZ.Current;}else return bU!=null&&bU.$==6?(bV=bU.$0.Holes,(function(b0){return function(b1){o.iter(b0,b1);};}(bS))(bV)):null;break;case 1:bP.push(bU);bU=bU.Children;bT=0;break;}}function bR(bT){return bQ(0,bT);}function bS(bT){return bQ(1,bT);}bP=[];bR(bO);return{$:0,$0:new Y.New$2(bP)};};bg.Filter=function(bO,bP){return{$:0,$0:bz.Filter(bO,bP.$0)};};bg.Except=function(bO,bP){return{$:0,$0:bz.Except(bO.$0,bP.$0)};};bg.ToArray=function(bO){return bz.ToArray(bO.$0);};bg.Intersect=function(bO,bP){return{$:0,$0:bz.Intersect(bO.$0,bP.$0)};};bh.Delay=function(bO){return function(bP){try{(bO(null))(bP);}catch(bQ){bP.k({$:1,$0:bQ});}};};bh.Bind=function(bO,bP){return bh.checkCancel(function(bQ){bO(bw.New(function(bR){var bS;if(bR.$==0){bS=bR.$0;bh.scheduler().Fork(function(){try{(bP(bS))(bQ);}catch(bT){bQ.k({$:1,$0:bT});}});}else bh.scheduler().Fork(function(){bQ.k(bR);});},bQ.ct));});};bh.Zero=function(){bx.$cctor();return bx.Zero;};bh.Start=function(bO,bP){var bQ,bR;bQ=(bR=(bh.defCTS())[0],bP==null?bR:bP.$0);bh.scheduler().Fork(function(){if(!bQ.c)bO(bw.New(function(bS){if(bS.$==1)bh.UncaughtAsyncError(bS.$0);},bQ));});};bh.Return=function(bO){return function(bP){bP.k({$:0,$0:bO});};};bh.scheduler=function(){bx.$cctor();return bx.scheduler;};bh.checkCancel=function(bO){return function(bP){if(bP.ct.c)bh.cancel(bP);else bO(bP);};};bh.defCTS=function(){bx.$cctor();return bx.defCTS;};bh.UncaughtAsyncError=function(bO){bM.log("WebSharper: Uncaught asynchronous exception",bO);};bh.FromContinuations=function(bO){return function(bP){var bQ;function bR(bS){if(bQ[0])l.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bQ[0]=true;bh.scheduler().Fork(bS);}}bQ=[false];bO(function(bS){bR(function(){bP.k({$:0,$0:bS});});},function(bS){bR(function(){bP.k({$:1,$0:bS});});},function(bS){bR(function(){bP.k({$:2,$0:bS});});});};};bh.cancel=function(bO){bO.k({$:2,$0:new bE.New(bO.ct)});};bi.UseAnimations=function(){bn.$cctor();return bn.UseAnimations;};bi.Actions=function(bO){return bi.ConcatActions(o.choose(function(bP){return bP.$==1?{$:1,$0:bP.$0}:null;},bo.ToArray(bO.$0)));};bi.Finalize=function(bO){o.iter(function(bP){if(bP.$==0)bP.$0();},bo.ToArray(bO.$0));};bi.ConcatActions=function(bO){var bP,bQ,bR,bS;bP=_1.ofSeqNonCopying(bO);bQ=o.length(bP);return bQ===0?bi.Const():bQ===1?o.get(bP,0):(bR=A.max(A.map(function(bT){return bT.Duration;},bP)),(bS=o.map(function(bT){return bi.Prolong(bR,bT);},bP),bi.Def(bR,function(bT){o.iter(function(bU){bU.Compute(bT);},bS);})));};bi.List=function(bO){return bO.$0;};bi.Const=function(bO){return bi.Def(0,function(){return bO;});};bi.Def=function(bO,bP){return{Compute:bP,Duration:bO};};bi.Prolong=function(bO,bP){var bQ,bR,bS;bQ=bP.Compute;bR=bP.Duration;bS=bF.Create(function(){return bP.Compute(bP.Duration);});return{Compute:function(bT){return bT>=bR?bS.f():bQ(bT);},Duration:bO};};bj.$cctor=function(){bj.$cctor=a.ignore;bj.BatchUpdatesEnabled=true;};bk.Clear=function(bO){bO.splice(0,o.length(bO));};bl.$cctor=function(){var bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX;bl.$cctor=a.ignore;bl.EmptyAttr=null;bl.BoolCheckedApply=function(bY){function bZ(b0,b1){return b1!=null&&b1.$==1?void(b0.checked=b1.$0):null;}return[function(b0){b0.addEventListener("change",function(){return!m.Equals(bY.Get(),b0.checked)?bY.Set(b0.checked):null;});},function(b0){return function(b1){return bZ(b0,b1);};},s.Map(function(b0){return{$:1,$0:b0};},bY.get_View())];};bl.StringSet=function(bY){return function(bZ){bY.value=bZ;};};bl.StringGet=function(bY){return{$:1,$0:bY.value};};bl.StringApply=(bO=br.StringGet(),(bP=br.StringSet(),function(bY){return br.ApplyValue(bO,bP,bY);}));bl.IntSetUnchecked=function(bY){return function(bZ){bY.value=a.String(bZ);};};bl.IntGetUnchecked=function(bY){var bZ,b0;bZ=bY.value;return bs.isBlank(bZ)?{$:1,$0:0}:(b0=+bZ,b0!==b0>>0?null:{$:1,$0:b0});};bl.IntApplyUnchecked=(bQ=br.IntGetUnchecked(),(bR=br.IntSetUnchecked(),function(bY){return br.ApplyValue(bQ,bR,bY);}));bl.IntSetChecked=function(bY){return function(bZ){var b0;b0=bZ.get_Input();return bY.value!==b0?void(bY.value=b0):null;};};bl.IntGetChecked=function(bY){var bZ,b0,b1;bZ=bY.value;return{$:1,$0:bs.isBlank(bZ)?(bY.checkValidity?bY.checkValidity():true)?new bt({$:2,$0:bZ}):new bt({$:1,$0:bZ}):(b0=(b1=0,[R.TryParseInt32(bZ,{get:function(){return b1;},set:function(b2){b1=b2;}}),b1]),b0[0]?new bt({$:0,$0:b0[1],$1:bZ}):new bt({$:1,$0:bZ}))};};bl.IntApplyChecked=(bS=br.IntGetChecked(),(bT=br.IntSetChecked(),function(bY){return br.ApplyValue(bS,bT,bY);}));bl.FloatSetUnchecked=function(bY){return function(bZ){bY.value=a.String(bZ);};};bl.FloatGetUnchecked=function(bY){var bZ,b0;bZ=bY.value;return bs.isBlank(bZ)?{$:1,$0:0}:(b0=+bZ,a.isNaN(b0)?null:{$:1,$0:b0});};bl.FloatApplyUnchecked=(bU=br.FloatGetUnchecked(),(bV=br.FloatSetUnchecked(),function(bY){return br.ApplyValue(bU,bV,bY);}));bl.FloatSetChecked=function(bY){return function(bZ){var b0;b0=bZ.get_Input();return bY.value!==b0?void(bY.value=b0):null;};};bl.FloatGetChecked=function(bY){var bZ,b0;bZ=bY.value;return{$:1,$0:bs.isBlank(bZ)?(bY.checkValidity?bY.checkValidity():true)?new bt({$:2,$0:bZ}):new bt({$:1,$0:bZ}):(b0=+bZ,a.isNaN(b0)?new bt({$:1,$0:bZ}):new bt({$:0,$0:b0,$1:bZ}))};};bl.FloatApplyChecked=(bW=br.FloatGetChecked(),(bX=br.FloatSetChecked(),function(bY){return br.ApplyValue(bW,bX,bY);}));};bm.$cctor=function(){var bO;bm.$cctor=a.ignore;bm.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bm.rtagName=new a.RegExp("<([\\w:]+)");bm.rhtml=new a.RegExp("<|&#?\\w+;");bm.wrapMap=(bO=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:bO,tbody:bO,tfoot:bO,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bm.defaultWrap=[0,"",""];};bn.$cctor=function(){bn.$cctor=a.ignore;bn.CubicInOut=bv.Custom(function(bO){var bP;bP=bO*bO;return 3*bP-2*(bP*bO);});bn.UseAnimations=true;};bo.Append=function(bO,bP){return bO.$==0?bP:bP.$==0?bO:{$:2,$0:bO,$1:bP};};bo.ToArray=function(bO){var bP;function bQ(bR){var bS,bT;while(true)if(bR.$==1)return bP.push(bR.$0);else if(bR.$==2){bS=bR.$1;bT=bR.$0;bQ(bT);bR=bS;}else return bR.$==3?o.iter(function(bU){bP.push(bU);},bR.$0):null;}bP=[];bQ(bO);return bP.slice(0);};bo.Concat=function(bO){var bP;bP=_1.ofSeqNonCopying(bO);return _1.TreeReduce(bo.Empty(),bo.Append,bP);};bo.Empty=function(){bG.$cctor();return bG.Empty;};bp.concat=function(bO){var bP,bQ;bP=[];for(var bR in bO)bP.push.apply(bP,bO[bR]);return bP;};bq.$cctor=function(){bq.$cctor=a.ignore;bq.counter=0;};br.ApplyValue=function(bO,bP,bQ){var bR;function bS(bT,bU){return bU==null?null:bT(bU.$0);}bR=null;return[function(bT){function bU(){bQ.UpdateMaybe(function(bV){var bW;bR=bO(bT);return bR!=null&&bR.$==1&&(!m.Equals(bR.$0,bV)&&(bW=[bR,bR.$0],true))?bW[0]:null;});}bT.addEventListener("change",bU);bT.addEventListener("input",bU);bT.addEventListener("keypress",bU);},function(bT){var bU;bU=bP(bT);return function(bV){return bS(bU,bV);};},s.Map(function(bT){var bU;return bR!=null&&bR.$==1&&(m.Equals(bR.$0,bT)&&(bU=bR.$0,true))?null:{$:1,$0:bT};},bQ.get_View())];};br.StringSet=function(){bl.$cctor();return bl.StringSet;};br.StringGet=function(){bl.$cctor();return bl.StringGet;};br.IntSetUnchecked=function(){bl.$cctor();return bl.IntSetUnchecked;};br.IntGetUnchecked=function(){bl.$cctor();return bl.IntGetUnchecked;};br.IntSetChecked=function(){bl.$cctor();return bl.IntSetChecked;};br.IntGetChecked=function(){bl.$cctor();return bl.IntGetChecked;};br.FloatSetUnchecked=function(){bl.$cctor();return bl.FloatSetUnchecked;};br.FloatGetUnchecked=function(){bl.$cctor();return bl.FloatGetUnchecked;};br.FloatSetChecked=function(){bl.$cctor();return bl.FloatSetChecked;};br.FloatGetChecked=function(){bl.$cctor();return bl.FloatGetChecked;};bs.isBlank=function(bO){return w.forall(bA.IsWhiteSpace,bO);};bt=r.CheckedInput=bL.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,bt);bu=bh.Scheduler=bL.Class({Fork:function(bO){var bP;bP=this;this.robin.push(bO);if(this.idle){this.idle=false;a.setTimeout(function(){bP.tick();},0);}},tick:function(){var bO,bP,bQ;bP=this;bQ=bN.now();bO=true;while(bO)if(this.robin.length===0){this.idle=true;bO=false;}else{(this.robin.shift())();bN.now()-bQ>40?(a.setTimeout(function(){bP.tick();},0),bO=false):void 0;}}},t,bu);bu.New=bL.Ctor(function(){t.New.call(this);this.idle=true;this.robin=[];},bu);bv=r.Easing=bL.Class({},t,bv);bv.Custom=function(bO){return new bv.New(bO);};bv.New=bL.Ctor(function(bO){t.New.call(this);this.transformTime=bO;},bv);bw.New=function(bO,bP){return{k:bO,ct:bP};};bx.$cctor=function(){bx.$cctor=a.ignore;bx.noneCT=by.New(false,[]);bx.scheduler=new bu.New();bx.defCTS=[new bB.New()];bx.Zero=bh.Return();bx.GetCT=function(bO){bO.k({$:0,$0:bO.ct});};};by.New=function(bO,bP){return{c:bO,r:bP};};bz.Filter=function(bO,bP){return new Y.New$2(o.filter(bO,bz.ToArray(bP)));};bz.Except=function(bO,bP){var bQ;bQ=new Y.New$2(bz.ToArray(bP));bQ.ExceptWith(bz.ToArray(bO));return bQ;};bz.ToArray=function(bO){var bP;bP=o.create(bO.get_Count(),void 0);bO.CopyTo(bP);return bP;};bz.Intersect=function(bO,bP){var bQ;bQ=new Y.New$2(bz.ToArray(bO));bQ.IntersectWith(bz.ToArray(bP));return bQ;};bA.IsWhiteSpace=function(bO){return bO.match(new a.RegExp("\\s"))!==null;};R.TryParse=function(bO,bP,bQ,bR){var bS,bT;bS=+bO;bT=bS===bS-bS%1&&bS>=bP&&bS<=bQ;if(bT)bR.set(bS);return bT;};bB=i.CancellationTokenSource=bL.Class({},t,bB);bB.New=bL.Ctor(function(){t.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bB);bC.Children=function(bO,bP){var bQ,bR,bS;if(bP!=null&&bP.$==1){bS=[];bQ=bP.$0[0].nextSibling;while(bQ!==bP.$0[1]){bS.push(bQ);bQ=bQ.nextSibling;}return{$:0,$0:bS};}else return{$:0,$0:o.init(bO.childNodes.length,(bR=bO.childNodes,function(bT){return bR[bT];}))};};bC.Except=function(bO,bP){var bQ;bQ=bO.$0;return{$:0,$0:o.filter(function(bR){return o.forall(function(bS){return!(bR===bS);},bQ);},bP.$0)};};bC.Iter=function(bO,bP){o.iter(bO,bP.$0);};bC.DocChildren=function(bO){var bP;function bQ(bR){var bS,bT,bU,bV;while(true){if(bR!=null&&bR.$==2){bT=bR.$0;bR=bT.Current;}else if(bR!=null&&bR.$==1)return bP.push(bR.$0.El);else if(bR==null)return null;else if(bR!=null&&bR.$==5)return bP.push(bR.$0);else if(bR!=null&&bR.$==4)return bP.push(bR.$0.Text);else if(bR!=null&&bR.$==6){bS=bR.$0.Els;return(function(bW){return function(bX){o.iter(bW,bX);};}(function(bW){if(bW==null||bW.constructor===K)bQ(bW);else bP.push(bW);}))(bS);}else{bU=bR.$1;bV=bR.$0;bQ(bV);bR=bU;}}}bP=[];bQ(bO.Children);return{$:0,$0:_1.ofSeqNonCopying(bP)};};bE=i.OperationCanceledException=bL.Class({},bD,bE);bE.New=bL.Ctor(function(bO){bE.New$1.call(this,"The operation was canceled.",null,bO);},bE);bE.New$1=bL.Ctor(function(bO,bP,bQ){this.message=bO;this.inner=bP;K.setPrototypeOf(this,bE.prototype);this.ct=bQ;},bE);bF.Create=function(bO){return bI.New(false,bO,bF.forceLazy);};bF.forceLazy=function(){var bO;bO=this.v();this.c=true;this.v=bO;this.f=bF.cachedLazy;return bO;};bF.cachedLazy=function(){return this.v;};bG.$cctor=function(){bG.$cctor=a.ignore;bG.Empty={$:0};};bI.New=function(bO,bP,bQ){return{c:bO,v:bP,f:bQ};};bL.OnLoad(function(){b.Main();});}(self));


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
