(function(n){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});n.IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i of Object.getOwnPropertyNames(n))t[i]=n[i];return Object.setPrototypeOf(t,Object.getPrototypeOf(n)),t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},PrintObject:function(n){var t="{ ",i=!0;for(var r of Object.getOwnPropertyNames(n))i?i=!1:t+=", ",t+=r+" = "+n[r];return t+(i?"}":" }")},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};n.IntelliFactory.Runtime.OnLoad(function(){n.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});n.ignore=function(){};n.id=function(n){return n};n.fst=function(n){return n[0]};n.snd=function(n){return n[1]};n.trd=function(n){return n[2]};n.console||(n.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(self);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN;b=a.Client=a.Client||{};c=b.Highlight=b.Highlight||{};d=b.Newsletter=b.Newsletter||{};e=b.Contact=b.Contact||{};f=b.Jobs=b.Jobs||{};g=a.EventTarget;h=a.Node;i=a.WebSharper=a.WebSharper||{};j=i.JavaScript=i.JavaScript||{};k=j.JS=j.JS||{};l=i.Operators=i.Operators||{};m=i.Unchecked=i.Unchecked||{};n=j.Pervasives=j.Pervasives||{};o=i.Arrays=i.Arrays||{};p=a.Element;q=a.HTMLElement;r=i.UI=i.UI||{};s=r.View=r.View||{};t=i.Obj=i.Obj||{};u=r.HtmlModule=r.HtmlModule||{};v=u.attr=u.attr||{};w=r.ListModel=r.ListModel||{};x=a.WindowOrWorkerGlobalScope;y=i.Strings=i.Strings||{};z=a.StartupCode$Dynamic$Client=a.StartupCode$Dynamic$Client||{};A=r.AttrProxy=r.AttrProxy||{};B=r.Doc=r.Doc||{};C=r.Var=r.Var||{};D=r.Client=r.Client||{};E=D.Templates=D.Templates||{};F=r.Snap=r.Snap||{};G=a.Blob;H=i.Seq=i.Seq||{};I=i.Utils=i.Utils||{};J=i.List=i.List||{};K=J.T=J.T||{};L=r.Attrs=r.Attrs||{};M=r.DomUtility=r.DomUtility||{};N=i.Collections=i.Collections||{};O=N.Dictionary=N.Dictionary||{};P=r.Docs=r.Docs||{};Q=i.Enumerator=i.Enumerator||{};R=a.Object;S=r.Storage=r.Storage||{};T=Q.T=Q.T||{};U=i.Numeric=i.Numeric||{};V=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};W=N.HashSet=N.HashSet||{};X=S.ArrayStorage=S.ArrayStorage||{};Y=r.Elt=r.Elt||{};Z=r.Array=r.Array||{};_0=r.DocElemNode=r.DocElemNode||{};_1=a.CharacterData;_2=N.DictionaryUtil=N.DictionaryUtil||{};_3=E.Prepare=E.Prepare||{};_4=i.Slice=i.Slice||{};_5=N.KeyCollection=N.KeyCollection||{};_6=r.An=r.An||{};_7=D.Settings=D.Settings||{};_8=r.Abbrev=r.Abbrev||{};_9=_8.Mailbox=_8.Mailbox||{};_=r.Var$1=r.Var$1||{};$=r.Updates=r.Updates||{};ba=D.Attrs=D.Attrs||{};bb=ba.Dyn=ba.Dyn||{};bc=D.Docs=D.Docs||{};bd=bc.RunState=bc.RunState||{};be=bc.NodeSet=bc.NodeSet||{};bf=i.Concurrency=i.Concurrency||{};bg=r.Anims=r.Anims||{};bh=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bi=i.Queue=i.Queue||{};bj=r.ConcreteVar=r.ConcreteVar||{};bk=_8.Fresh=_8.Fresh||{};bl=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bm=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bn=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bo=r.AppendList=r.AppendList||{};bp=N.HashSetUtil=N.HashSetUtil||{};bq=r.BindVar=r.BindVar||{};br=r.String=r.String||{};bs=r.CheckedInput=r.CheckedInput||{};bt=bf.Scheduler=bf.Scheduler||{};bu=r.Easing=r.Easing||{};bv=bf.AsyncBody=bf.AsyncBody||{};bw=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bx=bf.CT=bf.CT||{};by=_8.HashSet=_8.HashSet||{};bz=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bA=i.Char=i.Char||{};bB=i.CancellationTokenSource=i.CancellationTokenSource||{};bC=bc.DomNodes=bc.DomNodes||{};bD=a.Error;bE=i.OperationCanceledException=i.OperationCanceledException||{};bF=i.Lazy=i.Lazy||{};bG=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bH=i.LazyExtensionsProxy=i.LazyExtensionsProxy||{};bI=bH.LazyRecord=bH.LazyRecord||{};bJ=a.hljs;bK=a.IntelliFactory;bL=bK&&bK.Runtime;bM=a.console;bN=a.Date;b.Main=function(){c.Run();d.SignUpAction();e.SendMessageAction();f.SendJobAction();};c.Run=function(){function bO(bP,bQ,bR,bS){bJ.highlightBlock(bP);}self.document.querySelectorAll("code[class^=language-]").forEach(bL.CreateFuncWithArgs(function(bP){return bO(bP[0],bP[1],bP[2],bP[3]);}),void 0);};d.SignUpAction=function(){var bO,bP;bO=self.document.getElementById("signup");bP=self.document.getElementById("newsletter-form");if(!m.Equals(bP,null)&&!m.Equals(bP,void 0))bP.addEventListener("submit",function(bQ){return bQ.preventDefault();});if(!m.Equals(bO,null)&&!m.Equals(bO,void 0))bO.addEventListener("click",function(bQ){var bR,bS,bT,bU;bQ.preventDefault();bR=self.document.getElementById("newsletter-input").value;return y.Trim(bR)!==""?(bS=self.document.getElementById("newsletter-alert-list"),(bS.replaceChildren.apply(bS,[]),bO.setAttribute("disabled","disabled"),bO.classList.add("btn-disabled"),bT=new a.FormData(),bT.append("email",bR),bT.append("type","Blogs"),void(self.fetch("https://api.intellifactory.com/api/newsletter",(bU={},bU.method="POST",bU.body=bT,bU)).then(function(){var bV;bV=self.document.createElement("div");bV.className="success-alert";bV.textContent="You have successfully signed up!";bO.removeAttribute("disabled");bO.classList.remove("btn-disabled");return bS.appendChild(bV);}))["catch"](function(){var bV;bV=self.document.createElement("div");bV.className="error-alert";bV.textContent="Sorry, we could not sign you for the newsletter!";bO.removeAttribute("disabled");bO.classList.remove("btn-disabled");return bS.appendChild(bV);}))):null;});};e.SendMessageAction=function(){var bO,bP;bO=self.document.getElementById("contact-button");bP=self.document.getElementById("contact-form");if(!m.Equals(bP,null)&&!m.Equals(bP,void 0))bP.addEventListener("submit",function(bQ){return bQ.preventDefault();});if(!m.Equals(bO,null)&&!m.Equals(bO,void 0))bO.addEventListener("click",function(bQ){var bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf;bQ.preventDefault();bR=self.document.querySelector("#contact-form *[name=\"email\"]");bS=self.document.querySelector("#contact-form *[name=\"name\"]");bT=self.document.querySelector("#contact-form *[name=\"message\"]");bU=self.document.querySelector("#contact-form *[name=\"accept_terms\"]");bR.classList.remove("input-failed-validation");bV=(bW=bR.nextElementSibling,bW!==void 0?{$:1,$0:bW}:null);if(bV==null);else bV.$0.classList.add("hidden");bS.classList.remove("input-failed-validation");bX=(bY=bS.nextElementSibling,bY!==void 0?{$:1,$0:bY}:null);if(bX==null);else bX.$0.classList.add("hidden");bT.classList.remove("input-failed-validation");bZ=(b0=bT.nextElementSibling,b0!==void 0?{$:1,$0:b0}:null);if(bZ==null);else bZ.$0.classList.add("hidden");b1=(b2=bU.nextElementSibling,b2!==void 0?{$:1,$0:b2}:null);if(b1==null);else b1.$0.classList.remove("text-red");b3=bR.value;b4=bS.value;b5=bT.value;b6=bU.checked;if(bR.validity.typeMismatch||y.Trim(b3)===""){bR.classList.add("input-failed-validation");b7=(b8=bR.nextElementSibling,b8!==void 0?{$:1,$0:b8}:null);b7==null?void 0:b7.$0.classList.remove("hidden");}if(y.Trim(b4)===""){bS.classList.add("input-failed-validation");b9=(b_=bS.nextElementSibling,b_!==void 0?{$:1,$0:b_}:null);b9==null?void 0:b9.$0.classList.remove("hidden");}if(y.Trim(b5)===""){bT.classList.add("input-failed-validation");b$=(ca=bT.nextElementSibling,ca!==void 0?{$:1,$0:ca}:null);b$==null?void 0:b$.$0.classList.remove("hidden");}if(!b6){cb=(cc=bU.nextElementSibling,cc!==void 0?{$:1,$0:cc}:null);cb==null?void 0:cb.$0.classList.add("text-red");}return!bR.validity.typeMismatch&&y.Trim(b4)!==""&&y.Trim(b5)!==""&&b6?(cd=self.document.getElementById("contact-alert-list"),(cd.replaceChildren.apply(cd,[]),bO.setAttribute("disabled","disabled"),bO.classList.add("btn-disabled"),ce=new a.FormData(),ce.append("email",b3),ce.append("name",b4),ce.append("message",b5),void(self.fetch("https://api.intellifactory.com/api/contact",(cf={},cf.method="POST",cf.body=ce,cf)).then(function(){var cg;cg=self.document.querySelector("#contact-form .modal");self.document.querySelector("#contact-form .modal .modal-button").addEventListener("click",function(){var ch;ch=self.document.querySelector("#contact-form .modal");bR.value="";bS.value="";bT.value="";bU.checked=false;ch.classList.add("hidden");bO.removeAttribute("disabled");return bO.classList.remove("btn-disabled");});return cg.classList.remove("hidden");}))["catch"](function(){var cg;cg=self.document.createElement("div");cg.className="error-alert";cg.textContent="Sorry, we could not send your message!";bO.removeAttribute("disabled");bO.classList.remove("btn-disabled");return cd.appendChild(cg);}))):null;});};f.SendJobAction=function(){var bO,bP,bQ,bR;bO=self.document.getElementById("JobSendFiles");if(!m.Equals(bO,null)&&!m.Equals(bO,void 0)){bP=B.EmbedView(s.Map(function(){var bS;function bT(bU,bV){return B.Element("div",[],[B.Element("span",[A.Create("class","fileName")],[B.TextNode(bU)]),B.Element("span",[A.HandlerImpl("click",function(){return function(){return f.files().RemoveByKey(bU);};})],[B.TextNode("x")])]);}bS=f.files();return B.ConvertSeqBy(bS.key,function(bU){return function(bV){return bT(bU,bV);};},bS["var"].get_View());},f.files().v));E.LoadLocalTemplates("");B.RunById("JobFiles",bP);bO.addEventListener("submit",function(bS){return bS.preventDefault();});bQ=self.document.querySelector("#JobSendFiles #hidden-input");self.document.querySelector("#JobSendFiles #button").addEventListener("click",function(){return bQ.click();});bQ.addEventListener("change",function(bS){return s.Get(function(bT){f.fileHandle(bT,bS.target.files);},f.currentSize());});bR=self.document.getElementById("JobUploadArea");bR.addEventListener("dragleave",function(bS){bS.preventDefault();bR.classList.remove("draggedOver");});bR.addEventListener("dragenter",function(bS){bS.preventDefault();bR.classList.add("draggedOver");});bR.addEventListener("dragover",function(bS){bS.preventDefault();bS.dataTransfer.dropEffect="copy";bM.log(bS.dataTransfer.files.length);});bR.addEventListener("drop",function(bS){bS.preventDefault();s.Get(function(bT){f.fileHandle(bT,bS.dataTransfer.files);},f.currentSize());bR.classList.remove("draggedOver");});}if(!m.Equals(f.button(),null)&&!m.Equals(f.button(),void 0))f.button().addEventListener("click",function(bS){var bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9;bS.preventDefault();bT=self.document.querySelector("#JobSendFiles *[name=\"email\"]");bU=self.document.querySelector("#JobSendFiles *[name=\"name\"]");bV=self.document.querySelector("#JobSendFiles *[name=\"github\"]");bW=self.document.querySelector("#fileUploadError");bT.classList.remove("input-failed-validation");bX=(bY=bT.nextElementSibling,bY!==void 0?{$:1,$0:bY}:null);if(bX==null);else bX.$0.classList.add("hidden");bU.classList.remove("input-failed-validation");bZ=(b0=bU.nextElementSibling,b0!==void 0?{$:1,$0:b0}:null);if(bZ==null);else bZ.$0.classList.add("hidden");bW.classList.remove("hidden");b1=bT.value;b2=bU.value;b3=bV.value;if(bT.validity.typeMismatch||y.Trim(b1)===""){bT.classList.add("input-failed-validation");b4=(b5=bT.nextElementSibling,b5!==void 0?{$:1,$0:b5}:null);b4==null?void 0:b4.$0.classList.remove("hidden");}if(y.Trim(b2)===""){bU.classList.add("input-failed-validation");b6=(b7=bU.nextElementSibling,b7!==void 0?{$:1,$0:b7}:null);b6==null?void 0:b6.$0.classList.remove("hidden");}if(f.files().get_Length()===0)bW.classList.remove("hidden");return!bT.validity.typeMismatch&&y.Trim(b2)!==""?(f.button().setAttribute("disabled","disabled"),f.button().classList.add("btn-disabled"),b8=new a.FormData(),b8.append("email",b1),b8.append("name",b2),y.Trim(b3)!==""?b8.append("github",b3):void 0,f.files().Iter(function(b_){b8.append("files",b_[1],b_[0]);}),void(self.fetch("https://api.intellifactory.com/api/jobs",(b9={},b9.method="POST",b9.body=b8,b9)).then(function(){var b_;b_=self.document.querySelector("#JobSendFiles .modal");self.document.querySelector("#JobSendFiles .modal .modal-button").addEventListener("click",function(){var b$;b$=self.document.querySelector("#JobSendFiles .modal");bT.value="";bU.value="";bV.value="";f.files().Clear();b$.classList.add("hidden");f.button().removeAttribute("disabled");return f.button().classList.remove("btn-disabled");});return b_.classList.remove("hidden");}))["catch"](function(){var b_,b$;b_=self.document.querySelector("#JobSendFiles .modal");b$=self.document.querySelector("#JobSendFiles .modal .modal-button");self.document.querySelector("#JobSendFiles .modal .modal-content").textContent="Sorry, we could not send your job application!";b$.addEventListener("click",function(){var ca;ca=self.document.querySelector("#JobSendFiles .modal");bT.value="";bU.value="";bV.value="";f.files().Clear();ca.classList.add("hidden");f.button().removeAttribute("disabled");return f.button().classList.remove("btn-disabled");});return b_.classList.remove("hidden");})):null;});};f.files=function(){z.$cctor();return z.files;};f.currentSize=function(){z.$cctor();return z.currentSize;};f.fileHandle=function(bO,bP){var bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4;bQ=null;bR=false;bS=0;bZ=J.ofSeq(l.range(0,bP.length-1));b0=Q.Get(bZ);try{while(b0.MoveNext()){b1=bP.item(b0.Current());if(m.Equals(bQ,null)&&b1.size>f.singleMax())bQ={$:1,$0:b1.name};bS=bS+b1.size;}}finally{if(typeof b0=="object"&&"Dispose"in b0)b0.Dispose();}if(m.Equals(bQ,null)&&bO+bS>f.totalMax())bR=true;if(bQ!=null&&bQ.$==1){bT=bQ.$0;bU=self.document.querySelector("#JobSendFiles .modal");bV=self.document.querySelector("#JobSendFiles .modal .modal-button");bW=self.document.querySelector("#JobSendFiles .modal .modal-content");bV.addEventListener("click",function(){var b5;b5=self.document.querySelector("#JobSendFiles .modal");bW.textContent=(function(b6){return function(b7){return b6(I.toSafe(b7)+" is larger then 5MB");};}(a.id))(bT);b5.classList.add("hidden");f.button().removeAttribute("disabled");return f.button().classList.remove("btn-disabled");});bU.classList.remove("hidden");}else if(bR){bX=self.document.querySelector("#JobSendFiles .modal");bY=self.document.querySelector("#JobSendFiles .modal .modal-button");self.document.querySelector("#JobSendFiles .modal .modal-content").textContent="The total file size have exceeded 10MB!";bY.addEventListener("click",function(){self.document.querySelector("#JobSendFiles .modal").classList.add("hidden");f.button().removeAttribute("disabled");return f.button().classList.remove("btn-disabled");});bX.classList.remove("hidden");}else{b2=J.ofSeq(l.range(0,bP.length-1));b3=Q.Get(b2);try{while(b3.MoveNext()){b4=bP.item(b3.Current());f.files().Append([b4.name,b4]);}}finally{if(typeof b3=="object"&&"Dispose"in b3)b3.Dispose();}}};f.button=function(){z.$cctor();return z.button;};f.singleMax=function(){z.$cctor();return z.singleMax;};f.totalMax=function(){z.$cctor();return z.totalMax;};k.GetFieldValues=function(bO){var bP,bQ;bP=[];for(var bR in bO)bP.push(bO[bR]);return bP;};l.range=function(bO,bP){var bQ;bQ=1+bP-bO;return bQ<=0?[]:H.init(bQ,function(bR){return bR+bO;});};l.FailWith=function(bO){throw new bD(bO);};l.KeyValue=function(bO){return[bO.K,bO.V];};m.Equals=function(bO,bP){var bQ,bR,bS,bT;if(bO===bP)return true;else{bQ=typeof bO;if(bQ=="object"){if(bO===null||bO===void 0||bP===null||bP===void 0||!m.Equals(typeof bP,"object"))return false;else if("Equals"in bO)return bO.Equals(bP);else if("Equals"in bP)return false;else if(bO instanceof a.Array&&bP instanceof a.Array)return m.arrayEquals(bO,bP);else if(bO instanceof a.Date&&bP instanceof a.Date)return m.dateEquals(bO,bP);else{bR=[true];for(var bU in bO)if(function(bV){bR[0]=!bO.hasOwnProperty(bV)||bP.hasOwnProperty(bV)&&m.Equals(bO[bV],bP[bV]);return!bR[0];}(bU))break;if(bR[0]){for(var bV in bP)if(function(bW){bR[0]=!bP.hasOwnProperty(bW)||bO.hasOwnProperty(bW);return!bR[0];}(bV))break;}return bR[0];}}else return bQ=="function"&&("$Func"in bO?bO.$Func===bP.$Func&&bO.$Target===bP.$Target:"$Invokes"in bO&&"$Invokes"in bP&&m.arrayEquals(bO.$Invokes,bP.$Invokes));}};m.arrayEquals=function(bO,bP){var bQ,bR;if(o.length(bO)===o.length(bP)){bQ=true;bR=0;while(bQ&&bR<o.length(bO)){!m.Equals(o.get(bO,bR),o.get(bP,bR))?bQ=false:void 0;bR=bR+1;}return bQ;}else return false;};m.dateEquals=function(bO,bP){return bO.getTime()===bP.getTime();};m.Hash=function(bO){var bP;bP=typeof bO;return bP=="function"?0:bP=="boolean"?bO?1:0:bP=="number"?bO:bP=="string"?m.hashString(bO):bP=="object"?bO==null?0:bO instanceof a.Array?m.hashArray(bO):m.hashObject(bO):0;};m.hashString=function(bO){var bP,bQ,bR;if(bO===null)return 0;else{bP=5381;for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)bP=m.hashMix(bP,bO[bQ].charCodeAt());return bP;}};m.hashArray=function(bO){var bP,bQ,bR;bP=-34948909;for(bQ=0,bR=o.length(bO)-1;bQ<=bR;bQ++)bP=m.hashMix(bP,m.Hash(o.get(bO,bQ)));return bP;};m.hashObject=function(bO){var bP,bQ;if("GetHashCode"in bO)return bO.GetHashCode();else{bP=[0];for(var bR in bO)if(function(bS){bP[0]=m.hashMix(m.hashMix(bP[0],m.hashString(bS)),m.Hash(bO[bS]));return false;}(bR))break;return bP[0];}};m.hashMix=function(bO,bP){return(bO<<5)+bO+bP;};m.Compare=function(bO,bP){var bQ,bR,bS,bT,bU,bV;if(bO===bP)return 0;else{bR=typeof bO;switch(bR=="function"?1:bR=="boolean"?2:bR=="number"?2:bR=="string"?2:bR=="object"?3:0){case 0:return typeof bP=="undefined"?0:-1;case 1:return l.FailWith("Cannot compare function values.");case 2:return bO<bP?-1:1;case 3:if(bO===null)bS=-1;else if(bP===null)bS=1;else if("CompareTo"in bO)bS=bO.CompareTo(bP);else if("CompareTo0"in bO)bS=bO.CompareTo0(bP);else if(bO instanceof a.Array&&bP instanceof a.Array)bS=m.compareArrays(bO,bP);else if(bO instanceof a.Date&&bP instanceof a.Date)bS=m.compareDates(bO,bP);else{bT=[0];for(var bW in bO)if(function(bX){return!bO.hasOwnProperty(bX)?false:!bP.hasOwnProperty(bX)?(bT[0]=1,true):(bT[0]=m.Compare(bO[bX],bP[bX]),bT[0]!==0);}(bW))break;if(bT[0]===0){for(var bX in bP)if(function(bY){return!bP.hasOwnProperty(bY)?false:!bO.hasOwnProperty(bY)&&(bT[0]=-1,true);}(bX))break;}bS=bT[0];}return bS;}}};m.compareArrays=function(bO,bP){var bQ,bR;if(o.length(bO)<o.length(bP))return -1;else if(o.length(bO)>o.length(bP))return 1;else{bQ=0;bR=0;while(bQ===0&&bR<o.length(bO)){bQ=m.Compare(o.get(bO,bR),o.get(bP,bR));bR=bR+1;}return bQ;}};m.compareDates=function(bO,bP){return m.Compare(bO.getTime(),bP.getTime());};n.NewFromSeq=function(bO){var bP,bQ,bR;bP={};bQ=Q.Get(bO);try{while(bQ.MoveNext()){bR=bQ.Current();bP[bR[0]]=bR[1];}}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}return bP;};o.get=function(bO,bP){o.checkBounds(bO,bP);return bO[bP];};o.length=function(bO){return bO.dims===2?bO.length*bO.length:bO.length;};o.checkBounds=function(bO,bP){if(bP<0||bP>=bO.length)l.FailWith("Index was outside the bounds of the array.");};o.set=function(bO,bP,bQ){o.checkBounds(bO,bP);bO[bP]=bQ;};s=r.View=bL.Class({},null,s);t=i.Obj=bL.Class({Equals:function(bO){return this===bO;},GetHashCode:function(){return -1;}},null,t);t.New=bL.Ctor(function(){},t);v=u.attr=bL.Class({},t,v);w=r.ListModel=bL.Class({RemoveByKey:function(bO){var bP;bP=this;this["var"].Set(this.storage.SRemoveIf(function(bQ){return m.Equals(bP.key(bQ),bO);},this["var"].Get()));this.ObsoleteKey(bO);},get_Length:function(){return o.length(this["var"].Get());},Iter:function(bO){o.iter(bO,this["var"].Get());},Clear:function(){this["var"].Set(this.storage.SSet([]));this.ObsoleteAll();},ObsoleteKey:function(bO){var bP,bQ;bP=(bQ=null,[this.it.TryGetValue(bO,{get:function(){return bQ;},set:function(bR){bQ=bR;}}),bQ]);if(bP[0]){F.Obsolete(bP[1]);this.it.Remove(bO);}},ObsoleteAll:function(){H.iter(function(bO){F.Obsolete(bO.V);},this.it);this.it.Clear();},Append:function(bO){var bP,bQ,bR,bS;bP=this;bQ=this["var"].Get();bR=this.key(bO);bS=o.tryFindIndex(function(bT){return m.Equals(bP.key(bT),bR);},bQ);if(bS!=null&&bS.$==1)this["var"].Set(this.storage.SSetAt(bS.$0,bO,bQ));else this["var"].Set(this.storage.SAppend(bO,bQ));this.ObsoleteKey(bR);},GetEnumerator:function(){return Q.Get(this["var"].Get());},GetEnumerator0:function(){return Q.Get0(this["var"].Get());}},t,w);w.New=bL.Ctor(function(bO,bP){w.New$3.call(this,bO,_.Create$1(o.ofSeq(H.distinctBy(bO,bP.SInit()))),bP);},w);w.New$3=bL.Ctor(function(bO,bP,bQ){t.New.call(this);this.key=bO;this["var"]=bP;this.storage=bQ;this.v=s.Map(function(bR){return bR.slice();},this["var"].get_View());this.it=new O.New$5();},w);s.Get=function(bO,bP){var bQ;function bR(){F.WhenRun(bP(),function(bS){if(!bQ[0]){bQ[0]=true;bO(bS);}},function(){if(!bQ[0])bR();});}bQ=[false];bR();};s.Map=function(bO,bP){return s.CreateLazy(function(){return F.Map(bO,bP());});};s.CreateLazy=function(bO){var bP;bP={c:null,o:bO};return function(){var bQ,bR;bQ=bP.c;return bQ===null?(bQ=bP.o(),bP.c=bQ,(bR=bQ.s,bR!=null&&bR.$==0)?bP.o=null:F.WhenObsoleteRun(bQ,function(){bP.c=null;}),bQ):bQ;};};s.Const=function(bO){var bP;bP=F.New({$:0,$0:bO});return function(){return bP;};};s.Bind=function(bO,bP){return s.Join(s.Map(bO,bP));};s.Join=function(bO){return s.CreateLazy(function(){return F.Join(bO());});};s.MapSeqCachedViewBy=function(bO,bP,bQ){var bR;bR=[new O.New$5()];return s.Map(function(bS){var bT,bU,bV;bT=bR[0];bU=new O.New$5();bV=Z.mapInPlace(function(bW){var bX,bY,bZ;bX=bO(bW);bY=bT.ContainsKey(bX)?(bZ=bT.get_Item(bX),(_.Set(bZ.r,bW),bZ)):s.ConvertSeqNode(function(b0){return bP(bX,b0);},bW);bU.set_Item(bX,bY);return bY.e;},o.ofSeq(bS));bR[0]=bU;return bV;},bQ);};s.Sink=function(bO,bP){function bQ(){F.WhenRun(bP(),bO,function(){bf.scheduler().Fork(bQ);});}bf.scheduler().Fork(bQ);};s.ConvertSeqNode=function(bO,bP){var bQ,bR;bQ=_.Create$1(bP);bR=bQ.get_View();return{e:bO(bR),r:bQ,w:bR};};s.Map2Unit=function(bO,bP){return s.CreateLazy(function(){return F.Map2Unit(bO(),bP());});};y.Trim=function(bO){return bO.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};y.concat=function(bO,bP){return o.ofSeq(bP).join(bO);};y.SplitChars=function(bO,bP,bQ){return y.Split(bO,new a.RegExp("["+y.RegexEscape(bP.join(""))+"]"),bQ);};y.StartsWith=function(bO,bP){return bO.substring(0,bP.length)==bP;};y.Split=function(bO,bP,bQ){return bQ===1?o.filter(function(bR){return bR!=="";},y.SplitWith(bO,bP)):y.SplitWith(bO,bP);};y.RegexEscape=function(bO){return bO.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};y.SplitWith=function(bO,bP){return bO.split(bP);};y.forall=function(bO,bP){return H.forall(bO,y.protect(bP));};y.protect=function(bO){return bO===null?"":bO;};z.$cctor=function(){z.$cctor=a.ignore;z.totalMax=10*1024*1024;z.singleMax=5*1024*1024;z.button=self.document.getElementById("JobSend");z.files=w.Create(function(bO){return bO[0];},K.Empty);z.currentSize=s.Map(function(bO){return H.sumBy(function(bP){return bP.size;},H.map(function(bP){return bP[1];},bO));},f.files().v);};A=r.AttrProxy=bL.Class({},null,A);A.Create=function(bO,bP){return L.Static(function(bQ){bQ.setAttribute(bO,bP);});};A.HandlerImpl=function(bO,bP){return L.Static(function(bQ){bQ.addEventListener(bO,function(bR){return(bP(bQ))(bR);},false);});};A.Concat=function(bO){var bP;bP=Z.ofSeqNonCopying(bO);return Z.TreeReduce(L.EmptyAttr(),A.Append,bP);};A.Append=function(bO,bP){return L.AppendTree(bO,bP);};B=r.Doc=bL.Class({},t,B);B.TextNode=function(bO){return B.Mk({$:5,$0:self.document.createTextNode(bO)},s.Const());};B.EmbedView=function(bO){var bP;bP=P.CreateEmbedNode();return B.Mk({$:2,$0:bP},s.Map(a.ignore,s.Bind(function(bQ){P.UpdateEmbedNode(bP,bQ.docNode);return bQ.updates;},bO)));};B.RunById=function(bO,bP){var bQ;bQ=self.document.getElementById(bO);if(m.Equals(bQ,null))l.FailWith("invalid id: "+bO);else B.Run(bQ,bP);};B.Element=function(bO,bP,bQ){var bR,bS;bR=A.Concat(bP);bS=B.Concat(bQ);return Y.New(self.document.createElement(bO),bR,bS);};B.Mk=function(bO,bP){return new B.New(bO,bP);};B.Run=function(bO,bP){P.LinkElement(bO,bP.docNode);B.RunInPlace(false,bO,bP);};B.ConvertSeqBy=function(bO,bP,bQ){return B.Flatten(s.MapSeqCachedViewBy(bO,function(bR,bS){return(bP(bR))(bS);},bQ));};B.Concat=function(bO){var bP;bP=Z.ofSeqNonCopying(bO);return Z.TreeReduce(B.get_Empty(),B.Append,bP);};B.RunInPlace=function(bO,bP,bQ){var bR;bR=P.CreateRunState(bP,bQ.docNode);s.Sink(_6.get_UseAnimations()||_7.BatchUpdatesEnabled()?_9.StartProcessor(P.PerformAnimatedUpdate(bO,bR,bQ.docNode)):function(){P.PerformSyncUpdate(bO,bR,bQ.docNode);},bQ.updates);};B.Flatten=function(bO){return B.EmbedView(s.Map(B.Concat,bO));};B.Append=function(bO,bP){return B.Mk({$:0,$0:bO.docNode,$1:bP.docNode},s.Map2Unit(bO.updates,bP.updates));};B.get_Empty=function(){return B.Mk(null,s.Const());};B.New=bL.Ctor(function(bO,bP){t.New.call(this);this.docNode=bO;this.updates=bP;},B);C=r.Var=bL.Class({},t,C);C.New=bL.Ctor(function(){t.New.call(this);},C);E.LoadLocalTemplates=function(bO){!E.LocalTemplatesLoaded()?(E.set_LocalTemplatesLoaded(true),E.LoadNestedTemplates(self.document.body,"")):void 0;E.LoadedTemplates().set_Item(bO,E.LoadedTemplateFile(""));};E.LocalTemplatesLoaded=function(){V.$cctor();return V.LocalTemplatesLoaded;};E.set_LocalTemplatesLoaded=function(bO){V.$cctor();V.LocalTemplatesLoaded=bO;};E.LoadNestedTemplates=function(bO,bP){var bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3;function bQ(b4){var b5,b6;if(!bR.ContainsKey(b4)){b5=(b6=null,[bS.TryGetValue(b4,{get:function(){return b6;},set:function(b7){b6=b7;}}),b6]);if(b5[0]){b3.Add(b4);bS.Remove(b4);E.PrepareTemplateStrict(bP,{$:1,$0:b4},b5[1],{$:1,$0:bQ});}else bM.warn(b3.Contains(b4)?"Encountered loop when instantiating "+b4:"Local template does not exist: "+b4);}}bR=E.LoadedTemplateFile(bP);bS=new O.New$5();bT=bO.querySelectorAll("[ws-template]");for(bU=0,bV=bT.length-1;bU<=bV;bU++){bW=bT[bU];bX=bW.getAttribute("ws-template").toLowerCase();bW.removeAttribute("ws-template");bS.set_Item(bX,E.FakeRootSingle(bW));}bY=bO.querySelectorAll("[ws-children-template]");for(bZ=0,b0=bY.length-1;bZ<=b0;bZ++){b1=bY[bZ];b2=b1.getAttribute("ws-children-template").toLowerCase();b1.removeAttribute("ws-children-template");bS.set_Item(b2,E.FakeRoot(b1));}b3=new W.New$3();while(bS.count>0)bQ(H.head(bS.get_Keys()));};E.LoadedTemplates=function(){V.$cctor();return V.LoadedTemplates;};E.LoadedTemplateFile=function(bO){var bP,bQ,bR;bP=(bQ=null,[E.LoadedTemplates().TryGetValue(bO,{get:function(){return bQ;},set:function(bS){bQ=bS;}}),bQ]);return bP[0]?bP[1]:(bR=new O.New$5(),(E.LoadedTemplates().set_Item(bO,bR),bR));};E.FakeRootSingle=function(bO){var bP,bQ,bR,bS;bO.removeAttribute("ws-template");bP=bO.getAttribute("ws-replace");if(bP===null);else{bO.removeAttribute("ws-replace");bQ=bO.parentNode;m.Equals(bQ,null)?void 0:(bR=self.document.createElement(bO.tagName),bR.setAttribute("ws-replace",bP),bQ.replaceChild(bR,bO));}bS=self.document.createElement("div");bS.appendChild(bO);return bS;};E.FakeRoot=function(bO){var bP;bP=self.document.createElement("div");while(bO.hasChildNodes())bP.appendChild(bO.firstChild);return bP;};E.PrepareTemplateStrict=function(bO,bP,bQ,bR){var bS;function bT(bZ,b0){var b1,b2,b3,b4,b5,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp;function b6(cq){}while(true)switch(bZ){case 0:if(b0!==null){b1=b0.nextSibling;if(m.Equals(b0.nodeType,h.TEXT_NODE))_3.convertTextNode(b0);else if(m.Equals(b0.nodeType,h.ELEMENT_NODE))bV(b0);b0=b1;}else return null;break;case 1:b7=_4.string(b0.nodeName,{$:1,$0:3},null).toLowerCase();b8=(b2=b7.indexOf("."),b2===-1?[bO,b7]:[_4.string(b7,null,{$:1,$0:b2-1}),_4.string(b7,{$:1,$0:b2+1},null)]);b9=b8[1];b_=b8[0];if(b_!==""&&!E.LoadedTemplates().ContainsKey(b_))return _3.failNotLoaded(b9);else{if(b_===""&&bR!=null)bR.$0(b9);b$=E.LoadedTemplates().get_Item(b_);if(!b$.ContainsKey(b9))return _3.failNotLoaded(b9);else{ca=b$.get_Item(b9);cb=ca.cloneNode(true);cc=new W.New$3();cd=new O.New$5();ce=b0.attributes;for(cf=0,cg=ce.length-1;cf<=cg;cf++){ch=ce.item(cf).name.toLowerCase();cd.set_Item(ch,(ci=ce.item(cf).nodeValue,ci===""?ch:ci.toLowerCase()));if(!cc.Add(ch))bM.warn("Hole mapped twice",ch);}for(cj=0,ck=b0.childNodes.length-1;cj<=ck;cj++){cl=b0.childNodes[cj];if(m.Equals(cl.nodeType,h.ELEMENT_NODE))!cc.Add(cl.nodeName.toLowerCase())?bM.warn("Hole filled twice",b9):void 0;}cm=b0.childNodes.length===1&&m.Equals(b0.firstChild.nodeType,h.TEXT_NODE);if(cm){b4=_3.fillTextHole(cb,b0.firstChild.textContent,b9);((function(cq){return function(cr){if(cr!=null)cq(cr.$0);};}((b5=function(cq){return function(cr){return cq.Add(cr);};}(cc),function(cq){return b6(b5(cq));})))(b4));}_3.removeHolesExcept(cb,cc);if(!cm){for(cn=0,co=b0.childNodes.length-1;cn<=co;cn++){cp=b0.childNodes[cn];if(m.Equals(cp.nodeType,h.ELEMENT_NODE))cp.hasAttributes()?_3.fillInstanceAttrs(cb,cp):bU(cb,cp);}}_3.mapHoles(cb,cd);_3.fill(cb,b0.parentNode,b0);b0.parentNode.removeChild(b0);return;}}break;}}function bU(bZ,b0){var b1,b3,b4;function b2(b5,b6){var b7;if(b3==="title"&&b0.hasChildNodes()){b7=M.ParseHTMLIntoFakeRoot(b0.textContent);b0.removeChild(b0.firstChild);while(b7.hasChildNodes())b0.appendChild(b7.firstChild);}else null;bV(b0);return _3.fill(b0,b5,b6);}b3=b0.nodeName.toLowerCase();E.foreachNotPreserved(bZ,"[ws-attr-holes]",function(b5){var b6,b7,b8,b9,b_;b6=y.SplitChars(b5.getAttribute("ws-attr-holes"),[" "],1);for(b7=0,b8=b6.length-1;b7<=b8;b7++){b9=o.get(b6,b7);b5.setAttribute(b9,(b_=new a.RegExp("\\${"+b3+"}","ig"),b5.getAttribute(b9).replace(b_,b0.textContent)));}});b4=bZ.querySelector("[ws-hole="+b3+"]");if(m.Equals(b4,null)){b1=bZ.querySelector("[ws-replace="+b3+"]");return m.Equals(b1,null)?null:(b2(b1.parentNode,b1),void b1.parentNode.removeChild(b1));}else{while(b4.hasChildNodes())b4.removeChild(b4.lastChild);b4.removeAttribute("ws-hole");return b2(b4,null);}}function bV(bZ){if(!bZ.hasAttribute("ws-preserve"))if(y.StartsWith(bZ.nodeName.toLowerCase(),"ws-"))bX(bZ);else{_3.convertAttrs(bZ);bW(bZ.firstChild);}}function bW(bZ){return bT(0,bZ);}function bX(bZ){return bT(1,bZ);}function bY(bZ){var b0,b1,b2,b3;while(true){b0=bZ.querySelector("[ws-template]");if(m.Equals(b0,null)){b1=bZ.querySelector("[ws-children-template]");if(m.Equals(b1,null))return null;else{b2=b1.getAttribute("ws-children-template");b1.removeAttribute("ws-children-template");E.PrepareTemplateStrict(bO,{$:1,$0:b2},b1,null);bZ=bZ;}}else{b3=b0.getAttribute("ws-template");(E.PrepareSingleTemplate(bO,{$:1,$0:b3},b0))(null);bZ=bZ;}}}bS=(bP==null?"":bP.$0).toLowerCase();E.LoadedTemplateFile(bO).set_Item(bS,bQ);if(bQ.hasChildNodes()){bY(bQ);bW(bQ.firstChild);}};E.foreachNotPreserved=function(bO,bP,bQ){M.IterSelector(bO,bP,function(bR){if(bR.closest("[ws-preserve]")==null)bQ(bR);});};E.PrepareSingleTemplate=function(bO,bP,bQ){var bR;bR=E.FakeRootSingle(bQ);return function(bS){E.PrepareTemplateStrict(bO,bP,bR,bS);};};E.TextHoleRE=function(){V.$cctor();return V.TextHoleRE;};F.WhenRun=function(bO,bP,bQ){var bR;bR=bO.s;if(bR==null)bQ();else bR!=null&&bR.$==2?(bR.$1.push(bQ),bP(bR.$0)):bR!=null&&bR.$==3?(bR.$0.push(bP),bR.$1.push(bQ)):bP(bR.$0);};F.Map=function(bO,bP){var bQ,bR;bQ=bP.s;return bQ!=null&&bQ.$==0?F.New({$:0,$0:bO(bQ.$0)}):(bR=F.New({$:3,$0:[],$1:[]}),(F.When(bP,function(bS){F.MarkDone(bR,bP,bO(bS));},bR),bR));};F.WhenObsoleteRun=function(bO,bP){var bQ;bQ=bO.s;if(bQ==null)bP();else bQ!=null&&bQ.$==2?bQ.$1.push(bP):bQ!=null&&bQ.$==3?bQ.$1.push(bP):void 0;};F.When=function(bO,bP,bQ){var bR;bR=bO.s;if(bR==null)F.Obsolete(bQ);else bR!=null&&bR.$==2?(F.EnqueueSafe(bR.$1,bQ),bP(bR.$0)):bR!=null&&bR.$==3?(bR.$0.push(bP),F.EnqueueSafe(bR.$1,bQ)):bP(bR.$0);};F.MarkDone=function(bO,bP,bQ){var bR;if(bR=bP.s,bR!=null&&bR.$==0)F.MarkForever(bO,bQ);else F.MarkReady(bO,bQ);};F.EnqueueSafe=function(bO,bP){var bQ,bR,bS,bT;bO.push(bP);if(bO.length%20===0){bQ=bO.slice(0);bi.Clear(bO);for(bR=0,bS=o.length(bQ)-1;bR<=bS;bR++){bT=o.get(bQ,bR);if(typeof bT=="object")(function(bU){if(bU.s)bO.push(bU);}(bT));else(function(bU){bO.push(bU);}(bT));}}else void 0;};F.MarkForever=function(bO,bP){var bQ,bR,bS,bT;bQ=bO.s;if(bQ!=null&&bQ.$==3){bO.s={$:0,$0:bP};bR=bQ.$0;for(bS=0,bT=o.length(bR)-1;bS<=bT;bS++)(o.get(bR,bS))(bP);}else void 0;};F.MarkReady=function(bO,bP){var bQ,bR,bS,bT;bQ=bO.s;if(bQ!=null&&bQ.$==3){bO.s={$:2,$0:bP,$1:bQ.$1};bR=bQ.$0;for(bS=0,bT=o.length(bR)-1;bS<=bT;bS++)(o.get(bR,bS))(bP);}else void 0;};F.Join=function(bO){var bP;bP=F.New({$:3,$0:[],$1:[]});F.When(bO,function(bQ){var bR;bR=bQ();F.When(bR,function(bS){var bT,bU;if((bT=bR.s,bT!=null&&bT.$==0)&&(bU=bO.s,bU!=null&&bU.$==0))F.MarkForever(bP,bS);else F.MarkReady(bP,bS);},bP);},bP);return bP;};F.Copy=function(bO){var bP,bQ,bR;bP=bO.s;return bP==null?bO:bP!=null&&bP.$==2?(bQ=F.New({$:2,$0:bP.$0,$1:[]}),(F.WhenObsolete(bO,bQ),bQ)):bP!=null&&bP.$==3?(bR=F.New({$:3,$0:[],$1:[]}),(F.When(bO,function(bS){F.MarkDone(bR,bO,bS);},bR),bR)):bO;};F.Map2Unit=function(bO,bP){var bQ,bR,bS;function bT(){var bU,bV,bW;if(!(bU=bS.s,bU!=null&&bU.$==0||bU!=null&&bU.$==2)){bV=F.ValueAndForever(bO);bW=F.ValueAndForever(bP);if(bV!=null&&bV.$==1)bW!=null&&bW.$==1?bV.$0[1]&&bW.$0[1]?F.MarkForever(bS,null):F.MarkReady(bS,null):void 0;}}bQ=bO.s;bR=bP.s;return bQ!=null&&bQ.$==0?bR!=null&&bR.$==0?F.New({$:0,$0:null}):bP:bR!=null&&bR.$==0?bO:(bS=F.New({$:3,$0:[],$1:[]}),(F.When(bO,bT,bS),F.When(bP,bT,bS),bS));};F.WhenObsolete=function(bO,bP){var bQ;bQ=bO.s;if(bQ==null)F.Obsolete(bP);else bQ!=null&&bQ.$==2?F.EnqueueSafe(bQ.$1,bP):bQ!=null&&bQ.$==3?F.EnqueueSafe(bQ.$1,bP):void 0;};F.ValueAndForever=function(bO){var bP;bP=bO.s;return bP!=null&&bP.$==0?{$:1,$0:[bP.$0,true]}:bP!=null&&bP.$==2?{$:1,$0:[bP.$0,false]}:null;};H.map=function(bO,bP){return{GetEnumerator:function(){var bQ;bQ=Q.Get(bP);return new T.New(null,null,function(bR){return bQ.MoveNext()&&(bR.c=bO(bQ.Current()),true);},function(){bQ.Dispose();});}};};H.sumBy=function(bO,bP){return H.fold(function(bQ,bR){return bQ+bO(bR);},0,bP);};H.init=function(bO,bP){return H.take(bO,H.initInfinite(bP));};H.iter=function(bO,bP){var bQ;bQ=Q.Get(bP);try{while(bQ.MoveNext())bO(bQ.Current());}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};H.fold=function(bO,bP,bQ){var bR,bS;bR=bP;bS=Q.Get(bQ);try{while(bS.MoveNext())bR=bO(bR,bS.Current());return bR;}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}};H.head=function(bO){var bP;bP=Q.Get(bO);try{return bP.MoveNext()?bP.Current():H.insufficient();}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};H.take=function(bO,bP){bO<0?H.nonNegative():void 0;return{GetEnumerator:function(){var bQ;bQ=[Q.Get(bP)];return new T.New(0,null,function(bR){var bS;bR.s=bR.s+1;return bR.s>bO?false:(bS=bQ[0],m.Equals(bS,null)?H.insufficient():bS.MoveNext()?(bR.c=bS.Current(),bR.s===bO?(bS.Dispose(),bQ[0]=null):void 0,true):(bS.Dispose(),bQ[0]=null,H.insufficient()));},function(){var bR;bR=bQ[0];if(!m.Equals(bR,null))bR.Dispose();});}};};H.initInfinite=function(bO){return{GetEnumerator:function(){return new T.New(0,null,function(bP){bP.c=bO(bP.s);bP.s=bP.s+1;return true;},void 0);}};};H.distinctBy=function(bO,bP){return{GetEnumerator:function(){var bQ,bR;bQ=Q.Get(bP);bR=new W.New$3();return new T.New(null,null,function(bS){var bT,bU;if(bQ.MoveNext()){bT=bQ.Current();bU=bR.Add(bO(bT));while(!bU&&bQ.MoveNext()){bT=bQ.Current();bU=bR.Add(bO(bT));}return bU&&(bS.c=bT,true);}else return false;},function(){bQ.Dispose();});}};};H.max=function(bO){var bP,bQ,bR;bP=Q.Get(bO);try{if(!bP.MoveNext())H.seqEmpty();bQ=bP.Current();while(bP.MoveNext()){bR=bP.Current();if(m.Compare(bR,bQ)===1)bQ=bR;}return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};H.forall=function(bO,bP){return!H.exists(function(bQ){return!bO(bQ);},bP);};H.seqEmpty=function(){return l.FailWith("The input sequence was empty.");};H.exists=function(bO,bP){var bQ,bR;bQ=Q.Get(bP);try{bR=false;while(!bR&&bQ.MoveNext())bR=bO(bQ.Current());return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};I.toSafe=function(bO){return bO==null?"":bO;};o.iter=function(bO,bP){var bQ,bR;for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++)bO(bP[bQ]);};o.tryPick=function(bO,bP){var bQ,bR,bS;bQ=null;bR=0;while(bR<bP.length&&bQ==null){bS=bO(bP[bR]);if(bS!=null&&bS.$==1)bQ=bS;bR=bR+1;}return bQ;};o.tryFindIndex=function(bO,bP){var bQ,bR;bQ=null;bR=0;while(bR<bP.length&&bQ==null){bO(bP[bR])?bQ={$:1,$0:bR}:void 0;bR=bR+1;}return bQ;};o.ofSeq=function(bO){var bP,bQ;if(bO instanceof a.Array)return bO.slice();else if(bO instanceof K)return o.ofList(bO);else{bP=[];bQ=Q.Get(bO);try{while(bQ.MoveNext())bP.push(bQ.Current());return bP;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}}};o.filter=function(bO,bP){var bQ,bR,bS;bQ=[];for(bR=0,bS=bP.length-1;bR<=bS;bR++)if(bO(bP[bR]))bQ.push(bP[bR]);return bQ;};o.exists=function(bO,bP){var bQ,bR,bS,bT;bQ=false;bR=0;bT=o.length(bP);while(!bQ&&bR<bT)if(bO(bP[bR]))bQ=true;else bR=bR+1;return bQ;};o.concat=function(bO){return a.Array.prototype.concat.apply([],o.ofSeq(bO));};o.ofList=function(bO){var bP,bQ;bQ=[];bP=bO;while(!(bP.$==0)){bQ.push(J.head(bP));bP=J.tail(bP);}return bQ;};o.map=function(bO,bP){var bQ,bR,bS;bQ=new a.Array(bP.length);for(bR=0,bS=bP.length-1;bR<=bS;bR++)bQ[bR]=bO(bP[bR]);return bQ;};o.foldBack=function(bO,bP,bQ){var bR,bS,bT,bU,bV;bR=bQ;bT=bP.length;for(bU=1,bV=bT;bU<=bV;bU++)bR=bO(bP[bT-bU],bR);return bR;};o.pick=function(bO,bP){var bQ;bQ=o.tryPick(bO,bP);return bQ==null?l.FailWith("KeyNotFoundException"):bQ.$0;};o.choose=function(bO,bP){var bQ,bR,bS,bT;bQ=[];for(bR=0,bS=bP.length-1;bR<=bS;bR++){bT=bO(bP[bR]);if(bT==null);else bQ.push(bT.$0);}return bQ;};o.create=function(bO,bP){var bQ,bR,bS;bQ=new a.Array(bO);for(bR=0,bS=bO-1;bR<=bS;bR++)bQ[bR]=bP;return bQ;};o.init=function(bO,bP){var bQ,bR,bS;if(bO<0)l.FailWith("Negative size given.");else null;bQ=new a.Array(bO);for(bR=0,bS=bO-1;bR<=bS;bR++)bQ[bR]=bP(bR);return bQ;};o.forall=function(bO,bP){var bQ,bR,bS,bT;bQ=true;bR=0;bT=o.length(bP);while(bQ&&bR<bT)if(bO(bP[bR]))bR=bR+1;else bQ=false;return bQ;};w.Create=function(bO,bP){return w.CreateWithStorage(bO,S.InMemory(o.ofSeq(bP)));};w.CreateWithStorage=function(bO,bP){return new w.New(bO,bP);};K=J.T=bL.Class({GetEnumerator:function(){return new T.New(this,null,function(bO){var bP;bP=bO.s;return bP.$==0?false:(bO.c=bP.$0,bO.s=bP.$1,true);},void 0);},GetEnumerator0:function(){return Q.Get(this);}},null,K);K.Empty=new K({$:0});L.Static=function(bO){return new A({$:3,$0:bO});};L.Updates=function(bO){return Z.MapTreeReduce(function(bP){return bP.NChanged();},s.Const(),s.Map2Unit,bO.DynNodes);};L.AppendTree=function(bO,bP){var bQ;return bO===null?bP:bP===null?bO:(bQ=new A({$:2,$0:bO,$1:bP}),(L.SetFlags(bQ,L.Flags(bO)|L.Flags(bP)),bQ));};L.EmptyAttr=function(){bl.$cctor();return bl.EmptyAttr;};L.Insert=function(bO,bP){var bQ,bR,bS;function bT(bU){var bV,bW;while(true)if(!(bU===null)){if(bU!=null&&bU.$==1)return bQ.push(bU.$0);else if(bU!=null&&bU.$==2){bV=bU.$1;bW=bU.$0;bT(bW);bU=bV;}else return bU!=null&&bU.$==3?bU.$0(bO):bU!=null&&bU.$==4?bR.push(bU.$0):null;}else return null;}bQ=[];bR=[];bT(bP);bS=bQ.slice(0);return bb.New(bO,L.Flags(bP),bS,bR.length===0?null:{$:1,$0:function(bU){H.iter(function(bV){bV(bU);},bR);}});};L.SetFlags=function(bO,bP){bO.flags=bP;};L.Flags=function(bO){return bO!==null&&bO.hasOwnProperty("flags")?bO.flags:0;};L.HasExitAnim=function(bO){var bP;bP=2;return(bO.DynFlags&bP)===bP;};L.GetExitAnim=function(bO){return L.GetAnim(bO,function(bP,bQ){return bP.NGetExitAnim(bQ);});};L.HasEnterAnim=function(bO){var bP;bP=1;return(bO.DynFlags&bP)===bP;};L.GetEnterAnim=function(bO){return L.GetAnim(bO,function(bP,bQ){return bP.NGetEnterAnim(bQ);});};L.HasChangeAnim=function(bO){var bP;bP=4;return(bO.DynFlags&bP)===bP;};L.GetChangeAnim=function(bO){return L.GetAnim(bO,function(bP,bQ){return bP.NGetChangeAnim(bQ);});};L.GetAnim=function(bO,bP){return _6.Concat(o.map(function(bQ){return bP(bQ,bO.DynElem);},bO.DynNodes));};L.Sync=function(bO,bP){o.iter(function(bQ){bQ.NSync(bO);},bP.DynNodes);};M.ParseHTMLIntoFakeRoot=function(bO){var bP,bQ,bR,bS,bT;function bU(bV,bW){var bX;while(true)if(bW===0)return bV;else{bX=bW;bV=bV.lastChild;bW=bX-1;}}bP=self.document.createElement("div");return!M.rhtml().test(bO)?(bP.appendChild(self.document.createTextNode(bO)),bP):(bQ=(bR=M.rtagName().exec(bO),m.Equals(bR,null)?"":o.get(bR,1).toLowerCase()),(bS=(bT=(M.wrapMap())[bQ],bT?bT:M.defaultWrap()),(bP.innerHTML=bS[1]+bO.replace(M.rxhtmlTag(),"<$1></$2>")+bS[2],bU(bP,bS[0]))));};M.rhtml=function(){bm.$cctor();return bm.rhtml;};M.wrapMap=function(){bm.$cctor();return bm.wrapMap;};M.defaultWrap=function(){bm.$cctor();return bm.defaultWrap;};M.rxhtmlTag=function(){bm.$cctor();return bm.rxhtmlTag;};M.rtagName=function(){bm.$cctor();return bm.rtagName;};M.IterSelector=function(bO,bP,bQ){var bR,bS,bT;bR=bO.querySelectorAll(bP);for(bS=0,bT=bR.length-1;bS<=bT;bS++)bQ(bR[bS]);};M.InsertAt=function(bO,bP,bQ){var bR;if(!(bQ.parentNode===bO&&bP===(bR=bQ.nextSibling,m.Equals(bR,null)?null:bR)))bO.insertBefore(bQ,bP);};M.RemoveNode=function(bO,bP){if(bP.parentNode===bO)bO.removeChild(bP);};O=N.Dictionary=bL.Class({TryGetValue:function(bO,bP){var bQ,bR,bS;bQ=this;bR=this.data[this.hash(bO)];return bR==null?false:(bS=o.tryPick(function(bT){var bU;bU=l.KeyValue(bT);return bQ.equals.apply(null,[bU[0],bO])?{$:1,$0:bU[1]}:null;},bR),bS!=null&&bS.$==1&&(bP.set(bS.$0),true));},Remove:function(bO){return this.remove(bO);},set_Item:function(bO,bP){this.set(bO,bP);},Clear:function(){this.data=[];this.count=0;},remove:function(bO){var bP,bQ,bR,bS;bP=this;bQ=this.hash(bO);bR=this.data[bQ];return bR==null?false:(bS=o.filter(function(bT){return!bP.equals.apply(null,[(l.KeyValue(bT))[0],bO]);},bR),o.length(bS)<bR.length&&(this.count=this.count-1,this.data[bQ]=bS,true));},ContainsKey:function(bO){var bP,bQ;bP=this;bQ=this.data[this.hash(bO)];return bQ==null?false:o.exists(function(bR){return bP.equals.apply(null,[(l.KeyValue(bR))[0],bO]);},bQ);},get_Keys:function(){return new _5.New(this);},set:function(bO,bP){var bQ,bR,bS,bT;bQ=this;bR=this.hash(bO);bS=this.data[bR];if(bS==null){this.count=this.count+1;this.data[bR]=new a.Array({K:bO,V:bP});}else{bT=o.tryFindIndex(function(bU){return bQ.equals.apply(null,[(l.KeyValue(bU))[0],bO]);},bS);bT==null?(this.count=this.count+1,bS.push({K:bO,V:bP})):bS[bT.$0]={K:bO,V:bP};}},get_Item:function(bO){return this.get(bO);},get:function(bO){var bP,bQ;bP=this;bQ=this.data[this.hash(bO)];return bQ==null?_2.notPresent():o.pick(function(bR){var bS;bS=l.KeyValue(bR);return bP.equals.apply(null,[bS[0],bO])?{$:1,$0:bS[1]}:null;},bQ);},GetEnumerator:function(){return Q.Get0(this);},GetEnumerator0:function(){return Q.Get0(o.concat(k.GetFieldValues(this.data)));}},t,O);O.New$5=bL.Ctor(function(){O.New$6.call(this,[],m.Equals,m.Hash);},O);O.New$6=bL.Ctor(function(bO,bP,bQ){var bR,bS;t.New.call(this);this.equals=bP;this.hash=bQ;this.count=0;this.data=[];bR=Q.Get(bO);try{while(bR.MoveNext()){bS=bR.Current();this.set(bS.K,bS.V);}}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}},O);F.Obsolete=function(bO){var bP,bQ,bR,bS,bT;bQ=bO.s;if(bQ==null||(bQ!=null&&bQ.$==2?(bP=bQ.$1,false):bQ!=null&&bQ.$==3?(bP=bQ.$1,false):true))void 0;else{bO.s=null;for(bR=0,bS=o.length(bP)-1;bR<=bS;bR++){bT=o.get(bP,bR);if(typeof bT=="object")(function(bU){F.Obsolete(bU);}(bT));else bT();}}};F.New=function(bO){return{s:bO};};P.CreateEmbedNode=function(){return{Current:null,Dirty:false};};P.UpdateEmbedNode=function(bO,bP){bO.Current=bP;bO.Dirty=true;};P.LinkElement=function(bO,bP){P.InsertDoc(bO,bP,null);};P.InsertDoc=function(bO,bP,bQ){var bR,bS,bT;while(true)if(bP!=null&&bP.$==1)return P.InsertNode(bO,bP.$0.El,bQ);else if(bP!=null&&bP.$==2){bR=bP.$0;bR.Dirty=false;bP=bR.Current;}else if(bP==null)return bQ;else if(bP!=null&&bP.$==4)return P.InsertNode(bO,bP.$0.Text,bQ);else if(bP!=null&&bP.$==5)return P.InsertNode(bO,bP.$0,bQ);else if(bP!=null&&bP.$==6)return o.foldBack(function(bU,bV){return(((bL.Curried3(function(bW,bX,bY){return bX==null||bX.constructor===R?P.InsertDoc(bW,bX,bY):P.InsertNode(bW,bX,bY);}))(bO))(bU))(bV);},bP.$0.Els,bQ);else{bS=bP.$1;bT=bP.$0;bP=bT;bQ=P.InsertDoc(bO,bS,bQ);}};P.CreateRunState=function(bO,bP){return bd.New(be.get_Empty(),P.CreateElemNode(bO,L.EmptyAttr(),bP));};P.PerformAnimatedUpdate=function(bO,bP,bQ){var bR;return _6.get_UseAnimations()?(bR=null,bf.Delay(function(){var bS,bT,bU;bS=be.FindAll(bQ);bT=P.ComputeChangeAnim(bP,bS);bU=P.ComputeEnterAnim(bP,bS);return bf.Bind(_6.Play(_6.Append(bT,P.ComputeExitAnim(bP,bS))),function(){return bf.Bind(P.SyncElemNodesNextFrame(bO,bP),function(){return bf.Bind(_6.Play(bU),function(){bP.PreviousNodes=bS;return bf.Return(null);});});});})):P.SyncElemNodesNextFrame(bO,bP);};P.PerformSyncUpdate=function(bO,bP,bQ){var bR;bR=be.FindAll(bQ);P.SyncElemNode(bO,bP.Top);bP.PreviousNodes=bR;};P.CreateElemNode=function(bO,bP,bQ){var bR;P.LinkElement(bO,bQ);bR=L.Insert(bO,bP);return _0.New(bR,bQ,null,bO,bk.Int(),bL.GetOptional(bR.OnAfterRender));};P.InsertNode=function(bO,bP,bQ){M.InsertAt(bO,bQ,bP);return bP;};P.SyncElemNodesNextFrame=function(bO,bP){function bQ(bR){a.requestAnimationFrame(function(){P.SyncElemNode(bO,bP.Top);bR();});}return _7.BatchUpdatesEnabled()?bf.FromContinuations(function(bR,bS,bT){return bQ.apply(null,[bR,bS,bT]);}):(P.SyncElemNode(bO,bP.Top),bf.Return(null));};P.ComputeExitAnim=function(bO,bP){return _6.Concat(o.map(function(bQ){return L.GetExitAnim(bQ.Attr);},be.ToArray(be.Except(bP,be.Filter(function(bQ){return L.HasExitAnim(bQ.Attr);},bO.PreviousNodes)))));};P.ComputeEnterAnim=function(bO,bP){return _6.Concat(o.map(function(bQ){return L.GetEnterAnim(bQ.Attr);},be.ToArray(be.Except(bO.PreviousNodes,be.Filter(function(bQ){return L.HasEnterAnim(bQ.Attr);},bP)))));};P.ComputeChangeAnim=function(bO,bP){var bQ;function bR(bS){return L.HasChangeAnim(bS.Attr);}bQ=function(bS){return be.Filter(bR,bS);};return _6.Concat(o.map(function(bS){return L.GetChangeAnim(bS.Attr);},be.ToArray(be.Intersect(bQ(bO.PreviousNodes),bQ(bP)))));};P.SyncElemNode=function(bO,bP){!bO?P.SyncElement(bP):void 0;P.Sync(bP.Children);P.AfterRender(bP);};P.SyncElement=function(bO){function bP(bQ){function bR(bS){var bT,bU,bV,bW;while(true){if(bS!=null&&bS.$==0){bU=bS.$1;bV=bS.$0;if(bR(bV))return true;else bS=bU;}else if(bS!=null&&bS.$==2){bW=bS.$0;if(bW.Dirty)return true;else bS=bW.Current;}else return bS!=null&&bS.$==6&&(bT=bS.$0,bT.Dirty||o.exists(bP,bT.Holes));}}return bR(bQ.Children);}L.Sync(bO.El,bO.Attr);if(bP(bO))P.DoSyncElement(bO);};P.Sync=function(bO){var bP,bQ,bR,bS,bT;while(true){if(bO!=null&&bO.$==1)return P.SyncElemNode(false,bO.$0);else if(bO!=null&&bO.$==2){bR=bO.$0;bO=bR.Current;}else if(bO==null)return null;else if(bO!=null&&bO.$==5)return null;else if(bO!=null&&bO.$==4){bP=bO.$0;return bP.Dirty?(bP.Text.nodeValue=bP.Value,bP.Dirty=false):null;}else if(bO!=null&&bO.$==6){bQ=bO.$0;o.iter(function(bU){return function(bV){P.SyncElemNode(bU,bV);};}(false),bQ.Holes);o.iter(function(bU){L.Sync(bU[0],bU[1]);},bQ.Attrs);return P.AfterRender(bQ);}else{bS=bO.$1;bT=bO.$0;P.Sync(bT);bO=bS;}}};P.AfterRender=function(bO){var bP;bP=bL.GetOptional(bO.Render);if(bP!=null&&bP.$==1){bP.$0(bO.El);bL.SetOptional(bO,"Render",null);}};P.DoSyncElement=function(bO){var bP,bQ,bR;function bS(bT,bU){var bV,bW,bX,bY;while(true){if(bT!=null&&bT.$==1)return bT.$0.El;else if(bT!=null&&bT.$==2){bW=bT.$0;if(bW.Dirty){bW.Dirty=false;return P.InsertDoc(bP,bW.Current,bU);}else bT=bW.Current;}else if(bT==null)return bU;else if(bT!=null&&bT.$==4)return bT.$0.Text;else if(bT!=null&&bT.$==5)return bT.$0;else if(bT!=null&&bT.$==6){bV=bT.$0;bV.Dirty?bV.Dirty=false:void 0;return o.foldBack(function(bZ,b0){return bZ==null||bZ.constructor===R?bS(bZ,b0):bZ;},bV.Els,bU);}else{bX=bT.$1;bY=bT.$0;bT=bY;bU=bS(bX,bU);}}}bP=bO.El;bC.Iter((bQ=bO.El,function(bT){M.RemoveNode(bQ,bT);}),bC.Except(bC.DocChildren(bO),bC.Children(bO.El,bL.GetOptional(bO.Delimiters))));bS(bO.Children,(bR=bL.GetOptional(bO.Delimiters),bR!=null&&bR.$==1?bR.$0[1]:null));};Q.Get=function(bO){return bO instanceof a.Array?Q.ArrayEnumerator(bO):m.Equals(typeof bO,"string")?Q.StringEnumerator(bO):bO.GetEnumerator();};Q.ArrayEnumerator=function(bO){return new T.New(0,null,function(bP){var bQ;bQ=bP.s;return bQ<o.length(bO)&&(bP.c=o.get(bO,bQ),bP.s=bQ+1,true);},void 0);};Q.StringEnumerator=function(bO){return new T.New(0,null,function(bP){var bQ;bQ=bP.s;return bQ<bO.length&&(bP.c=bO[bQ],bP.s=bQ+1,true);},void 0);};Q.Get0=function(bO){return bO instanceof a.Array?Q.ArrayEnumerator(bO):m.Equals(typeof bO,"string")?Q.StringEnumerator(bO):"GetEnumerator0"in bO?bO.GetEnumerator0():bO.GetEnumerator();};J.ofSeq=function(bO){var bP,bQ,bR,bS,bT,bU;if(bO instanceof K)return bO;else if(bO instanceof a.Array)return J.ofArray(bO);else{bP=Q.Get(bO);try{bR=bP.MoveNext();if(!bR)bQ=K.Empty;else{bT=new K({$:1});bS=bT;while(bR){bS.$0=bP.Current();if(bP.MoveNext())bS=(bU=new K({$:1}),bS.$1=bU,bU);else bR=false;}bS.$1=K.Empty;bQ=bT;}return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}}};J.ofArray=function(bO){var bP,bQ,bR;bP=K.Empty;for(bQ=o.length(bO)-1,bR=0;bQ>=bR;bQ--)bP=new K({$:1,$0:o.get(bO,bQ),$1:bP});return bP;};J.head=function(bO){return bO.$==1?bO.$0:J.listEmpty();};J.tail=function(bO){return bO.$==1?bO.$1:J.listEmpty();};J.listEmpty=function(){return l.FailWith("The input list was empty.");};S.InMemory=function(bO){return new X.New(bO);};T=Q.T=bL.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},t,T);T.New=bL.Ctor(function(bO,bP,bQ,bR){t.New.call(this);this.s=bO;this.c=bP;this.n=bQ;this.d=bR;},T);U.TryParseInt32=function(bO,bP){return U.TryParse(bO,-2147483648,2147483647,bP);};V.$cctor=function(){V.$cctor=a.ignore;V.LoadedTemplates=new O.New$5();V.LocalTemplatesLoaded=false;V.GlobalHoles=new O.New$5();V.TextHoleRE="\\${([^}]+)}";V.RenderedFullDocTemplate=null;};W=N.HashSet=bL.Class({Add:function(bO){return this.add(bO);},Contains:function(bO){var bP;bP=this.data[this.hash(bO)];return bP==null?false:this.arrContains(bO,bP);},add:function(bO){var bP,bQ;bP=this.hash(bO);bQ=this.data[bP];return bQ==null?(this.data[bP]=[bO],this.count=this.count+1,true):this.arrContains(bO,bQ)?false:(bQ.push(bO),this.count=this.count+1,true);},arrContains:function(bO,bP){var bQ,bR,bS,bT;bQ=true;bR=0;bT=bP.length;while(bQ&&bR<bT)if(this.equals.apply(null,[bP[bR],bO]))bQ=false;else bR=bR+1;return!bQ;},ExceptWith:function(bO){var bP;bP=Q.Get(bO);try{while(bP.MoveNext())this.Remove(bP.Current());}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bO){var bP,bQ,bR,bS;bP=0;bQ=bp.concat(this.data);for(bR=0,bS=bQ.length-1;bR<=bS;bR++)o.set(bO,bR,bQ[bR]);},IntersectWith:function(bO){var bP,bQ,bR,bS,bT;bP=new W.New$4(bO,this.equals,this.hash);bQ=bp.concat(this.data);for(bR=0,bS=bQ.length-1;bR<=bS;bR++){bT=bQ[bR];if(!bP.Contains(bT))this.Remove(bT);}},Remove:function(bO){var bP;bP=this.data[this.hash(bO)];return bP==null?false:this.arrRemove(bO,bP)&&(this.count=this.count-1,true);},arrRemove:function(bO,bP){var bQ,bR,bS,bT;bQ=true;bR=0;bT=bP.length;while(bQ&&bR<bT)if(this.equals.apply(null,[bP[bR],bO])){bP.splice.apply(bP,[bR,1]);bQ=false;}else bR=bR+1;return!bQ;},GetEnumerator:function(){return Q.Get(bp.concat(this.data));},GetEnumerator0:function(){return Q.Get(bp.concat(this.data));}},t,W);W.New$3=bL.Ctor(function(){W.New$4.call(this,[],m.Equals,m.Hash);},W);W.New$4=bL.Ctor(function(bO,bP,bQ){var bR;t.New.call(this);this.equals=bP;this.hash=bQ;this.data=[];this.count=0;bR=Q.Get(bO);try{while(bR.MoveNext())this.add(bR.Current());}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}},W);W.New$2=bL.Ctor(function(bO){W.New$4.call(this,bO,m.Equals,m.Hash);},W);X=S.ArrayStorage=bL.Class({SRemoveIf:function(bO,bP){return o.filter(function(bQ){return!bO(bQ);},bP);},SSet:function(bO){return o.ofSeq(bO);},SSetAt:function(bO,bP,bQ){o.set(bQ,bO,bP);return bQ;},SAppend:function(bO,bP){bP.push(bO);return bP;},SInit:function(){return this.init;}},t,X);X.New=bL.Ctor(function(bO){t.New.call(this);this.init=bO;},X);Y=r.Elt=bL.Class({},B,Y);Y.New=function(bO,bP,bQ){var bR,bS;bR=P.CreateElemNode(bO,bP,bQ.docNode);bS=$.Create(bQ.updates);return new Y.New$1({$:1,$0:bR},s.Map2Unit(L.Updates(bR.Attr),bS.v),bO,bS);};Y.New$1=bL.Ctor(function(bO,bP,bQ,bR){B.New.call(this,bO,bP);this.docNode$1=bO;this.updates$1=bP;this.elt=bQ;this.rvUpdates=bR;},Y);Z.ofSeqNonCopying=function(bO){var bP,bQ;if(bO instanceof a.Array)return bO;else if(bO instanceof K)return o.ofList(bO);else if(bO===null)return[];else{bP=[];bQ=Q.Get(bO);try{while(bQ.MoveNext())bP.push(bQ.Current());return bP;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}}};Z.TreeReduce=function(bO,bP,bQ){var bR;function bS(bT){return function(bU){var bV,bW;return bU<=0?bO:bU===1&&(bT>=0&&bT<bR)?o.get(bQ,bT):(bW=bU/2>>0,bP((bS(bT))(bW),(bS(bT+bW))(bU-bW)));};}bR=o.length(bQ);return(bS(0))(bR);};Z.mapInPlace=function(bO,bP){var bQ,bR;for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++)bP[bQ]=bO(bP[bQ]);return bP;};Z.MapTreeReduce=function(bO,bP,bQ,bR){var bS;function bT(bU){return function(bV){var bW,bX;return bV<=0?bP:bV===1&&(bU>=0&&bU<bS)?bO(o.get(bR,bU)):(bX=bV/2>>0,bQ((bT(bU))(bX),(bT(bU+bX))(bV-bX)));};}bS=o.length(bR);return(bT(0))(bS);};_0=r.DocElemNode=bL.Class({Equals:function(bO){return this.ElKey===bO.ElKey;},GetHashCode:function(){return this.ElKey;}},null,_0);_0.New=function(bO,bP,bQ,bR,bS,bT){var bU;return new _0((bU={Attr:bO,Children:bP,El:bR,ElKey:bS},(bL.SetOptional(bU,"Delimiters",bQ),bL.SetOptional(bU,"Render",bT),bU)));};_2.notPresent=function(){return l.FailWith("The given key was not present in the dictionary.");};_3.convertTextNode=function(bO){var bP,bQ,bR,bS,bT,bU;bP=null;bQ=0;bS=bO.textContent;bT=new a.RegExp(E.TextHoleRE(),"g");while(bP=bT.exec(bS),bP!==null){bO.parentNode.insertBefore(self.document.createTextNode(_4.string(bS,{$:1,$0:bQ},{$:1,$0:bT.lastIndex-o.get(bP,0).length-1})),bO);bQ=bT.lastIndex;bU=self.document.createElement("span");bU.setAttribute("ws-replace",o.get(bP,1).toLowerCase());bO.parentNode.insertBefore(bU,bO);}bT.lastIndex=0;bO.textContent=_4.string(bS,{$:1,$0:bQ},null);};_3.failNotLoaded=function(bO){bM.warn("Instantiating non-loaded template",bO);};_3.fillTextHole=function(bO,bP,bQ){var bR;bR=bO.querySelector("[ws-replace]");return m.Equals(bR,null)?(bM.warn("Filling non-existent text hole",bQ),null):(bR.parentNode.replaceChild(self.document.createTextNode(bP),bR),{$:1,$0:bR.getAttribute("ws-replace")});};_3.removeHolesExcept=function(bO,bP){function bQ(bR){E.foreachNotPreserved(bO,"["+bR+"]",function(bS){if(!bP.Contains(bS.getAttribute(bR)))bS.removeAttribute(bR);});}bQ("ws-attr");bQ("ws-onafterrender");bQ("ws-var");E.foreachNotPreserved(bO,"[ws-hole]",function(bR){if(!bP.Contains(bR.getAttribute("ws-hole"))){bR.removeAttribute("ws-hole");while(bR.hasChildNodes())bR.removeChild(bR.lastChild);}});E.foreachNotPreserved(bO,"[ws-replace]",function(bR){if(!bP.Contains(bR.getAttribute("ws-replace")))bR.parentNode.removeChild(bR);});E.foreachNotPreserved(bO,"[ws-on]",function(bR){bR.setAttribute("ws-on",y.concat(" ",o.filter(function(bS){return bP.Contains(o.get(y.SplitChars(bS,[":"],1),1));},y.SplitChars(bR.getAttribute("ws-on"),[" "],1))));});E.foreachNotPreserved(bO,"[ws-attr-holes]",function(bR){var bS,bT,bU,bV,bW;bS=y.SplitChars(bR.getAttribute("ws-attr-holes"),[" "],1);for(bT=0,bU=bS.length-1;bT<=bU;bT++){bV=o.get(bS,bT);bR.setAttribute(bV,(bW=new a.RegExp(E.TextHoleRE(),"g"),bR.getAttribute(bV).replace(bW,function(bX,bY){return bP.Contains(bY)?bX:"";})));}});};_3.fillInstanceAttrs=function(bO,bP){var bQ,bR,bS,bT,bU;_3.convertAttrs(bP);bQ=bP.nodeName.toLowerCase();bR=bO.querySelector("[ws-attr="+bQ+"]");if(m.Equals(bR,null))bM.warn("Filling non-existent attr hole",bQ);else{bR.removeAttribute("ws-attr");for(bS=0,bT=bP.attributes.length-1;bS<=bT;bS++){bU=bP.attributes.item(bS);if(bU.name==="class"&&bR.hasAttribute("class"))bR.setAttribute("class",bR.getAttribute("class")+" "+bU.nodeValue);else bR.setAttribute(bU.name,bU.nodeValue);}}};_3.mapHoles=function(bO,bP){function bQ(bR){E.foreachNotPreserved(bO,"["+bR+"]",function(bS){var bT,bU;bT=(bU=null,[bP.TryGetValue(bS.getAttribute(bR).toLowerCase(),{get:function(){return bU;},set:function(bV){bU=bV;}}),bU]);if(bT[0])bS.setAttribute(bR,bT[1]);});}bQ("ws-hole");bQ("ws-replace");bQ("ws-attr");bQ("ws-onafterrender");bQ("ws-var");E.foreachNotPreserved(bO,"[ws-on]",function(bR){bR.setAttribute("ws-on",y.concat(" ",o.map(function(bS){var bT,bU,bV;bT=y.SplitChars(bS,[":"],1);bU=(bV=null,[bP.TryGetValue(o.get(bT,1),{get:function(){return bV;},set:function(bW){bV=bW;}}),bV]);return bU[0]?o.get(bT,0)+":"+bU[1]:bS;},y.SplitChars(bR.getAttribute("ws-on"),[" "],1))));});E.foreachNotPreserved(bO,"[ws-attr-holes]",function(bR){var bS,bT,bU;bS=y.SplitChars(bR.getAttribute("ws-attr-holes"),[" "],1);for(bT=0,bU=bS.length-1;bT<=bU;bT++)(function(){var bV;function bW(bX,bY){var bZ;bZ=l.KeyValue(bY);return bX.replace(new a.RegExp("\\${"+bZ[0]+"}","ig"),"${"+bZ[1]+"}");}bV=o.get(bS,bT);return bR.setAttribute(bV,(((bL.Curried3(H.fold))(bW))(bR.getAttribute(bV)))(bP));}());});};_3.fill=function(bO,bP,bQ){while(true)if(bO.hasChildNodes())bQ=bP.insertBefore(bO.lastChild,bQ);else return null;};_3.convertAttrs=function(bO){var bQ,bR,bS,bT,bU,bV,bW,bX;function bP(bY){var bZ;bZ=bO.getAttribute(bY);if(bZ===null);else bO.setAttribute(bY,bZ.toLowerCase());}bQ=bO.attributes;bR=[];bS=[];bT=[];for(bU=0,bV=bQ.length-1;bU<=bV;bU++){bW=bQ.item(bU);if(y.StartsWith(bW.nodeName,"ws-on")&&bW.nodeName!=="ws-onafterrender"&&bW.nodeName!=="ws-on"){bR.push(bW.nodeName);bS.push(_4.string(bW.nodeName,{$:1,$0:"ws-on".length},null)+":"+bW.nodeValue.toLowerCase());}else!y.StartsWith(bW.nodeName,"ws-")&&(new a.RegExp(E.TextHoleRE())).test(bW.nodeValue)?(bW.nodeValue=(bX=new a.RegExp(E.TextHoleRE(),"g"),bW.nodeValue.replace(bX,function(bY,bZ){return"${"+bZ.toLowerCase()+"}";})),bT.push(bW.nodeName)):void 0;}if(!(bS.length==0))bO.setAttribute("ws-on",y.concat(" ",bS));if(!(bT.length==0))bO.setAttribute("ws-attr-holes",y.concat(" ",bT));bP("ws-hole");bP("ws-replace");bP("ws-attr");bP("ws-onafterrender");bP("ws-var");o.iter(function(bY){bO.removeAttribute(bY);},bR);};_4.string=function(bO,bP,bQ){var bR,bS;return bP==null?bQ!=null&&bQ.$==1?(bR=bQ.$0,bR<0?"":bO.slice(0,bR+1)):"":bQ==null?bO.slice(bP.$0):(bS=bQ.$0,bS<0?"":bO.slice(bP.$0,bS+1));};H.insufficient=function(){return l.FailWith("The input sequence has an insufficient number of elements.");};H.nonNegative=function(){return l.FailWith("The input must be non-negative.");};_5=N.KeyCollection=bL.Class({GetEnumerator$1:function(){return Q.Get(H.map(function(bO){return bO.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},t,_5);_5.New=bL.Ctor(function(bO){t.New.call(this);this.d=bO;},_5);_6.get_UseAnimations=function(){return bg.UseAnimations();};_6.Play=function(bO){var bP;bP=null;return bf.Delay(function(){return bf.Bind(_6.Run(a.ignore,bg.Actions(bO)),function(){bg.Finalize(bO);return bf.Return(null);});});};_6.Append=function(bO,bP){return{$:0,$0:bo.Append(bO.$0,bP.$0)};};_6.Run=function(bO,bP){var bQ;function bR(bS){function bT(bU){return function(bV){var bW;bW=bV-bU;bP.Compute(bW);bO();return bW<=bQ?void a.requestAnimationFrame(function(bX){(bT(bU))(bX);}):bS();};}a.requestAnimationFrame(function(bU){(bT(bU))(bU);});}bQ=bP.Duration;return bQ===0?bf.Zero():bf.FromContinuations(function(bS,bT,bU){return bR.apply(null,[bS,bT,bU]);});};_6.Concat=function(bO){return{$:0,$0:bo.Concat(H.map(bg.List,bO))};};_7.BatchUpdatesEnabled=function(){bh.$cctor();return bh.BatchUpdatesEnabled;};_9.StartProcessor=function(bO){var bP;function bQ(){var bR;bR=null;return bf.Delay(function(){return bf.Bind(bO,function(){var bS;bS=bP[0];return m.Equals(bS,1)?(bP[0]=0,bf.Zero()):m.Equals(bS,2)?(bP[0]=1,bQ()):bf.Zero();});});}bP=[0];return function(){var bR;bR=bP[0];if(m.Equals(bR,0)){bP[0]=1;bf.Start(bQ(),null);}else m.Equals(bR,1)?bP[0]=2:void 0;};};_=r.Var$1=bL.Class({},t,_);_.Set=function(bO,bP){bO.Set(bP);};_.Create$1=function(bO){return new bj.New(false,F.New({$:2,$0:bO,$1:[]}),bO);};$=r.Updates=bL.Class({},null,$);$.Create=function(bO){var bP;bP=null;bP=$.New(bO,null,function(){var bQ;bQ=bP.s;return bQ===null?(bQ=F.Copy(bP.c()),bP.s=bQ,F.WhenObsoleteRun(bQ,function(){bP.s=null;}),bQ):bQ;});return bP;};$.New=function(bO,bP,bQ){return new $({c:bO,s:bP,v:bQ});};bb.New=function(bO,bP,bQ,bR){var bS;bS={DynElem:bO,DynFlags:bP,DynNodes:bQ};bL.SetOptional(bS,"OnAfterRender",bR);return bS;};bd.New=function(bO,bP){return{PreviousNodes:bO,Top:bP};};be.get_Empty=function(){return{$:0,$0:new W.New$3()};};be.FindAll=function(bO){var bP;function bQ(bT,bU){var bV,bW,bX,bY,bZ;while(true)switch(bT){case 0:if(bU!=null&&bU.$==0){bW=bU.$1;bX=bU.$0;bQ(0,bX);bU=bW;}else if(bU!=null&&bU.$==1){bY=bU.$0;bU=bY;bT=1;}else if(bU!=null&&bU.$==2){bZ=bU.$0;bU=bZ.Current;}else return bU!=null&&bU.$==6?(bV=bU.$0.Holes,(function(b0){return function(b1){o.iter(b0,b1);};}(bS))(bV)):null;break;case 1:bP.push(bU);bU=bU.Children;bT=0;break;}}function bR(bT){return bQ(0,bT);}function bS(bT){return bQ(1,bT);}bP=[];bR(bO);return{$:0,$0:new W.New$2(bP)};};be.Filter=function(bO,bP){return{$:0,$0:by.Filter(bO,bP.$0)};};be.Except=function(bO,bP){return{$:0,$0:by.Except(bO.$0,bP.$0)};};be.ToArray=function(bO){return by.ToArray(bO.$0);};be.Intersect=function(bO,bP){return{$:0,$0:by.Intersect(bO.$0,bP.$0)};};bf.Delay=function(bO){return function(bP){try{(bO(null))(bP);}catch(bQ){bP.k({$:1,$0:bQ});}};};bf.Bind=function(bO,bP){return bf.checkCancel(function(bQ){bO(bv.New(function(bR){var bS;if(bR.$==0){bS=bR.$0;bf.scheduler().Fork(function(){try{(bP(bS))(bQ);}catch(bT){bQ.k({$:1,$0:bT});}});}else bf.scheduler().Fork(function(){bQ.k(bR);});},bQ.ct));});};bf.Zero=function(){bw.$cctor();return bw.Zero;};bf.Start=function(bO,bP){var bQ,bR;bQ=(bR=(bf.defCTS())[0],bP==null?bR:bP.$0);bf.scheduler().Fork(function(){if(!bQ.c)bO(bv.New(function(bS){if(bS.$==1)bf.UncaughtAsyncError(bS.$0);},bQ));});};bf.Return=function(bO){return function(bP){bP.k({$:0,$0:bO});};};bf.scheduler=function(){bw.$cctor();return bw.scheduler;};bf.checkCancel=function(bO){return function(bP){if(bP.ct.c)bf.cancel(bP);else bO(bP);};};bf.defCTS=function(){bw.$cctor();return bw.defCTS;};bf.UncaughtAsyncError=function(bO){bM.log("WebSharper: Uncaught asynchronous exception",bO);};bf.FromContinuations=function(bO){return function(bP){var bQ;function bR(bS){if(bQ[0])l.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bQ[0]=true;bf.scheduler().Fork(bS);}}bQ=[false];bO(function(bS){bR(function(){bP.k({$:0,$0:bS});});},function(bS){bR(function(){bP.k({$:1,$0:bS});});},function(bS){bR(function(){bP.k({$:2,$0:bS});});});};};bf.cancel=function(bO){bO.k({$:2,$0:new bE.New(bO.ct)});};bg.UseAnimations=function(){bn.$cctor();return bn.UseAnimations;};bg.Actions=function(bO){return bg.ConcatActions(o.choose(function(bP){return bP.$==1?{$:1,$0:bP.$0}:null;},bo.ToArray(bO.$0)));};bg.Finalize=function(bO){o.iter(function(bP){if(bP.$==0)bP.$0();},bo.ToArray(bO.$0));};bg.ConcatActions=function(bO){var bP,bQ,bR,bS;bP=Z.ofSeqNonCopying(bO);bQ=o.length(bP);return bQ===0?bg.Const():bQ===1?o.get(bP,0):(bR=H.max(H.map(function(bT){return bT.Duration;},bP)),(bS=o.map(function(bT){return bg.Prolong(bR,bT);},bP),bg.Def(bR,function(bT){o.iter(function(bU){bU.Compute(bT);},bS);})));};bg.List=function(bO){return bO.$0;};bg.Const=function(bO){return bg.Def(0,function(){return bO;});};bg.Def=function(bO,bP){return{Compute:bP,Duration:bO};};bg.Prolong=function(bO,bP){var bQ,bR,bS;bQ=bP.Compute;bR=bP.Duration;bS=bF.Create(function(){return bP.Compute(bP.Duration);});return{Compute:function(bT){return bT>=bR?bS.f():bQ(bT);},Duration:bO};};bh.$cctor=function(){bh.$cctor=a.ignore;bh.BatchUpdatesEnabled=true;};bi.Clear=function(bO){bO.splice(0,o.length(bO));};bj=r.ConcreteVar=bL.Class({Set:function(bO){if(this.isConst)(function(bP){return bP("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bP){bM.log(bP);}));else{F.Obsolete(this.snap);this.current=bO;this.snap=F.New({$:2,$0:bO,$1:[]});}},Get:function(){return this.current;},get_View:function(){return this.view;},UpdateMaybe:function(bO){var bP;bP=bO(this.Get());if(bP!=null&&bP.$==1)this.Set(bP.$0);}},C,bj);bj.New=bL.Ctor(function(bO,bP,bQ){var bR;bR=this;C.New.call(this);this.isConst=bO;this.current=bQ;this.snap=bP;this.view=function(){return bR.snap;};this.id=bk.Int();},bj);bk.Int=function(){bk.set_counter(bk.counter()+1);return bk.counter();};bk.set_counter=function(bO){bz.$cctor();bz.counter=bO;};bk.counter=function(){bz.$cctor();return bz.counter;};bl.$cctor=function(){var bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX;bl.$cctor=a.ignore;bl.EmptyAttr=null;bl.BoolCheckedApply=function(bY){function bZ(b0,b1){return b1!=null&&b1.$==1?void(b0.checked=b1.$0):null;}return[function(b0){b0.addEventListener("change",function(){return!m.Equals(bY.Get(),b0.checked)?bY.Set(b0.checked):null;});},function(b0){return function(b1){return bZ(b0,b1);};},s.Map(function(b0){return{$:1,$0:b0};},bY.get_View())];};bl.StringSet=function(bY){return function(bZ){bY.value=bZ;};};bl.StringGet=function(bY){return{$:1,$0:bY.value};};bl.StringApply=(bO=bq.StringGet(),(bP=bq.StringSet(),function(bY){return bq.ApplyValue(bO,bP,bY);}));bl.IntSetUnchecked=function(bY){return function(bZ){bY.value=a.String(bZ);};};bl.IntGetUnchecked=function(bY){var bZ,b0;bZ=bY.value;return br.isBlank(bZ)?{$:1,$0:0}:(b0=+bZ,b0!==b0>>0?null:{$:1,$0:b0});};bl.IntApplyUnchecked=(bQ=bq.IntGetUnchecked(),(bR=bq.IntSetUnchecked(),function(bY){return bq.ApplyValue(bQ,bR,bY);}));bl.IntSetChecked=function(bY){return function(bZ){var b0;b0=bZ.get_Input();return bY.value!==b0?void(bY.value=b0):null;};};bl.IntGetChecked=function(bY){var bZ,b0,b1;bZ=bY.value;return{$:1,$0:br.isBlank(bZ)?(bY.checkValidity?bY.checkValidity():true)?new bs({$:2,$0:bZ}):new bs({$:1,$0:bZ}):(b0=(b1=0,[U.TryParseInt32(bZ,{get:function(){return b1;},set:function(b2){b1=b2;}}),b1]),b0[0]?new bs({$:0,$0:b0[1],$1:bZ}):new bs({$:1,$0:bZ}))};};bl.IntApplyChecked=(bS=bq.IntGetChecked(),(bT=bq.IntSetChecked(),function(bY){return bq.ApplyValue(bS,bT,bY);}));bl.FloatSetUnchecked=function(bY){return function(bZ){bY.value=a.String(bZ);};};bl.FloatGetUnchecked=function(bY){var bZ,b0;bZ=bY.value;return br.isBlank(bZ)?{$:1,$0:0}:(b0=+bZ,a.isNaN(b0)?null:{$:1,$0:b0});};bl.FloatApplyUnchecked=(bU=bq.FloatGetUnchecked(),(bV=bq.FloatSetUnchecked(),function(bY){return bq.ApplyValue(bU,bV,bY);}));bl.FloatSetChecked=function(bY){return function(bZ){var b0;b0=bZ.get_Input();return bY.value!==b0?void(bY.value=b0):null;};};bl.FloatGetChecked=function(bY){var bZ,b0;bZ=bY.value;return{$:1,$0:br.isBlank(bZ)?(bY.checkValidity?bY.checkValidity():true)?new bs({$:2,$0:bZ}):new bs({$:1,$0:bZ}):(b0=+bZ,a.isNaN(b0)?new bs({$:1,$0:bZ}):new bs({$:0,$0:b0,$1:bZ}))};};bl.FloatApplyChecked=(bW=bq.FloatGetChecked(),(bX=bq.FloatSetChecked(),function(bY){return bq.ApplyValue(bW,bX,bY);}));};bm.$cctor=function(){var bO;bm.$cctor=a.ignore;bm.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bm.rtagName=new a.RegExp("<([\\w:]+)");bm.rhtml=new a.RegExp("<|&#?\\w+;");bm.wrapMap=(bO=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:bO,tbody:bO,tfoot:bO,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bm.defaultWrap=[0,"",""];};bn.$cctor=function(){bn.$cctor=a.ignore;bn.CubicInOut=bu.Custom(function(bO){var bP;bP=bO*bO;return 3*bP-2*(bP*bO);});bn.UseAnimations=true;};bo.Append=function(bO,bP){return bO.$==0?bP:bP.$==0?bO:{$:2,$0:bO,$1:bP};};bo.ToArray=function(bO){var bP;function bQ(bR){var bS,bT;while(true)if(bR.$==1)return bP.push(bR.$0);else if(bR.$==2){bS=bR.$1;bT=bR.$0;bQ(bT);bR=bS;}else return bR.$==3?o.iter(function(bU){bP.push(bU);},bR.$0):null;}bP=[];bQ(bO);return bP.slice(0);};bo.Concat=function(bO){var bP;bP=Z.ofSeqNonCopying(bO);return Z.TreeReduce(bo.Empty(),bo.Append,bP);};bo.Empty=function(){bG.$cctor();return bG.Empty;};bp.concat=function(bO){var bP,bQ;bP=[];for(var bR in bO)bP.push.apply(bP,bO[bR]);return bP;};bq.ApplyValue=function(bO,bP,bQ){var bR;function bS(bT,bU){return bU==null?null:bT(bU.$0);}bR=null;return[function(bT){function bU(){bQ.UpdateMaybe(function(bV){var bW;bR=bO(bT);return bR!=null&&bR.$==1&&(!m.Equals(bR.$0,bV)&&(bW=[bR,bR.$0],true))?bW[0]:null;});}bT.addEventListener("change",bU);bT.addEventListener("input",bU);bT.addEventListener("keypress",bU);},function(bT){var bU;bU=bP(bT);return function(bV){return bS(bU,bV);};},s.Map(function(bT){var bU;return bR!=null&&bR.$==1&&(m.Equals(bR.$0,bT)&&(bU=bR.$0,true))?null:{$:1,$0:bT};},bQ.get_View())];};bq.StringSet=function(){bl.$cctor();return bl.StringSet;};bq.StringGet=function(){bl.$cctor();return bl.StringGet;};bq.IntSetUnchecked=function(){bl.$cctor();return bl.IntSetUnchecked;};bq.IntGetUnchecked=function(){bl.$cctor();return bl.IntGetUnchecked;};bq.IntSetChecked=function(){bl.$cctor();return bl.IntSetChecked;};bq.IntGetChecked=function(){bl.$cctor();return bl.IntGetChecked;};bq.FloatSetUnchecked=function(){bl.$cctor();return bl.FloatSetUnchecked;};bq.FloatGetUnchecked=function(){bl.$cctor();return bl.FloatGetUnchecked;};bq.FloatSetChecked=function(){bl.$cctor();return bl.FloatSetChecked;};bq.FloatGetChecked=function(){bl.$cctor();return bl.FloatGetChecked;};br.isBlank=function(bO){return y.forall(bA.IsWhiteSpace,bO);};bs=r.CheckedInput=bL.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,bs);bt=bf.Scheduler=bL.Class({Fork:function(bO){var bP;bP=this;this.robin.push(bO);if(this.idle){this.idle=false;a.setTimeout(function(){bP.tick();},0);}},tick:function(){var bO,bP,bQ;bP=this;bQ=bN.now();bO=true;while(bO)if(this.robin.length===0){this.idle=true;bO=false;}else{(this.robin.shift())();bN.now()-bQ>40?(a.setTimeout(function(){bP.tick();},0),bO=false):void 0;}}},t,bt);bt.New=bL.Ctor(function(){t.New.call(this);this.idle=true;this.robin=[];},bt);bu=r.Easing=bL.Class({},t,bu);bu.Custom=function(bO){return new bu.New(bO);};bu.New=bL.Ctor(function(bO){t.New.call(this);this.transformTime=bO;},bu);bv.New=function(bO,bP){return{k:bO,ct:bP};};bw.$cctor=function(){bw.$cctor=a.ignore;bw.noneCT=bx.New(false,[]);bw.scheduler=new bt.New();bw.defCTS=[new bB.New()];bw.Zero=bf.Return();bw.GetCT=function(bO){bO.k({$:0,$0:bO.ct});};};bx.New=function(bO,bP){return{c:bO,r:bP};};by.Filter=function(bO,bP){return new W.New$2(o.filter(bO,by.ToArray(bP)));};by.Except=function(bO,bP){var bQ;bQ=new W.New$2(by.ToArray(bP));bQ.ExceptWith(by.ToArray(bO));return bQ;};by.ToArray=function(bO){var bP;bP=o.create(bO.get_Count(),void 0);bO.CopyTo(bP);return bP;};by.Intersect=function(bO,bP){var bQ;bQ=new W.New$2(by.ToArray(bO));bQ.IntersectWith(by.ToArray(bP));return bQ;};bz.$cctor=function(){bz.$cctor=a.ignore;bz.counter=0;};bA.IsWhiteSpace=function(bO){return bO.match(new a.RegExp("\\s"))!==null;};U.TryParse=function(bO,bP,bQ,bR){var bS,bT;bS=+bO;bT=bS===bS-bS%1&&bS>=bP&&bS<=bQ;if(bT)bR.set(bS);return bT;};bB=i.CancellationTokenSource=bL.Class({},t,bB);bB.New=bL.Ctor(function(){t.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bB);bC.Children=function(bO,bP){var bQ,bR,bS;if(bP!=null&&bP.$==1){bS=[];bQ=bP.$0[0].nextSibling;while(bQ!==bP.$0[1]){bS.push(bQ);bQ=bQ.nextSibling;}return{$:0,$0:bS};}else return{$:0,$0:o.init(bO.childNodes.length,(bR=bO.childNodes,function(bT){return bR[bT];}))};};bC.Except=function(bO,bP){var bQ;bQ=bO.$0;return{$:0,$0:o.filter(function(bR){return o.forall(function(bS){return!(bR===bS);},bQ);},bP.$0)};};bC.Iter=function(bO,bP){o.iter(bO,bP.$0);};bC.DocChildren=function(bO){var bP;function bQ(bR){var bS,bT,bU,bV;while(true){if(bR!=null&&bR.$==2){bT=bR.$0;bR=bT.Current;}else if(bR!=null&&bR.$==1)return bP.push(bR.$0.El);else if(bR==null)return null;else if(bR!=null&&bR.$==5)return bP.push(bR.$0);else if(bR!=null&&bR.$==4)return bP.push(bR.$0.Text);else if(bR!=null&&bR.$==6){bS=bR.$0.Els;return(function(bW){return function(bX){o.iter(bW,bX);};}(function(bW){if(bW==null||bW.constructor===R)bQ(bW);else bP.push(bW);}))(bS);}else{bU=bR.$1;bV=bR.$0;bQ(bV);bR=bU;}}}bP=[];bQ(bO.Children);return{$:0,$0:Z.ofSeqNonCopying(bP)};};bE=i.OperationCanceledException=bL.Class({},bD,bE);bE.New=bL.Ctor(function(bO){bE.New$1.call(this,"The operation was canceled.",null,bO);},bE);bE.New$1=bL.Ctor(function(bO,bP,bQ){this.message=bO;this.inner=bP;R.setPrototypeOf(this,bE.prototype);this.ct=bQ;},bE);bF.Create=function(bO){return bI.New(false,bO,bF.forceLazy);};bF.forceLazy=function(){var bO;bO=this.v();this.c=true;this.v=bO;this.f=bF.cachedLazy;return bO;};bF.cachedLazy=function(){return this.v;};bG.$cctor=function(){bG.$cctor=a.ignore;bG.Empty={$:0};};bI.New=function(bO,bP,bQ){return{c:bO,v:bP,f:bQ};};bL.OnLoad(function(){b.Main();});}(self));


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
