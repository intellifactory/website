<!DOCTYPE html>
<html lang="en">
  <head>
    <title>XML computation expressions: Playing around with extending the F# compiler</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=DM+Sans:400,500,700&amp;subset=latin" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&amp;display=swap" />
    <link rel="stylesheet" href="/css/tailwind/tailwind.css" />
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-tailwind.png" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js" type="text/javascript" charset="UTF-8"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/languages/fsharp.min.js" type="text/javascript" charset="UTF-8"></script><link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/far.min.css"></link>

    <script src="/js/main.js"></script>
  </head>
  <body class="antialiased bg-body text-body font-body">
    <div>
      <section class="px-4 lg:px-10 bg-gray-800 px-2">
        <nav class="relative flex justify-between items-center py-2"><a class="text-2xl text-white font-bold" href="/"><span>Intelli</span>            <span class="text-blue-500 -ml-1">Factory</span></a>
          <div class="lg:hidden">
            <button class="p-2 navbar-burger">
              <svg class="w-10 h-3" width="39" height="13" viewbox="0 0 39 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="39" height="2" rx="1" fill="#C4C4C4"></rect>
                <rect x="19" y="11" width="20" height="2" rx="1" fill="#C4C4C4"></rect>
              </svg>
            </button>
          </div>
          <div class="hidden lg:block ml-auto mr-1">
            <ul class="flex items-center text-white space-x-10">
              <li><a class="text-white font-bold text-lg" href="/">Home</a></li>
              <li><a class="text-white font-bold text-lg" href="/oss">Open Source</a></li>
              <li><a class="text-white font-bold text-lg" href="/blogs">Blogs</a></li>
              <li><a class="text-white font-bold text-lg" href="/careers">Careers</a></li>
              <li><a class="text-white font-bold text-lg" href="/contact">Contact</a></li>
            </ul>
          </div>
        </nav>
        <div class="hidden navbar-menu fixed top-0 left-0 bottom-0 w-5/6 max-w-sm z-50">
          <div class="navbar-backdrop fixed inset-0 bg-gray-800 opacity-80"></div>
          <nav class="relative flex flex-col py-8 h-full w-full bg-white overflow-y-auto">
            <div class="flex items-center mb-16 pr-6"><a class="ml-10 text-2xl text-gray-800 font-bold" href="/"><img class="h-7" src="/img/if-logo-long.png" alt="IntelliFactory" /></a></div>
            <div>
              <ul>
                <li class="mb-1 px-10"><a class="block pl-8 py-4 text-xl text-gray-800 hover:bg-blueGray-50 rounded-xl" href="/">Home</a></li>
                <li class="mb-1 px-10"><a class="block pl-8 py-4 text-xl text-gray-800 hover:bg-blueGray-50 rounded-xl" href="/oss">Open Source</a></li>
                <li class="mb-1 px-10"><a class="block pl-8 py-4 text-xl text-gray-800 hover:bg-blueGray-50 rounded-xl" href="/blogs">Blogs</a></li>
                <li class="mb-1 px-10"><a class="block pl-8 py-4 text-xl text-gray-800 hover:bg-blueGray-50 rounded-xl" href="/careers">Careers</a></li>
                <li class="mb-1 px-10"><a class="block pl-8 py-4 text-xl text-gray-800 hover:bg-blueGray-50 rounded-xl" href="/contact">Contact</a></li>
              </ul>
            </div>
            <div class="mt-auto px-10">
              <p class="mt-6 mb-4 text-lg text-center"><span>2004-2021 © IntelliFactory. All rights reserved.</span></p>
            </div>
          </nav>
        </div>
      </section>
      
      <section class="relative py-20 2xl:py-40 overflow-hidden">
        <div class="container px-4 mx-auto">
          <div class="max-w-4xl mx-auto text-center">
            <h2 class="bg-opacity-25 bg-gray-900 mb-14 text-6xl lg:text-7xl font-bold font-heading text-white">XML computation expressions: Playing around with extending the F# compiler</h2>
          </div><img class="absolute top-0 left-0 w-full h-full object-cover" style="z-index:-10;" src="/img/category0.jpg" alt="" />
        </div>
      </section>
      <section class="relative py-10 2xl:py-20 overflow-hidden">
        <div class="container px-4 mx-auto">
          <div class="max-w-4xl mx-auto text-center">
            <div class="inline-flex items-center"><a href=""><img class="mr-8 w-20 lg:w-24 h-20 lg:h-24 rounded-full" src="/img/avatar/denuziere.png" alt="Loic Denuziere" /></a>
              <div class="flex-1 text-left"><a href="">
                  <h4 class="mb-1 text-2xl font-bold">Loic Denuziere</h4></a>
                <p>Jun 30, 2013</p>
              </div>
              <div class="text-right ml-20">
                <p class="mb-1 font-bold text-xl">Reading time:</p>
                <p>9 mins</p>
              </div>
              <div class="text-right ml-20 mt-3">
                <p class="mb-1 font-bold text-xl">Share via:</p>
                <div><a class="inline-block mr-2" href="https://twitter.com/intent/tweet?text=XML+computation+expressions%3a+Playing+around+with+extending+the+F%23+compiler&amp;url=https%3a%2f%2fintellifactorylabs.com%2fuser%2fdenuziere%2f20130630-xml-computation-expressions-playing-around-with-extending-the-f-compiler">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24" fill="#00acee">
                      <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"></path>
                    </svg></a>                  <a class="inline-block mr-2" href="https://www.linkedin.com/sharing/share-offsite/?url=https%3a%2f%2fintellifactorylabs.com%2fuser%2fdenuziere%2f20130630-xml-computation-expressions-playing-around-with-extending-the-f-compiler">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24" fill="#0e76a8">
                      <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-2 16h-2v-6h2v6zm-1-6.891c-.607 0-1.1-.496-1.1-1.109 0-.612.492-1.109 1.1-1.109s1.1.497 1.1 1.109c0 .613-.493 1.109-1.1 1.109zm8 6.891h-1.998v-2.861c0-1.881-2.002-1.722-2.002 0v2.861h-2v-6h2v1.093c.872-1.616 4-1.736 4 1.548v3.359z"></path>
                    </svg></a>                  <a class="inline-block" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fintellifactorylabs.com%2fuser%2fdenuziere%2f20130630-xml-computation-expressions-playing-around-with-extending-the-f-compiler">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24" fill="#3b5998">
                      <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm3 8h-1.35c-.538 0-.65.221-.65.778v1.222h2l-.209 2h-1.791v7h-3v-7h-2v-2h2v-2.308c0-1.769.931-2.692 3.029-2.692h1.971v3z"></path>
                    </svg></a></div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <section class="py-20 2xl:py-40 bg-white overflow-hidden">
        <div class="container px-4 mx-auto">
          <div class="max-w-4xl mx-auto markdown"><div ws-preserve=""><p>It's been a couple months since <a href="https://groups.google.com/forum/?fromgroups=#!searchin/fsharp-opensource/xml/fsharp-opensource/lvqnyb1CZUA">this discussion</a> in the F# Open-Source mailing list about a unified F# EDSL for XML trees, but I've remained intrigued by this problem and wanting to improve on the solutions proposed. I found <a href="http://fssnip.net/hf">Tomas Petricek's computation expression-based solution</a>, in particular, quite nice in its conciseness and non-reliance on custom operators, which makes it much more intuitive. Its big problem, though, is its complete reliance on side-effects at every level.</p>
<h2 id="so-much-impurity">So much impurity...</h2>
<p>Now, I'm not saying that such an EDSL <em>must</em> be completely pure in order to be even considered. After all, WebSharper's own HTML EDSL relies on side-effects. But at a much smaller scale: for example, in the following code, the only side-effect is done by the <c>(-&lt;)</c> operator, which destructively adds children to a node.</p>
<pre><code class="language-fsharp">let ``WebSharper node`` =
    Div [Class &quot;header&quot;; Id &quot;main-header&quot;] -&lt; [
        Span [Text &quot;This is the contents of the header.&quot;]
        Br []
        Span [Class &quot;clear&quot;]
    ]
</code></pre>
<p>On the other hand, Tomas's EDSL uses a global variable <code>h</code> containing an internal pointer to the current position in the XML tree where the next node will be written. Which means that not only does every single operation (moving up or down in the tree, inserting a node or an attribute) relies on mutation, but a wrong use of a method of <code>h</code> can land you in the wrong place of the tree, potentially throwing an error when closing the computation expression and trying to move up from the root. Ugh... Surely we can do better!</p>
<h2 id="but-at-what-cost">... but at what cost?</h2>
<p>Well, as it turns out, we can't.</p>
<p>At least, not if we want to keep a clean and concise syntax. We could, of course, make use of the <code>yield</code> and <code>yield!</code> keywords, or even <a href="http://msdn.microsoft.com/en-us/library/hh289709.aspx">custom operations</a> if we find these keywords too long.</p>
<pre><code class="language-fsharp">let ``Pure CE, first attempt`` =
    // &quot;attr&quot;, &quot;node&quot; and &quot;nodes&quot; are custom operations here
    div {
        attr (&quot;class&quot;, &quot;header&quot;)
        attr (&quot;id&quot;, &quot;main-header&quot;)
        node (span { text &quot;This is the contents of the header.&quot; })
        nodes [
            br
            span { attr (&quot;class&quot;, &quot;clear&quot;) }
        ]
    }
</code></pre>
<p>... And the result is more cluttered than any of the existing EDSLs. Not good.</p>
<p>Actually, there is a simple reason why a Computation Expression-based XML EDSL needs to be destructive if it must be concise.</p>
<p>For those unfamiliar with the way F# Computation Expressions are implemented, this is how it works: the keyword that you place at the beginning of a CE (<code>async</code>, <code>seq</code>, etc — or in the above code, <code>div</code>) is actually an object, called the builder. Each keyword inside the CE is translated to a method call on the builder according to a set of <a href="http://msdn.microsoft.com/en-us/library/dd233182.aspx">simple desugaring rules</a>.</p>
<p>According to these rules, when a bare expression is met within a CE (<code>{| other-expr; cexpr |}</code>), it is transformed into a sequence of expressions (<code>other-expr; {| cexpr |}</code>). Which means its return value is discarded, and the only useful thing it can do is a side-effect. No way out of this: if we want to use bare expressions, they must be impure.</p>
<h2 id="extending-f-for-fun-well-see-about-profit">Extending F# for fun, we'll see about profit</h2>
<p>At this point, I chose to leave the realm of what can be done, and to enter the realm of what could be done. After all, you never do anything new if you don't start asking &quot;What if?&quot;</p>
<p>What if the bare expression expansion rule was different? What if instead of simply transforming it into a sequence of expressions, it called a new method on the CE, let's call it <code>Sequence</code>, that would perform whatever transformation we want it to?</p>
<p>Well, there's only one way to find out. Off to <a href="https://github.com/fsharp/fsharp">the compiler</a> we go!</p>
<p>This being my first foray into the F# compiler source, it took me some time to find my way around. But fortunately, the change needed to implement the <code>Sequence</code> method ended up being <a href="https://github.com/Tarmil/fsharp/commit/fca70beefb47d005f198eeca3bab1ab7b1d138ef">even smaller</a> than I thought it would be. The first chunk of the diff implements the following transformation:</p>
<pre><code class="language-fsharp">{| other-expr; cexpr |} --&gt; builder.Sequence(other-expr, {| cexpr |})
</code></pre>
<p>and the second chunk implements:</p>
<pre><code class="language-fsharp">{| other-expr |} --&gt; builder.Sequence(other-expr, builder.Zero())
</code></pre>
<p>The nice part about this is, just like the existing <code>Run</code> and <code>Delay</code> methods, if <code>Sequence</code> is not implemented by the builder, then we can just revert to the default behavior, making this change 99% retro-compatible. The only breaking case is if an existing builder happens to have a <code>Sequence</code> method for its own purposes, then this method will be mistaken for an implementation of this feature.</p>
<h2 id="a-better-xml-than-xml">A better XML than XML</h2>
<p>So, back to our XML EDSL business, but now with our custom F# compiler. In the F# Open-Source mailing list thread, Anton Tayanovskyy listed the different cases that our EDSL should be able to concisely represent.</p>
<pre><code class="language-xml">&lt;!-- empty element with no attributes --&gt;
&lt;hr /&gt;

&lt;!-- empty element with attributes --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;foo.css&quot; /&gt;

&lt;!-- empty element with text-only content --&gt;
&lt;title&gt;foo&lt;/title&gt;

&lt;!-- empty element with attributes and text-only content --&gt;
&lt;div id=&quot;main&quot;&gt;foo&lt;/div&gt;

&lt;!-- element with no attributes and element-only content --&gt;
&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;

&lt;!-- element with attributes and element-only content --&gt;
&lt;div id=&quot;main&quot;&gt;&lt;hr/&gt;&lt;/div&gt;

&lt;!-- element (possibly with attributes) with mixed content --&gt;
&lt;div id=&quot;address&quot;&gt;Foo St&lt;br/&gt;Bar Town&lt;/div&gt;
</code></pre>
<p>With our newly implemented CE syntax extension, this is how we'll be able to represent them:</p>
<pre><code class="language-fsharp">// empty element with no attributes
HR

// empty element with attributes
Link { Rel &quot;stylesheet&quot;; HRef &quot;foo.css&quot; }

// empty element with text-only content
Title { &quot;foo&quot; }

// empty element with attributes and text-only content
Div { Id &quot;main&quot; } { &quot;foo&quot; }

// element with no attributes and element-only content
Div { HR }

// element with attributes and element-only content
Div { Id &quot;main&quot; } { HR }

// element (possibly with attributes) with mixed content
Div { Id &quot;address&quot; } { &quot;Foo St&quot;; Br; &quot;Bar Town&quot; }
</code></pre>
<p>Looks pretty cool, doesn't it? <a href="https://gist.github.com/Tarmil/5894620">Here is the implementation.</a> It actually relies on a final couple of tricks, but unlike the previous one, these tricks are entirely legit F# 😃</p>
<h3 id="the-builder">The builder</h3>
<p>The first trick is simple: the node type is the builder! This allows us to have both</p>
<pre><code class="language-fsharp">Div : Node
</code></pre>
<p>and</p>
<pre><code class="language-fsharp">Div { HR } : Node
</code></pre>
<p>Even better, if we have an existing node <code>myNode</code>, then we can add children to it with a CE:</p>
<pre><code class="language-fsharp">myNode { Div }
</code></pre>
<h3 id="attributes">Attributes</h3>
<p>The value carried around by the CE is actually the list of children that will be added to the node. The final creation of the node is done by the <code>Run</code> method, which gets called automatically by the CE desugaring (as shown <a href="http://msdn.microsoft.com/en-us/library/dd233182.aspx">here</a>).</p>
<p>But what about attributes? One thing we could do is, instead of carrying a list of children, carry a pair: a list of children and a list of attributes. But this would allow mixing children and attributes within the same CE:</p>
<pre><code class="language-fsharp">Div { Id &quot;main&quot;; Span { &quot;contents&quot; } }
</code></pre>
<p>and I'm not very fond of the idea: it contradicts this fundamental distinction, in XML, between attributes and child nodes. So I decided instead to take advantage of method overloading. I have two versions of <code>Sequence</code>:</p>
<pre><code class="language-fsharp">type Node =
    // ...
    member this.Sequence (n: Node, l: Node list) = n :: l
    member this.Sequence (a: Attribute, l: Attribute list) = a :: l
</code></pre>
<p>It is now impossible to mix nodes and attributes, because there is no method with arguments <code>Node * Attribute list</code> or vice-versa.</p>
<p>In the end, we have what could be considered two different CEs using the same builder; one for child nodes, and one for attributes. And since the type finally returned by the CE is the builder type, we can chain them:</p>
<pre><code class="language-fsharp">// Using the child node CE
Div { Span }
// Using the attribute CE
Div { Id &quot;main&quot; }
// Chaining both CEs
Div { Id &quot;main&quot; } { Span }
</code></pre>
<h3 id="sequences-of-children">Sequences of children</h3>
<p>It is very common, when building HTML, to need to insert a sequence of children into a parent node. Rows into a table, articles into a page, etc. This is actually, in my opinion, the main weakness of WebSharper's EDSL. It is certainly possible to insert a sequence of children, but not very practical:</p>
<pre><code class="language-fsharp">let childrenToAdd = [Div [Text &quot;c1&quot;]; Div [Text &quot;c2&quot;]]

/// The parent as it would be without the children.
let parent = Div [
    H1 [Text &quot;Title&quot;]
    // We want to put the children here
    Div [Class &quot;footer&quot;]
]

/// First possibility: use yield!, forcing us to add yield to all other children.
let parent' = Div [
    yield H1 [Text &quot;Title&quot;]
    yield! childrenToAdd
    yield Div [Class &quot;footer&quot;]
]

/// Second possibility: use (-&lt;) to break down the children into several sequences.
let parent'' = Div [
    H1 [Text &quot;Title&quot;]
] -&lt; childrenToAdd -&lt; [
    Div [Class &quot;footer&quot;]
]
</code></pre>
<p>Fortunately, our new EDSL can do this better, in two different ways even. The first one is to (ab)use method overloading again:</p>
<pre><code class="language-fsharp">type Node =
    // ...
    member this.Sequence(ns: seq&lt;Node&gt;, l: Node list) = List.ofSeq ns @ l

let childrenToAdd = [ Div { &quot;c1&quot; }; Div { &quot;c2&quot; } ]

let parent = Div {
    H1 { &quot;title&quot; }
    childrenToAdd
    Div { Class &quot;footer&quot; }
}
</code></pre>
<p>The second one is to implement the <code>For</code> method of the CE builder. This allows us to insert for loops right into our XML!</p>
<pre><code class="language-fsharp">let parent = Div {
    H1 { &quot;title&quot; }
    for c = 1 to 2 do
        Div { &quot;c&quot; + string i }
    Div { Class &quot;footer&quot; }
}
</code></pre>
<h2 id="in-conclusion">In conclusion</h2>
<p>Obviously, the EDSL presented here is only a toy and a yearning for what could be; and it will remain so as long as it depends on a custom patched compiler. This being said, with the recent news that the F# team intends to put out <a href="http://blogs.msdn.com/b/fsharpteam/archive/2013/06/27/announcing-a-pre-release-of-f-3-1-and-the-visual-f-tools-in-visual-studio-2013.aspx">more frequent updates to the language</a>, one could imagine a feature similar to <code>Sequence</code> making its way into the official F# compiler some day. Hey, don't blame me for hoping!</p>
</div></div>
        </div>
      </section>
      <section class="py-20 bg-white">
        <div class="container px-4 mx-auto">
          <div class="flex flex-col lg:flex-row lg:justify-between lg:items-center mb-12">
            <div class="lg:w-2/3 lg:pr-16 mb-2 lg:mb-8">
              <h2 class="text-3xl md:text-4xl font-bold font-heading">Read more from </h2>
            </div>
            <div class="text-sm lg:text-base lg:w-1/3">
              <p class="leading-loose text-blueGray-500"><span>Can’t find what you were looking for? </span>                <a class="text-blue-600 hover:text-blue-700" href="/contact">Drop us a line</a>.
                              
              </p>
            </div>
          </div>
          <div class="flex flex-wrap -mx-4">
            <div class="w-full md:w-1/2 lg:w-1/4 px-4 mb-8"><a href="/user/denuziere">
                <div class="inline-flex items-center"><img class="mr-2 w-4 h-4 lg:w-8 lg:h-8 rounded-full" src="/img/avatar/denuziere.png" alt="Loic Denuziere" />
                  <div class="flex-1 text-left"><span class="text-lg font-bold text-blueGray-400">Loic Denuziere</span></div>
                </div></a>              <a href="/user/denuziere/20200523-bolero-0-13-released">
                <h4 class="text-xl font-semibold">Bolero 0.13 released</h4></a>
              <p class="text-sm md:text-base text-blueGray-400">20200523 · 5 min read</p>
            </div><div class="w-full md:w-1/2 lg:w-1/4 px-4 mb-8"><a href="/user/denuziere">
                <div class="inline-flex items-center"><img class="mr-2 w-4 h-4 lg:w-8 lg:h-8 rounded-full" src="/img/avatar/denuziere.png" alt="Loic Denuziere" />
                  <div class="flex-1 text-left"><span class="text-lg font-bold text-blueGray-400">Loic Denuziere</span></div>
                </div></a>              <a href="/user/denuziere/20200323-bolero-0-12-released">
                <h4 class="text-xl font-semibold">Bolero 0.12 released</h4></a>
              <p class="text-sm md:text-base text-blueGray-400">20200323 · 6 min read</p>
            </div><div class="w-full md:w-1/2 lg:w-1/4 px-4 mb-8"><a href="/user/denuziere">
                <div class="inline-flex items-center"><img class="mr-2 w-4 h-4 lg:w-8 lg:h-8 rounded-full" src="/img/avatar/denuziere.png" alt="Loic Denuziere" />
                  <div class="flex-1 text-left"><span class="text-lg font-bold text-blueGray-400">Loic Denuziere</span></div>
                </div></a>              <a href="/user/denuziere/20190924-bolero-0-9-released">
                <h4 class="text-xl font-semibold">Bolero 0.9 released</h4></a>
              <p class="text-sm md:text-base text-blueGray-400">20190924 · 2 min read</p>
            </div><div class="w-full md:w-1/2 lg:w-1/4 p-4 mb-8 bg-gray-50 rounded-3xl"><a href="https://github.com/IntelliFactory/blogs/tree/master/user/denuziere/20130630-xml-computation-expressions-playing-around-with-extending-the-f-compiler.md">
                <div class="inline-flex items-center"><img class="mr-2 w-4 h-4 lg:w-8 lg:h-8 rounded-full" src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="Loic Denuziere" />
                  <div class="flex-1 text-left"><span class="text-lg font-bold text-blueGray-400">Found a typo?</span></div>
                </div></a>
              <h4 class="text-xl font-semibold">This blog post is hosted on GitHub <a href="https://github.com/IntelliFactory/blogs/tree/master/user/denuziere/20130630-xml-computation-expressions-playing-around-with-extending-the-f-compiler.md">here</a>. Feel free to file a ticket or send a PR.</h4>
            </div>
            
            
          </div>
        </div>
      </section>
      
      
      <section class="2xl:py-20 py-5">
        <div class="container mx-auto px-4">
          <div class="flex flex-wrap -mx-4 border-b border-gray-100 pt-5 lg:pt-10">
            <div class="w-full lg:w-3/5 px-4">
              <div class="flex flex-wrap -mx-4">
                <div class="w-1/2 lg:w-1/3 px-4 mb-12">
                  <h3 class="mb-8 lg:mb-10 text-xl font-bold font-heading">IntelliFactory</h3>
                  <ul class="text-lg">
                    <li class="mb-4"><a class="hover:underline" href="/blogs">Blogs</a></li>
                    <li class="mb-4"><a class="hover:underline" href="/careers">Careers</a></li>
                    <li class="mb-4"><a class="hover:underline" href="/privacy-policy">Privacy Policy</a></li>
                    <li class="mb-4 Cookies"><a class="hover:underline" href="/cookie-policy">Cookies</a></li>
                    <li><a class="hover:underline" href="#">Contact</a></li>
                  </ul>
                </div>
                <div class="w-full lg:w-1/3 px-4 mb-4">
                  <h3 class="mb-8 lg:mb-10 text-xl font-bold font-heading">Services</h3>
                  <ul class="text-lg">
                    <li class="mb-4"><a class="hover:underline" href="/home#consulting">Consulting</a></li>
                    <li class="mb-4"><a class="hover:underline" href="/home#development">Development</a></li>
                    <li class="mb-4"><a class="hover:underline" href="/home#code-synthesis">AI-driven Code Synthesis</a></li>
                    <li class="mb-4"><a class="hover:underline" href="/home#dsls">Domain-Specific Languages</a></li>
                  </ul>
                </div>
                <div class="w-1/2 lg:w-1/3 px-4 mb-12">
                  <h3 class="mb-8 lg:mb-10 text-xl font-bold font-heading">Open Source</h3>
                  <ul class="text-lg">
                    <li class="mb-4"><a class="hover:underline" href="https://websharper.com">WebSharper</a></li>
                    <li class="mb-4"><a class="hover:underline" href="https://fsbolero.io">Bolero</a></li>
                    <li class="mb-4"><a class="hover:underline" href="#">From our Lab</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="w-full lg:w-2/5 px-4 order-first lg:order-last mb-16 lg:mb-0">
              <h3 class="mb-10 text-xl font-bold">Newsletter</h3>
              <form method="post" id="newsletter-form">
                <div class="md:max-w-sm mb-8 flex items-center bg-white border border-gray-100 rounded-full"><span class="inline-block pl-2 lg:pl-5">
                    <svg width="37" height="37" viewbox="0 0 37 37" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <circle cx="18.5" cy="18.5" r="9.5" fill="#1F40FF" fill-opacity="0.15"></circle>
                      <circle cx="18.5" cy="18.5" r="18.5" fill="#1F40FF" fill-opacity="0.06"></circle>
                      <circle cx="18.5" cy="18.5" r="2.5" fill="#282C36"></circle>
                    </svg></span>
                  <input id="newsletter-input" class="pl-4 py-2 focus:outline-none rounded-full placeholder-gray-900 font-bold" type="email" placeholder="Your email address" />
                  <button id="signup" class="ml-auto px-6 lg:px-8 py-4 text-white font-bold bg-blue-500 hover:bg-blue-600 rounded-full transition duration-200">Ok</button>
                </div>
                <div id="newsletter-alert-list"></div>
                <p class="text-gray-300">We will not spam you or give your details to anyone.</p>
              </form>
            </div>
          </div>
          <div class="flex flex-wrap items-center mb-8 lg:mb-0 pt-5">
            <div class="w-full md:w-3/4 mb-8 md:mb-0">
              <div class="md:flex items-center"><a class="inline-block text-gray-900 text-xl font-bold" href="#"><img class="h-7" src="/img/if-logo-long.png" alt="IntelliFactory" width="auto" /></a>              <span class="hidden md:inline-block mx-8 w-px h-8 bg-gray-50"></span>
                <p class="hidden lg:block text-sm"><span>© 2004-2021 IntelliFactory.</span>                <span class="text-gray-300">All rights reserved.</span></p>
              </div>
            </div>
            <div class="w-full md:w-1/4">
              <div class="md:flex items-center justify-end"><a class="inline-block mr-2" href="https://github.com/intellifactory">
                  <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24">
                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path>
                  </svg></a>              <a class="inline-block mr-2" href="https://facebook.com/intellifactory">
                  <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24" fill="#3b5998">
                    <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm3 8h-1.35c-.538 0-.65.221-.65.778v1.222h2l-.209 2h-1.791v7h-3v-7h-2v-2h2v-2.308c0-1.769.931-2.692 3.029-2.692h1.971v3z"></path>
                  </svg></a>              <a class="inline-block mr-2" href="https://twitter.com/intellifactory">
                  <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24" fill="#00acee">
                    <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"></path>
                  </svg></a>              <a class="inline-block mr-2" href="https://www.linkedin.com/company/intellifactory">
                  <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24" fill="#0e76a8">
                    <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-2 16h-2v-6h2v6zm-1-6.891c-.607 0-1.1-.496-1.1-1.109 0-.612.492-1.109 1.1-1.109s1.1.497 1.1 1.109c0 .613-.493 1.109-1.1 1.109zm8 6.891h-1.998v-2.861c0-1.881-2.002-1.722-2.002 0v2.861h-2v-6h2v1.093c.872-1.616 4-1.736 4 1.548v3.359z"></path>
                  </svg></a>              <a class="inline-block" href="https://vimeo.com/user15828007">
                  <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24" fill="#86c9ef">
                    <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.82 11.419c-1.306 2.792-4.463 6.595-6.458 6.595-1.966 0-2.25-4.192-3.324-6.983-.527-1.372-.868-1.058-1.858-.364l-.604-.779c1.444-1.27 2.889-2.745 3.778-2.826.998-.096 1.615.587 1.845 2.051.305 1.924.729 4.91 1.472 4.91.577 0 2.003-2.369 2.076-3.215.13-1.24-.912-1.277-1.815-.89 1.43-4.689 7.383-3.825 4.888 1.501z"></path>
                  </svg></a></div>
            </div>
          </div>
        </div>
      </section>
      
      <div>
        
        <meta id='websharper-data' name='websharper-data' content='{"$TYPES":[],"$DATA":{"$V":{}}}' />
<script src="../../Scripts/WebSharper.Core.JavaScript/Runtime.js" type="text/javascript" charset="UTF-8"></script><script type="text/javascript">
if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '../../Scripts/';
  IntelliFactory.Runtime.Start();
}
</script>

        <script src="/js/Dynamic.js"></script>
      </div>
    </div>
  </body>
</html>