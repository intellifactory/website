<!DOCTYPE html>
<html lang="en">
  <head>
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-1291321-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-1291321-1');
    </script>
    <title>Dart in F#, differently</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="IntelliFactory" />
    <meta property="og:title" content="Dart in F#, differently" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://intellifactory.com/user/jooseppi12/20221215-dart-in-fsharp-differently" />
    <meta property="og:image" content="https://intellifactory.com/img/category3.jpg" />
    <meta property="og:description" content="" />
    <meta property="twitter:card" content="summary" />
    <meta property="twitter:site" content="@intellifactory" />
    <meta property="twitter:title" content="Dart in F#, differently" />
    <meta property="twitter:description" content="" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=DM+Sans:400,500,700&amp;subset=latin" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&amp;display=swap" />
    <link rel="stylesheet" href="/css/tailwind/tailwind.css" />
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-tailwind.png" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js" type="text/javascript" charset="UTF-8"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/languages/fsharp.min.js" type="text/javascript" charset="UTF-8"></script><link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/far.min.css"></link>
<!--[if lte IE 11.0]>
<![endif]-->
<!--[if lte IE 9.0]>
<![endif]-->

    <script src="/js/main.js"></script>
  </head>
  <body class="antialiased bg-body text-body font-body">
    <div>
      <section class="px-4 lg:px-10 bg-gray-800 px-2">
        <nav class="relative flex justify-between items-center py-2"><a class="text-2xl text-white font-bold" href="/"><span>Intelli</span>            <span class="text-blue-500 -ml-1">Factory</span></a>
          <div class="lg:hidden">
            <button class="p-2 navbar-burger">
              <svg class="w-10 h-3" width="39" height="13" viewbox="0 0 39 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="39" height="2" rx="1" fill="#C4C4C4"></rect>
                <rect x="19" y="11" width="20" height="2" rx="1" fill="#C4C4C4"></rect>
              </svg>
            </button>
          </div>
          <div class="hidden lg:block ml-auto mr-1">
            <ul class="flex items-center text-white space-x-10">
              <li class="hoverable"><a class="text-white font-bold text-lg" href="/">Home</a></li>
              <li class="hoverable-mm"><a class="text-white font-bold text-lg">Open Source</a>
                <div class="p-6 mega-menu mb-16 sm:mb-0 shadow-xl bg-blue-700">
                  <div class="container mx-auto w-full flex flex-wrap justify-between mx-2">
                    <ul class="px-4 w-full sm:w-1/2 lg:w-1/4 pb-6 pt-6 lg:pt-3">
                      <div class="flex items-center"><img class="h-8 mb-3 mr-3" src="/images/websharper.png" alt="WebSharper" />
                        <h3 class="font-bold text-xl text-white text-bold mb-2">WebSharper</h3>
                      </div>
                      <p class="text-gray-100 text-sm">Functional, reactive .NET web applications without writing JavaScript.</p>
                      <div class="flex items-center py-3"><a href="https://websharper.com" target="_blank"><img src="/images/category3-small.jpg" /></a></div>
                    </ul>
                    <ul class="px-4 w-full sm:w-1/2 lg:w-1/4 pb-6 pt-6 lg:pt-3">
                      <div class="flex items-center"><img class="h-8 mb-3 mr-3" src="/images/bolero.png" alt="Bolero" />
                        <h3 class="font-bold text-xl text-white text-bold mb-2">Bolero</h3>
                      </div>
                      <p class="text-gray-100 text-sm">Future-proof web applications running on WebAssembly instead of JavaScript.</p>
                      <div class="flex items-center py-3"><a href="https://fsbolero.io" target="_blank"><img src="/images/category6-small.jpg" /></a></div>
                    </ul>
                    <ul class="px-4 w-full sm:w-1/2 lg:w-1/4 pb-6 pt-6 lg:pt-3">
                      <div class="flex items-center"><img class="h-8 mb-3 mr-3 fill-current text-white" src="/images/sitefi.jpg" alt="SiteFi" />
                        <h3 class="font-bold text-xl text-white text-bold mb-2">SiteFi</h3>
                      </div>
                      <p class="text-gray-100 text-sm">.NET static web apps, markdown-based, multi-user blogs and documentation sites.</p>
                      <div class="flex items-center py-3"><a href="https://github.com/granicz/SiteFi" target="_blank"><img src="/images/category4-small.jpg" /></a></div>
                    </ul>
                    <ul class="px-4 w-full sm:w-1/2 lg:w-1/4 pb-6 pt-6 lg:pt-3">
                      <div class="flex items-center"><img class="h-8 mb-3 mr-3" src="/images/if-logo.png" alt="IntelliFactory" />
                        <h3 class="font-bold text-xl text-white text-bold mb-2">IntelliFactory Labs</h3>
                      </div>
                      <p class="text-gray-100 text-sm">Miscellaneous F# tools and other material. Some relics here and there.</p>
                      <div class="flex items-center py-3">
                        <svg class="h-6 pr-3 mr-1 fill-current text-teal-300" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 20 20">
                          <path d="M20 10a10 10 0 1 1-20 0 10 10 0 0 1 20 0zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0zm-8 2H5V8h5V5l5 5-5 5v-3z"></path>
                        </svg><a class="font-bold" href="https://github.com/IntelliFactory" target="_blank">GitHub</a>
                      </div>
                    </ul>
                  </div>
                </div>
              </li>
              <li class="hoverable"><a class="text-white font-bold text-lg" href="/blogs">Blogs</a></li>
              <li class="hoverable"><a class="text-white font-bold text-lg" href="/careers">Careers</a></li>
              <li class="hoverable"><a class="text-white font-bold text-lg" href="/contact">Contact</a></li>
            </ul>
          </div>
        </nav>
        <div class="hidden navbar-menu fixed top-0 left-0 bottom-0 w-5/6 max-w-sm z-50">
          <div class="navbar-backdrop fixed inset-0 bg-gray-800 opacity-80"></div>
          <nav class="relative flex flex-col py-8 h-full w-full bg-white overflow-y-auto">
            <div class="flex items-center mb-16 pr-6"><a class="ml-10 text-2xl text-gray-800 font-bold" href="/"><img class="h-7" src="/images/if-logo-long.png" alt="IntelliFactory" /></a></div>
            <div class="hamburger">
              <ul>
                <li class="mb-1 px-10 table"><a class="block pl-8 py-4 text-xl text-gray-800 hover:bg-blueGray-50 rounded-xl" href="/">Home</a></li>
                <li class="mb-1 px-10 table"><a class="block pl-8 py-4 text-xl text-gray-800 hover:bg-blueGray-50 rounded-xl">Open Source</a>
                  <ul class="inline table">
                    <li class="mb-1 px-10"><a class="block pl-8 py-4 text-xl text-gray-800 hover:bg-blueGray-50 rounded-xl" href="https://websharper.com">WebSharper</a></li>
                    <li class="mb-1 px-10"><a class="block pl-8 py-4 text-xl text-gray-800 hover:bg-blueGray-50 rounded-xl" href="https://fsbolero.io">Bolero</a></li>
                    <li class="mb-1 px-10"><a class="block pl-8 py-4 text-xl text-gray-800 hover:bg-blueGray-50 rounded-xl" href="https://github.com/granicz/SiteFi">SiteFi</a></li>
                    <li class="mb-1 px-10"><a class="block pl-8 py-4 text-xl text-gray-800 hover:bg-blueGray-50 rounded-xl" href="https://github.com/IntelliFactory">IF Labs</a></li>
                  </ul>
                </li>
                <li class="mb-1 px-10 table"><a class="block pl-8 py-4 text-xl text-gray-800 hover:bg-blueGray-50 rounded-xl" href="/blogs">Blogs</a></li>
                <li class="mb-1 px-10 table"><a class="block pl-8 py-4 text-xl text-gray-800 hover:bg-blueGray-50 rounded-xl" href="/careers">Careers</a></li>
                <li class="mb-1 px-10 table"><a class="block pl-8 py-4 text-xl text-gray-800 hover:bg-blueGray-50 rounded-xl" href="/contact">Contact</a></li>
              </ul>
            </div>
            <div class="mt-auto px-10">
              <p class="mt-6 mb-4 text-lg text-center"><span>2004-2021 © IntelliFactory. All rights reserved.</span></p>
            </div>
          </nav>
        </div>
      </section>
      
      <section class="relative py-20 2xl:py-40 overflow-hidden">
        <div class="container px-4 mx-auto">
          <div class="max-w-4xl mx-auto text-center">
            <h2 class="bg-opacity-25 bg-gray-900 mb-14 text-6xl lg:text-7xl font-bold font-heading text-white">Dart in F#, differently</h2>
          </div><img class="absolute top-0 left-0 w-full h-full object-cover" style="z-index:-10;" src="/img/category3.jpg" alt="" />
        </div>
      </section>
      <section class="relative py-10 overflow-hidden bg-blueGray-100">
        <div class="container px-4 mx-auto">
          <div class="max-w-4xl mx-auto text-center">
            <div class="inline-flex items-center flex-wrap"><a href="/user/jooseppi12"><img class="mr-8 w-20 lg:w-24 h-20 lg:h-24 rounded-full" src="/img/avatar/jooseppi12.png" alt="Jozsef Uri" /></a>
              <div class="flex-1 text-left"><a href="/user/jooseppi12">
                  <h4 class="mb-1 text-2xl font-bold">Jozsef Uri</h4></a>
                <p>Dec 15, 2022</p>
              </div>
              <div class="text-right ml-20 flex-1 flex-basis-100">
                <p class="mb-1 font-bold text-xl">Reading time:</p>
                <p>25 mins</p>
              </div>
              <div class="text-right ml-20 mt-3 flex-1 flex-basis-100">
                <p class="mb-1 font-bold text-xl">Share via:</p>
                <div><a class="inline-block mr-2" href="https://twitter.com/intent/tweet?text=Dart+in+F%23%2c+differently&amp;url=https%3a%2f%2fintellifactory.com%2fuser%2fjooseppi12%2f20221215-dart-in-fsharp-differently">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24" fill="#00acee">
                      <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"></path>
                    </svg></a>                  <a class="inline-block mr-2" href="https://www.linkedin.com/sharing/share-offsite/?url=https%3a%2f%2fintellifactory.com%2fuser%2fjooseppi12%2f20221215-dart-in-fsharp-differently">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24" fill="#0e76a8">
                      <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-2 16h-2v-6h2v6zm-1-6.891c-.607 0-1.1-.496-1.1-1.109 0-.612.492-1.109 1.1-1.109s1.1.497 1.1 1.109c0 .613-.493 1.109-1.1 1.109zm8 6.891h-1.998v-2.861c0-1.881-2.002-1.722-2.002 0v2.861h-2v-6h2v1.093c.872-1.616 4-1.736 4 1.548v3.359z"></path>
                    </svg></a>                  <a class="inline-block" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fintellifactory.com%2fuser%2fjooseppi12%2f20221215-dart-in-fsharp-differently">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24" fill="#3b5998">
                      <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm3 8h-1.35c-.538 0-.65.221-.65.778v1.222h2l-.209 2h-1.791v7h-3v-7h-2v-2h2v-2.308c0-1.769.931-2.692 3.029-2.692h1.971v3z"></path>
                    </svg></a></div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <section class="py-20 bg-white overflow-hidden">
        <div class="container px-4 mx-auto">
          <div class="max-w-4xl mx-auto markdown"><div ws-preserve=""><p>It's hard to believe we are getting this close to the end of the year, but it means that one of my favourite sporting event of the year is getting closer: <a href="https://en.wikipedia.org/wiki/2023_PDC_World_Darts_Championship">the PDC World Darts Championship</a> (to be more precise, it's starting today!). Darts is probably one of the most followed sport in recent years for me and it's not a secret that at some point in my life, I would to attend this event live, as the atmosphere that crowd creates gives me goosebumps even through the TV broadcasting.</p>
<p>One of the first projects that I have ever created was a browser based Darts calculator. It was printing out all the possible combinations you can do for a given number with 3 dart throws into a div. Nostalgia hit me and decided to take a look back at that project, just to find how bad of an implementation that was.</p>
<p>You can find the project on <a href="https://github.com/Jooseppi12/fsadvent2022">GitHub</a> and a live demo <a href="https://jooseppi12.github.io/fsadvent2022">here</a>.</p>
<h2 id="why-was-it-a-bad-implementation">Why was it a bad implementation?</h2>
<p>Well, it was quite an ineffective implementation. It generated all possible combinations a player could achieve with 3 darts at most and then filtered out those combinations that did not reach the sum. Also, other than the number input from the user, there was not much to interact with as the results were displayed as plain text. It was not even able to filter out the <a href="https://en.wikipedia.org/wiki/Darts#Games">non-checkout</a> combinations. Now with a few years of experience I feel like I can create a better one and why would I not share it with the community?</p>
<h2 id="lets-start-with-the-basics">Let's start with the basics</h2>
<p>The user should be able to provide the number they want to reach with a maximum of 3 throws and if they are going for a checkout. If they are going for a checkout, that means we should not return any combination, that would not end with hit on the double ring of the board.</p>
<p>To represent a single dart throw I used the following type:</p>
<pre><code class="language-fsharp">type Dart =
    | Triple of int
    | Double of int
    | Single of int
    | Nil
</code></pre>
<p>The interesting bit here is including Nil as part of my representation, but more on that later when we get to the generator logic.</p>
<p>I also provided some helper functions to pretty print a dart throw (i.e., a triple 20 is being shown as T20, doubles are shown as D20 and so on), to get the scoring value of a dart throw etc.</p>
<p>Now on to generating all the results. To make my life easier, I have created a <code>Map</code>, that stores all possible values that you can score with a single dart. So, an example key-value pair of this map would be <code>(12, [Triple 4; Double 6; Single 12])</code>, as all values in the list have a scoring value of 12.</p>
<p>Then once we have this Map (named <code>scoringValues</code>), calculating out all possible combinations becomes quite a bit easier, as instead of having three different entries for the value of 12, I can just work with a single value here and at the end we can do the 1-X mapping.</p>
<p>Now with that in place, let's look at the function:</p>
<pre><code class="language-fsharp">let getCombinationsFor (numberToReach: int) (isItCheckout: bool) =
    scoringValues.Keys
    |&gt; List.ofSeq
    |&gt; List.choose (fun key -&gt;
        if key = 0 &amp;&amp; numberToReach &lt;&gt; 0 then
            None
        else if numberToReach - key &lt; 0 then
            None
        else
            if isItCheckout &amp;&amp; numberToReach - key = 0 &amp;&amp; key % 2 = 0 then
                Some (key, numberToReach - key)
            else if isItCheckout &amp;&amp; numberToReach - key = 0 then
                None
            else
                Some (key, numberToReach - key)
    )
    |&gt; List.collect (fun (v1, remainder) -&gt;
        scoringValues.Keys
        |&gt; List.ofSeq
        |&gt; List.choose (fun key -&gt;
            if key = 0 &amp;&amp; remainder &lt;&gt; 0 then
                None
            else if remainder - key &lt; 0 then
                None
            else
                if remainder - key = 0 &amp;&amp; isItCheckout &amp;&amp; key % 2 = 0 then
                    Some (v1, key, remainder - key)
                else if remainder - key = 0 &amp;&amp; isItCheckout then
                    None
                else
                    if scoringValues.ContainsKey (remainder - key) &amp;&amp; (not isItCheckout || (remainder - key) % 2 = 0) then
                        Some (v1, key, remainder - key)
                    else
                        None
        )
    )
    |&gt; List.collect (fun (d1, d2, d3) -&gt;
        let getFilteredByCheckout (items: Dart list) =
            if isItCheckout then
                items |&gt; List.filter Dart.IsCheckout
            else
                items
        match scoringValues.TryGetValue(d1), scoringValues.TryGetValue(d2), scoringValues.TryGetValue(d3) with
        | (true, items1), (true, [Nil]), (true, [Nil]) -&gt;
            getFilteredByCheckout items1 |&gt; List.map (fun x -&gt; Some (x, Nil, Nil))
        | (true, items1), (true, items2), (true, [Nil]) -&gt;
            items1 |&gt; List.collect (fun x -&gt; getFilteredByCheckout items2 |&gt; List.map (fun y -&gt; Some (x, y, Nil)))
        | (true, items1), (true, items2), (true, items3) -&gt;
            items1 |&gt; List.collect (fun x -&gt; items2 |&gt; List.collect (fun y -&gt; getFilteredByCheckout items3 |&gt; List.map (fun z -&gt; Some (x, y, z))))
        | _ -&gt; []
    )
    |&gt; List.sortBy (fun (Some (a, b, _)) -&gt; a, b)
</code></pre>
<p>To dissect this function let's go step-by-step:</p>
<p>The first <code>List.choose</code> gets us the value of the first dart throw. If our desired value is the same as the first dart throw value and we require a checkout, we are also checking if we are even or not. If we are odd, we don't care about this result, as it is not possible to achieve a checkout on an odd number with a single throw.</p>
<p>The first <code>List.collect</code> is getting us the second and third throws. This is where having Nil as part of the type representation comes handy, as with this we are not dealing with variability of needing 1, 2 or 3 dart throws to achieve the score. At this level we are handling everything as a combination of three throws and the display layer will handle showing what is an actual throw or not.</p>
<p>The last <code>List.collect</code> is doing the logic of the previously mentioned 1-X mapping logic, where if we have the value of 12 and let's say we did not require checkout, we should end up with <code>T4</code>, <code>D6</code> and <code>12</code> as all possible combinations.</p>
<h2 id="what-about-displaying-the-results-for-the-user">What about displaying the results for the user?</h2>
<p>In my original implementation, this was probably the worst part, as the user was only presented with a wall-of-text of all possible combinations. So let's see what we can do to make this a bit more interactive. I'm going to use <a href="https://github.com/dotnet-websharper/ui">WebSharper.UI</a>'s reactive layer in combination with the standard <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API">Canvas</a> from JS</p>
<p>First thing is I would like to introduce a darts board that is rendered via the browser with the help of the canvas element.</p>
<p><img src="https://i.imgur.com/n5B2lF1.gif" alt="Darts board with a highlighted combination" title="Darts board with a highlighted combination" /></p>
<p>Drawing a darts board with canvas is relatively simple, as we can boil it down to 3 different problems:</p>
<ul>
<li>Drawing circles</li>
<li>Drawing sectors</li>
<li>Printing the label</li>
</ul>
<h3 id="drawing-circles">Drawing circles</h3>
<p>Drawing circles is straightforward with canvas. You only need to provide the center point, the radius of the circle and range of angles (in radian) you want to render. As we want to draw a full circle here, we would use 0 to 2 * π</p>
<pre><code class="language-fsharp">let renderCircle (ctx: CanvasRenderingContext2D) radius color = 
    ctx.BeginPath();
    ctx.Arc(WIDTH/2., HEIGHT/2., radius, 0, 2. * Math.PI, false)
    ctx.LineWidth &lt;- 1.
    ctx.StrokeStyle &lt;- color
    ctx.FillStyle &lt;- color
    ctx.Fill()
    ctx.Stroke()
</code></pre>
<h3 id="drawing-sectors">Drawing sectors</h3>
<p>Based on the above, drawing a sector is also simple, as we can just provide an angle range that we want to get rendered. But one thing to note is that the 0 angle is on the X axis. We also know that each sector is 18° (20 numbers spread across a full circle).</p>
<pre><code class="language-fsharp">let renderSectorPart (ctx: CanvasRenderingContext2D) radius color (nth: int) = 
    let beginDeg = (-99 + nth * 18) // We are starting to render from the value of 20 clockwise
    let beginRad = convertToRadian beginDeg
    let endRad = convertToRadian (beginDeg + 18)
    ctx.BeginPath();
    ctx.MoveTo(WIDTH/2., HEIGHT/2.)
    ctx.Arc(WIDTH/2., HEIGHT/2., radius, beginRad, endRad, false)
    ctx.LineWidth &lt;- 1.
    ctx.StrokeStyle &lt;- color
    ctx.LineTo(WIDTH/2., HEIGHT/2.)
    ctx.FillStyle &lt;- color
    ctx.Fill()
    ctx.Stroke()
</code></pre>
<h3 id="printing-the-label">Printing the label</h3>
<p>This is probably the most complicated part of the canvas rendering, as it involves rendering text + rotating the text, but we can achieve a ring of text rendering with some knowledge we have from the circle rendering above. The trickiest part is probably the rotation of the bottom half of the labels to face the correct way, but the function below should do the trick:</p>
<pre><code class="language-fsharp">let renderLabel (ctx: CanvasRenderingContext2D) (num: int) (nth: int) =
    ctx.Save()
    ctx.StrokeStyle &lt;- &quot;white&quot;
    ctx.FillStyle &lt;- &quot;white&quot;
    ctx.Font &lt;- &quot;30px Arial&quot;
    ctx.TextAlign &lt;- CanvasTextAlign.Center
    ctx.Translate(WIDTH/2., HEIGHT/2.)
    // The second quadrant should match the orientation of the fourth one
    if nth &gt; 5 &amp;&amp; nth &lt; 10 then
        ctx.Rotate(convertToRadian ((20 + nth - 10) * 18))
    // 3 should match the orientation of 20
    else if nth = 10 then
        ctx.Rotate(convertToRadian 0)
    // The third quadrant should match the orientation of the first one
    else if nth &gt; 10 &amp;&amp; nth &lt; 15 then
        ctx.Rotate(convertToRadian ((nth - 10) * 18))
    else
        ctx.Rotate(convertToRadian (nth * 18))
    //ctx.Rotate(convertToRadian (nth * 18))
    ctx.FillText(string num, 0, if nth &gt; 5 &amp;&amp; nth &lt; 15 then HEIGHT/2. * 0.85 + 15. else - HEIGHT/2. * 0.85);
    ctx.Restore();   
</code></pre>
<p>We can put all this together into a draw function which also takes the selected user input in order to achieve some highlighting in the canvas.</p>
<pre><code class="language-fsharp">let drawDartboard (ctx: CanvasRenderingContext2D) (dartToHighlight: Dart) =
    // Init board
    let hightlightColor = &quot;#61bff9&quot;
    resetBoard ctx
    let radius = WIDTH/2. - 10.
    let scoringRadius = (radius * 0.75)

    // Render outer circle
    renderCircle ctx radius &quot;#171918&quot;

    for (index, num) in dartRingNumbers |&gt; List.indexed do
        let doubleColor =
            match dartToHighlight with
            | Double v when num = v -&gt; hightlightColor
            | _ -&gt; if index % 2 = 0 then &quot;#e63322&quot; else &quot;#389536&quot; 
        let tripleColor =
            match dartToHighlight with
            | Triple v when num = v -&gt; hightlightColor
            | _ -&gt; if index % 2 = 0 then &quot;#e63322&quot; else &quot;#389536&quot; 
        let normalColor =
            match dartToHighlight with
            | Single v when num = v -&gt; hightlightColor
            | _ -&gt; if index % 2 = 0 then &quot;#171918&quot; else &quot;#f7e0b6&quot;
        // draw double point ring
        renderSector ctx (scoringRadius) doubleColor index
        // draw normal ring
        renderSector ctx (scoringRadius * 0.953) normalColor index
        // draw triple point ring
        renderSector ctx (scoringRadius * 0.694) tripleColor index
        // draw inner normal ring
        renderSector ctx (scoringRadius * 0.629) normalColor index
        // draw label
        renderLabel ctx num index

    let colorSmallBull = if dartToHighlight = Single 25 then hightlightColor else &quot;#389536&quot;
    let colorBigBull = if dartToHighlight = Double 25 then hightlightColor else &quot;#e63322&quot;
    // draw small bullseye
    renderCircle ctx (scoringRadius * 0.094) colorSmallBull

    // draw bullseye
    renderCircle ctx (scoringRadius * 0.037) colorBigBull
</code></pre>
<p>The dart function takes the dart value to highlight on the board. If there are none selected, we can pass a Nil into the function, as that is a value that is not represented in the display, therefore the highlight logic would not trigger in that case.</p>
<p>The animation logic, when a combination is selected, is in an infinite loop with the usage of <a href="https://developer.mozilla.org/en-US/docs/Web/API/setInterval">SetInterval</a> and the step value is for selecting what dart throw we are currently highlighting</p>
<p>Below the canvas, we are also showing the selected combination with the same highlighting in sync with the darts board.</p>
<p>For the user inputs we just have a <code>numerical input</code>, a <code>checkbox</code> and a <code>submit</code> button. Upon pressing the submit button we are initiating the calculating logic. If there are no possible ways to reach the user provided number, we are alerting the user of this problem. If there are results, then we render a select box that is showing all the calculations and upon selecting one of them, we are initiating the highlighting logic mentioned above. Also, the moment a new calculation is initiated or a different result is selected, we are cancelling the previous animation loop.</p>
<p><img src="https://i.imgur.com/sU49DBZ.png" alt="Image of the interface" title="Image of the interface" /></p>
<h2 id="glueing-together-the-pieces">Glueing together the pieces</h2>
<p>For rendering this into the DOM in the browser, I'm using WebSharper.UI and it's templating engine, with the following html and fsharp code</p>
<pre><code class="language-html">&lt;div id=&quot;main&quot; ws-children-template=&quot;Main&quot;&gt;
    &lt;div class=&quot;holder&quot;&gt;
        &lt;div class=&quot;form&quot;&gt;
            &lt;label for=&quot;numberToReach&quot;&gt;
                Please provide a number between 1 and 180:
                &lt;input id=&quot;numberToReach&quot; type=&quot;number&quot; min=&quot;1&quot; max=&quot;180&quot; ws-var=&quot;SelectedNumber&quot; /&gt;
            &lt;/label&gt;
            &lt;label for=&quot;isItCheckout&quot;&gt;
                Does it need to be a checkout combination?
                &lt;input id=&quot;isItCheckout&quot; type=&quot;checkbox&quot; ws-var=&quot;IsItCheckout&quot; /&gt;
            &lt;/label&gt;
            &lt;button ws-onclick=&quot;Calculate&quot;&gt;Calculate!&lt;/button&gt;
            &lt;div&gt;Results:&lt;/div&gt;
            &lt;div ws-hole=&quot;SelectionBox&quot;&gt;&lt;/div&gt;
            &lt;div class=&quot;selectedDisplay&quot;&gt;&lt;span id=&quot;dart1&quot;&gt;${Selected1}&lt;/span&gt;&lt;span id=&quot;dart2&quot;&gt;${Selected2}&lt;/span&gt;&lt;span id=&quot;dart3&quot;&gt;${Selected3}&lt;/span&gt;&lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;display&quot;&gt;
            &lt;canvas ws-attr=&quot;CanvasAttr&quot; width=&quot;600&quot; height=&quot;600&quot;&gt;&lt;/canvas&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<pre><code class="language-fsharp">let selected = Var.Create None
let numberToReach = Var.Create 1
let isItCheckout = Var.Create false
let results = Var.Create [None]
IndexTemplate.Main()
    .CanvasAttr(
        [
            on.viewUpdate selected.View (fun elem currentSelection -&gt;
                animationHandle.View
                |&gt; View.Get (fun handle -&gt;
                    match handle with
                    | None -&gt; ()
                    | Some handle -&gt;
                        JS.ClearInterval handle
                        JS.Document.QuerySelector(&quot;span.highlighted&quot;) |&gt; fun x -&gt; if x !==. null then x.ClassList.Remove(&quot;highlighted&quot;)
                        animationHandle.Set None
                )
                let canvasElement = As&lt;CanvasElement&gt; elem
                let context = canvasElement.GetContext(&quot;2d&quot;)
                highlightDartboard context currentSelection
            )
            on.afterRender (fun elem -&gt;
                let canvasElement = As&lt;CanvasElement&gt; elem
                let context = canvasElement.GetContext(&quot;2d&quot;)
                drawDartboard context Nil
            )
        ]
    )
    .IsItCheckout(isItCheckout)
    .SelectedNumber(numberToReach)
    .Selected1(selected.View.Map(function None -&gt; &quot;&quot; | Some (d1, _, _) -&gt; Dart.AsDartNotation d1))
    .Selected2(selected.View.Map(function None -&gt; &quot;&quot; | Some (_, d2, _) -&gt; Dart.AsDartNotation d2))
    .Selected3(selected.View.Map(function None -&gt; &quot;&quot; | Some (_, _, d3) -&gt; Dart.AsDartNotation d3))
    .Calculate(fun te -&gt;
        numberToReach.View
        |&gt; View.Get (fun number -&gt;
            isItCheckout.View
            |&gt; View.Get (fun checkout -&gt;
                animationHandle.View
                |&gt; View.Get (fun handle -&gt;
                    match handle with
                    | None -&gt; ()
                    | Some handle -&gt;
                        JS.ClearInterval handle
                        animationHandle.Set None
                )
                let res = getCombinationsFor number checkout
                if res.Length = 0 then
                    JS.Alert &lt;| sprintf &quot;%d cannot be reached with 3 darts! Please try a different number.&quot; number
                results.Set (None::res)
                if res.Length &gt; 1 then
                    res |&gt; List.head |&gt; selected.Set 
                else
                    selected.Set None
            )
        )
    )
    .SelectionBox(
        results.View
        |&gt; Doc.BindView (fun options -&gt;
            Doc.InputType.Select [] PrettyPrintDartsSet options selected
        )
    )
    .Doc()
|&gt; Doc.RunById &quot;main&quot;
</code></pre>
<p>The two most important part of the code are the <code>Calculate</code> and the <code>CanvasAttr</code> sections.</p>
<p>The <code>ws-onclick=&quot;Calculate&quot;</code> section in our html lets us bind a click event handler to the function, which in our case will get the current value of the two <code>ws-var</code> binded input from our html, to pass it in our <code>getCombinationsFor</code> function to generate all the possible combinations shown in the result selector <code>&lt;select&gt;</code> element. That <code>&lt;select&gt;</code> element is generated from the <code>View</code> of the <code>results</code>, which is being set in our click handler. The click handler is also responsible for setting the default value of our selected combination: if the number we tried to calculate with cannot be reached with 3 dart throws, then it's setting the <code>selected</code> <code>Var</code> value to <code>None</code>, otherwise it sets it to the first calculated result.</p>
<p>The <code>CanvasAttr</code> section is responsible for the animation and the rendering of our canvas. In our html <code>CanvasAttr</code> is a <code>ws-attr</code> hole, which means we can populate it in F# with a list of <code>UI.Attr</code> values, which can take two forms.</p>
<ul>
<li>Attributes</li>
<li>Event handlers</li>
</ul>
<p>We are utilizing two event handlers for our canvas handling, but keep in mind that these are not standard html event handlers.</p>
<p><code>on.afterRender</code> takes a function that will be executed immediately after the element we are attaching it to is inserted in the DOM. Therefore we can utilize this layer to render our default state, where nothing is selected.</p>
<p>The <code>on.viewUpdate</code> function is a function that takes two argumennts: a <code>View&lt;'T&gt;</code> and an a <code>Dom.Element -&gt; 'T -&gt; unit</code> function. As the name suggests, the function we are passing in is going to be executed every time the value inside the passed in <code>View</code> is changed. Which means we are utilizing this function to handle when the selected combination is changed.</p>
<p>Also, we are calling a slightly altered version of our <code>drawDartboard</code> function to handle the animation part.</p>
<pre><code class="language-fsharp">let highlightDartboard (ctx: CanvasRenderingContext2D) (currentSelection: DartsSet option) =
    match currentSelection with
    | None -&gt;
        drawDartboard ctx Nil
    | Some (d1, d2, d3) -&gt;
        let mutable step = 1
        let highlightAnimation () =
            JS.Document.QuerySelector(&quot;span.highlighted&quot;) |&gt; fun x -&gt; if x !==. null then x.ClassList.Remove(&quot;highlighted&quot;)
            let dartToUse =
                if step = 1 then
                    d1
                else if step = 2 then
                    d2
                else
                    d3

            drawDartboard ctx dartToUse
            // highlight matching result field
            JS.Document.GetElementById(&quot;dart&quot; + string step).ClassList.Add(&quot;highlighted&quot;)
            if step = 3 then
                step &lt;- 1
            else
                step &lt;- step + 1

        animationHandle.Set (Some &lt;| JS.SetInterval highlightAnimation 1000 )
</code></pre>
<p>If our current selection is None, we are doing the same thing as in our <code>on.afterRender</code> function. But if a given combination selected we are utilizing <code>SetInterval</code> to create the infinite looping logic. The handle that SetInterval returns is stored in a global <code>Var</code>, so that our <code>on.viewUpdate</code> logic can cancel that loop and restart a new one based on the current selection.</p>
<h2 id="closure">Closure</h2>
<p>I'm happy with how this turned out, but there are always rooms for improvement. I'm pretty sure there are data sets out there to show what is the most used checkout combination for a given number, which could be prioritised at the top of our result set. Or even better, if these are available per professional players, we could have a player selection that would show their most loved combination for a given checkout. But that's for the future 😃.</p>
<p>Thanks to Sergey Tihon for organizing the <a href="https://sergeytihon.com/2022/10/28/f-advent-calendar-in-english-2022/">F# Advent Calendar</a> in 2022 again and I'm happy that I could share this nostalgic journey of mine with the community!</p>
</div></div>
        </div>
      </section>
      <section class="py-20 bg-white">
        <div class="container px-4 mx-auto">
          <div class="flex flex-col lg:flex-row lg:justify-between lg:items-center mb-12">
            <div class="lg:w-2/3 lg:pr-16 mb-2 lg:mb-8">
              <h2 class="text-3xl md:text-4xl font-bold font-heading">Read more from </h2>
            </div>
            <div class="text-sm lg:text-base lg:w-1/3">
              <p class="leading-loose text-blueGray-500"><span>Can’t find what you were looking for? </span>                <a class="text-blue-600 hover:text-blue-700" href="/contact">Drop us a line</a>.
                              
              </p>
            </div>
          </div>
          <div class="flex flex-wrap -mx-4">
            <div class="w-full md:w-1/2 lg:w-1/4 px-4 mb-8"><a href="/user/jooseppi12">
                <div class="inline-flex items-center"><img class="mr-2 w-4 h-4 lg:w-8 lg:h-8 rounded-full" src="/img/avatar/jooseppi12.png" alt="Jozsef Uri" />
                  <div class="flex-1 text-left"><span class="text-lg font-bold text-blueGray-400">Jozsef Uri</span></div>
                </div></a>              <a href="/user/jooseppi12/20241218-football-with-fsharp-part-1">
                <h4 class="text-xl font-semibold">Football with F# - Part 1</h4></a>
              <p class="text-sm md:text-base text-blueGray-400">20241218 · 15 min read</p>
            </div><div class="w-full md:w-1/2 lg:w-1/4 px-4 mb-8"><a href="/user/jooseppi12">
                <div class="inline-flex items-center"><img class="mr-2 w-4 h-4 lg:w-8 lg:h-8 rounded-full" src="/img/avatar/jooseppi12.png" alt="Jozsef Uri" />
                  <div class="flex-1 text-left"><span class="text-lg font-bold text-blueGray-400">Jozsef Uri</span></div>
                </div></a>              <a href="/user/jooseppi12/20231211-proxying-with-websharper">
                <h4 class="text-xl font-semibold">Proxying with WebSharper</h4></a>
              <p class="text-sm md:text-base text-blueGray-400">20231211 · 9 min read</p>
            </div><div class="w-full md:w-1/2 lg:w-1/4 px-4 mb-8"><a href="/user/jooseppi12">
                <div class="inline-flex items-center"><img class="mr-2 w-4 h-4 lg:w-8 lg:h-8 rounded-full" src="/img/avatar/jooseppi12.png" alt="Jozsef Uri" />
                  <div class="flex-1 text-left"><span class="text-lg font-bold text-blueGray-400">Jozsef Uri</span></div>
                </div></a>              <a href="/user/jooseppi12/20211224-reactive-forms-with-websharper-forms">
                <h4 class="text-xl font-semibold">Reactive forms with WebSharper.Forms</h4></a>
              <p class="text-sm md:text-base text-blueGray-400">20211224 · 8 min read</p>
            </div><div class="w-full md:w-1/2 lg:w-1/4 p-4 mb-8 bg-gray-50 rounded-3xl"><a href="https://github.com/IntelliFactory/blogs/tree/master/user/jooseppi12/20221215-dart-in-fsharp-differently.md">
                <div class="inline-flex items-center"><img class="mr-2 w-4 h-4 lg:w-8 lg:h-8 rounded-full" src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="Jozsef Uri" />
                  <div class="flex-1 text-left"><span class="text-lg font-bold text-blueGray-400">Found a typo?</span></div>
                </div></a>
              <h4 class="text-xl font-semibold">This blog post is hosted on GitHub <a href="https://github.com/IntelliFactory/blogs/tree/master/user/jooseppi12/20221215-dart-in-fsharp-differently.md">here</a>. Feel free to file a ticket or send a PR.</h4>
            </div>
            
            
          </div>
        </div>
      </section>
      
      
      <section class="2xl:pt-16 xl:pb-8 py-5 bg-blueGray-50">
        <div class="container mx-auto px-4">
          <div class="flex flex-wrap border-b border-gray-100 pt-5 lg:pt-10">
            <div class="w-full lg:w-3/5 px-4">
              <div class="flex flex-wrap px-5 pb-4">
                <div class="w-1/2 lg:w-1/3 mb-12">
                  <h3 class="mb-8 lg:mb-10 text-xl font-bold font-heading">IntelliFactory</h3>
                  <ul class="text-lg">
                    <li class="mb-4"><a class="hover:underline" href="/blogs">Blogs</a></li>
                    <li class="mb-4"><a class="hover:underline" href="/careers">Careers</a></li>
                    <li><a href="/contact">Contact</a></li>
                  </ul>
                </div>
                <div class="w-full lg:w-1/3 px-4 mb-4">
                  <h3 class="mb-8 lg:mb-10 text-xl font-bold font-heading">Services</h3>
                  <ul class="text-lg">
                    <li class="mb-4"><a class="hover:underline" href="/home#consulting">Consulting</a></li>
                    <li class="mb-4"><a class="hover:underline" href="/home#trainings">Trainings</a></li>
                    <li class="mb-4"><a class="hover:underline" href="/home#code-synthesis">AI-driven Code Synthesis</a></li>
                    <li class="mb-4"><a class="hover:underline" href="/home#dsls">Domain-Specific Languages</a></li>
                  </ul>
                </div>
                <div class="w-1/2 lg:w-1/3 px-4 mb-12">
                  <h3 class="mb-8 lg:mb-10 text-xl font-bold font-heading">Open Source</h3>
                  <ul class="text-lg">
                    <li class="mb-4"><a class="hover:underline" href="https://websharper.com">WebSharper</a></li>
                    <li class="mb-4"><a class="hover:underline" href="https://fsbolero.io">Bolero</a></li>
                    <li class="mb-4"><a class="hover:underline" href="#">From our Lab</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="w-full lg:w-2/5 px-4 order-first lg:order-last mb-16 lg:mb-0">
              <h3 class="mb-10 text-xl font-bold">Newsletter</h3>
              <form method="post" id="newsletter-form">
                <div class="md:max-w-sm mb-8 flex items-center bg-white border border-gray-100 rounded-full"><span class="inline-block pl-2 lg:pl-5">
                    <svg width="37" height="37" viewbox="0 0 37 37" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <circle cx="18.5" cy="18.5" r="9.5" fill="#1F40FF" fill-opacity="0.15"></circle>
                      <circle cx="18.5" cy="18.5" r="18.5" fill="#1F40FF" fill-opacity="0.06"></circle>
                      <circle cx="18.5" cy="18.5" r="2.5" fill="#282C36"></circle>
                    </svg></span>
                  <input id="newsletter-input" class="pl-4 py-2 focus:outline-none rounded-full placeholder-gray-900 font-bold" type="email" placeholder="Your email address" />
                  <button id="signup" class="ml-auto px-6 lg:px-8 py-4 text-white font-bold bg-blue-500 hover:bg-blue-600 rounded-full transition duration-200">Ok</button>
                </div>
                <div id="newsletter-alert-list"></div>
                <p class="text-gray-300">We will not spam you or give your details to anyone.</p>
              </form>
            </div>
          </div>
          <div class="flex flex-wrap items-center mb-8 lg:mb-0 pt-5">
            <div class="hidden md:block w-full md:w-3/4 mb-8 md:mb-0">
              <div class="md:flex items-center"><a class="inline-block text-gray-900 text-xl font-bold" href="#"><img class="h-7" src="/images/if-logo-long.png" alt="IntelliFactory" width="auto" /></a>              <span class="hidden md:inline-block mx-8 w-px h-8 bg-gray-50"></span>
                <p class="hidden lg:block text-sm text-gray-300"><span class="text-gray-700">Copyright © 2004-2021 IntelliFactory.</span>                All rights reserved. Made with
                                  <img width="16" height="20" style="display:inline;vertical-align:middle;" alt="Love" src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/42/Love_Heart_SVG.svg/32px-Love_Heart_SVG.svg.png" />                in 100% F#.
                                
                </p>
              </div>
            </div>
            <div class="w-full md:w-1/4">
              <div class="md:flex items-center justify-end"><a class="inline-block mr-2" href="https://github.com/intellifactory">
                  <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24">
                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path>
                  </svg></a>              <a class="inline-block mr-2" href="https://facebook.com/intellifactory">
                  <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24" fill="#3b5998">
                    <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm3 8h-1.35c-.538 0-.65.221-.65.778v1.222h2l-.209 2h-1.791v7h-3v-7h-2v-2h2v-2.308c0-1.769.931-2.692 3.029-2.692h1.971v3z"></path>
                  </svg></a>              <a class="inline-block mr-2" href="https://twitter.com/intellifactory">
                  <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24" fill="#00acee">
                    <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"></path>
                  </svg></a>              <a class="inline-block mr-2" href="https://www.linkedin.com/company/intellifactory">
                  <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24" fill="#0e76a8">
                    <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-2 16h-2v-6h2v6zm-1-6.891c-.607 0-1.1-.496-1.1-1.109 0-.612.492-1.109 1.1-1.109s1.1.497 1.1 1.109c0 .613-.493 1.109-1.1 1.109zm8 6.891h-1.998v-2.861c0-1.881-2.002-1.722-2.002 0v2.861h-2v-6h2v1.093c.872-1.616 4-1.736 4 1.548v3.359z"></path>
                  </svg></a>              <a class="inline-block" href="https://vimeo.com/user15828007">
                  <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24" fill="#86c9ef">
                    <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.82 11.419c-1.306 2.792-4.463 6.595-6.458 6.595-1.966 0-2.25-4.192-3.324-6.983-.527-1.372-.868-1.058-1.858-.364l-.604-.779c1.444-1.27 2.889-2.745 3.778-2.826.998-.096 1.615.587 1.845 2.051.305 1.924.729 4.91 1.472 4.91.577 0 2.003-2.369 2.076-3.215.13-1.24-.912-1.277-1.815-.89 1.43-4.689 7.383-3.825 4.888 1.501z"></path>
                  </svg></a></div>
            </div>
          </div>
        </div>
      </section>
      
      <div>
        
        <meta id='websharper-data' name='websharper-data' content='{"$TYPES":[],"$DATA":{"$V":{}}}' />
<script src="../../Scripts/WebSharper.Core.JavaScript/Runtime.js" type="text/javascript" charset="UTF-8"></script><script type="text/javascript">
if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '../../Scripts/';
  IntelliFactory.Runtime.Start();
}
</script>

        <script src="/js/Dynamic.js"></script>
      </div>
    </div>
  </body>
</html>