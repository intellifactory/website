<!DOCTYPE html>
<html lang="en">
<head>
    <title>Introducing WIG patterns</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&amp;display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&amp;display=swap" />
    <link rel="stylesheet" href="/css/tailwind/tailwind.min.css" />
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-tailwind.png" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js" type="text/javascript" charset="UTF-8"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/languages/fsharp.min.js" type="text/javascript" charset="UTF-8"></script><link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/far.min.css"></link>

    <script src="/js/main.js"></script>
</head>
<body class="antialiased bg-body text-body font-body">
    <div class="">
        <section class="px-4 lg:px-10 bg-gray-800 px-2">
            <nav class="relative flex justify-between items-center py-2">
                <a class="text-2xl text-white font-bold" href="#">
                    <img style="height:3rem;margin:-0.65rem 0 -0.65rem 0;" src="/img/if-logo.png" alt="IntelliFactory" />
                </a>
                <div class="lg:hidden">
                    <button class="p-2 navbar-burger">
                        <svg class="w-10 h-3" width="39" height="13" viewbox="0 0 39 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect width="39" height="2" rx="1" fill="#C4C4C4"></rect>
                            <rect x="19" y="11" width="20" height="2" rx="1" fill="#C4C4C4"></rect>
                        </svg>
                    </button>
                </div>
                <div class="hidden lg:block ml-auto mr-16">
                    <ul class="flex items-center text-white space-x-10">
                        <li><a class="text-white font-bold text-lg" href="/">Home</a></li>
                        <li><a class="text-white font-bold text-lg" href="/oss">Open Source</a></li>
                        <li><a class="text-white font-bold text-lg" href="/blogs">Blogs</a></li>
                        <li><a class="text-white font-bold text-lg" href="/contact">Contact</a></li>
                    </ul>
                </div>
                <div class="hidden lg:block"><a class="inline-block px-12 text-white font-bold border border-gray-200 hover:border-white rounded-full py-2" href="#">Sign Up</a></div>
            </nav>
            <div class="hidden navbar-menu fixed top-0 left-0 bottom-0 w-5/6 max-w-sm z-50">
                <div class="navbar-backdrop fixed inset-0 bg-gray-800 opacity-80"></div>
                <nav class="relative flex flex-col py-8 h-full w-full bg-white overflow-y-auto">
                    <div class="flex items-center mb-16 pr-6">
                        <a class="ml-10 text-2xl text-gray-800 font-bold" href="#">
                            <img class="h-7" src="/img/if-logo-long.png" alt="IntelliFactory" />
                        </a>
                    </div>
                    <div>
                        <ul>
                            <li class="mb-1 px-10"><a class="block pl-8 py-4 text-xl text-gray-800 hover:bg-blueGray-50 rounded-xl" href="/">Home</a></li>
                            <li class="mb-1 px-10"><a class="block pl-8 py-4 text-xl text-gray-800 hover:bg-blueGray-50 rounded-xl" href="/oss">Open Source</a></li>
                            <li class="mb-1 px-10"><a class="block pl-8 py-4 text-xl text-gray-800 hover:bg-blueGray-50 rounded-xl" href="/blogs">Blogs</a></li>
                            <li class="mb-1 px-10"><a class="block pl-8 py-4 text-xl text-gray-800 hover:bg-blueGray-50 rounded-xl" href="/contact">Contact</a></li>
                        </ul>
                    </div>
                    <div class="mt-auto px-10">
                        <div class="pt-6"><a class="block mb-4 py-4 px-12 text-gray-800 text-center font-bold border border-gray-50 hover:border-gray-100 rounded-full" href="#">Sign in</a><a class="block py-4 px-12 text-white text-center font-bold bg-blue-500 hover:bg-blue-600 rounded-full transition duration-200" href="#">Sign up</a></div>
                        <p class="mt-6 mb-4 text-lg text-center">
                            <span>2004-2021 © IntelliFactory. All rights reserved.</span>
                        </p>
                    </div>
                </nav>
            </div>
        </section>
        

        <section class="py-20 2xl:py-40 bg-blue-800 overflow-hidden">
            <div class="container px-4 mx-auto">
                <div class="max-w-4xl mx-auto text-center">
                    <h2 class="mb-14 text-6xl lg:text-7xl font-bold font-heading text-white">Introducing WIG patterns</h2>
                    <div class="inline-flex mb-14 lg:mb-20 items-center">
                        <img class="mr-8 w-20 lg:w-24 h-20 lg:h-24 rounded-full" src="/img/avatar/user.png" alt="Diego Echeverri" />
                        <div class="text-left">
                            <h4 class="mb-1 text-2xl font-bold text-gray-50">Diego Echeverri</h4>
                            <p class="text-white">Jan 25, 2010</p>
                        </div>
                    </div>
                </div>
                <div class="relative h-96 mb-20">
                    <img class="w-full h-full object-cover" src="/img/category3.jpg" alt="" />
                </div>
                <div class="max-w-4xl mx-auto markdown"><div ws-preserve=""><p>Some time ago, I was looking through some of TED videos and I stumbled upon a really nice presentation by Hans Rosling about AIDS. After that initial video I went through <a href="https://www.ted.com/search?q=Hans+Rosling">all his videos</a>. It's surprising how much difference it makes to have the right visualization.</p>
<p>In this post I'll show you how to make a nice visualization similar to the ones used by Hans Rosling. For this, we'll use the WebSharper Google Visualization bindings available as an extension package to the core platform.</p>
<h2 id="getting-the-data">Getting the data</h2>
<p>For this example, I'll plot some population information taken from the population division of the UN<a id="fnref:1" href="#fn:1" class="footnote-ref"><sup>1</sup></a>. And to make things easy, I edited the information as an array of tuples. In principle, you could just use any source for the data. For example you could call the database asynchronously, use an Xml file or a web-service. It doesn't really matter. Just to illustrate how my hard-coded data looks like:</p>
<pre><code class="language-fsharp">let arrayData = [|
    (&quot;Colombia&quot;,1950,12000)
    (&quot;Colombia&quot;,1955,13828)
    (&quot;Colombia&quot;,1960,16006)
    ...
    (&quot;Ukraine&quot;,1995,51063)
    (&quot;Ukraine&quot;,2000,48870)
    (&quot;Ukraine&quot;,2005,46936) |]
</code></pre>
<p>We now have to wrap the data inside a <code>DataTable</code> object. This one is defined inside the <code>IntelliFactory.WebSharper.Google.Visualization.Base</code> module. Keeping in mind that these are just bindings for the Google Visualization API, we should check <a href="https://developers.google.com/chart/interactive/docs/gallery/motionchart?csw=1">the documentation</a><a id="fnref:2" href="#fn:2" class="footnote-ref"><sup>2</sup></a> to see what's the expected format.</p>
<ul>
<li><p>The first column must be of type <code>string</code> and contain the entity names (e.g., <code>&quot;Apples&quot;</code>, <code>&quot;Oranges&quot;</code>, <code>&quot;Bananas&quot;</code> in the example above).</p>
</li>
<li><p>The second column must contain time values. Time can be expressed in any of the following formats:</p>
<pre><code>* Year - Column type: 'number'. Example: 2008.
...
</code></pre>
</li>
<li><p>Subsequent columns can be of type <code>number</code> or <code>string</code>. Number columns will show up in the dropdown menus for X, Y, Color and Size axes. String columns will only appear in the dropdown menu for Color.</p>
</li>
</ul>
<h2 id="wrapping-the-data-inside-the-datatable">Wrapping the data inside the DataTable</h2>
<p>With the previous information about the format expected by the <code>MotionChart</code> we can proceed to add the columns:</p>
<pre><code class="language-fsharp">    let data = new Base.DataTable()
    data.addColumn(&quot;string&quot;, &quot;Country&quot;) |&gt; ignore
    data.addColumn(&quot;number&quot;, &quot;Year&quot;)      |&gt; ignore
    data.addColumn(&quot;number&quot;, &quot;Population&quot;)   |&gt; ignore
</code></pre>
<p>To add the data we just iterate through the collection with the <code>addRow</code> method. The order of every cell should correspond to the order on which we declared the columns.</p>
<pre><code class="language-fsharp">    let V: obj -&gt; Cell = Cell.Value
    for (c, y, p) in arrayData do
        data.addRow [|V c; V y; V p|] |&gt; ignore
</code></pre>
<h2 id="creating-the-visualization">Creating the Visualization</h2>
<p>The following function creates the visualization:</p>
<pre><code class="language-fsharp">let MotionChart () =
    Div []
    |&gt; On Events.Attach (fun container _ -&gt;
        let visualization = new Visualizations.MotionChart(container)
        let options = {Visualizations.MotionChartOptions.Default 
                            with width = 600.
                                    height = 300.}
        visualization.draw(MotionChartData, options))
</code></pre>
<p>There are a couple of things to remember:</p>
<ul>
<li><p>First, it is necessary to create the visualization using the <code>Attach</code> event. The reason is that some of libraries that we rely on, need that the element is already attached to the DOM.</p>
</li>
<li><p>Every visualization receives a configuration object. If you check the API's documentation you'll notice that they use simple object literals. In our case we created record types to simulate those options. This gives us the object literal syntax and strong typing. All configuration options are called <code>(VisualizationName)Options</code>.</p>
</li>
</ul>
<p>You can isolate the element and create an ASP.NET control to display the visualization. For example:</p>
<pre><code class="language-fsharp">[&lt;JavaScriptType&gt;]
type BlogMotionChart() =
    inherit Web.Control()

    [&lt;JavaScript&gt;]
    override this.Body = Samples.BlogMotionChart()
</code></pre>
<h2 id="playing-with-the-visualization">Playing with the Visualization</h2>
<p>The cool thing about the visualization that I chose to show is that it contains different &quot;Modes&quot;. The first mode is the one that Hans Rosling uses:</p>
<blockquote>
<p><strong>Review note</strong> <br />
This resource needs to be re-added.
<img src="http://www.intellifactory.com/ShowDigitalAsset.aspx?DigitalAsset=125" alt="" /></p>
</blockquote>
<p>This one allows you to see the behavior of three variables through time (x, y axis + size of the sphere). In our case it isn't really helpful because we just have the population variable.</p>
<p>The second visualization uses a histogram. This one is a bit more helpful in our case:</p>
<blockquote>
<p><strong>Review note</strong> <br />
This resource needs to be re-added.
<img src="http://www.intellifactory.com/ShowDigitalAsset.aspx?DigitalAsset=126" alt="" /></p>
</blockquote>
<p>And finally a simple line diagram from the data:</p>
<blockquote>
<p><strong>Review note</strong> <br />
This resource needs to be re-added.
<img src="http://www.intellifactory.com/ShowDigitalAsset.aspx?DigitalAsset=127" alt="" /></p>
</blockquote>
<h2 id="conclusions">Conclusions</h2>
<p>We can start to throw hypotheses about the behaviour of our data. For example: What happened to Ukraine in the nineties? There's a big drop in the population. Was it related to the <a href="https://en.wikipedia.org/wiki/Ukraine#Economy">hyperinflationary levels</a>? According to <a href="https://jamestown.org/program/census-ukraine-more-ukrainian/">this page</a>:</p>
<p>&quot;The acute socioeconomic crisis of the 1990s discouraged families from having children, especially in urban areas, something that affected Russians and Russian speakers more than others.&quot;</p>
<p>I really don't have any idea if there was really a relation between the two variables but it sounds plausible. The important thing here is how easy it was to make this visualization. There are a lot of possibilities in business intelligence, scientific visualizations, creating reports... you name it. Go on and give it a try!</p>
<div class="footnotes">
<hr />
<ol>
<li id="fn:1">
<p>Original link is dead and was removed.<a href="#fnref:1" class="footnote-back-ref">&#8617;</a></p>
</li>
<li id="fn:2">
<p>Link is pointing to the latest version.<a href="#fnref:2" class="footnote-back-ref">&#8617;</a></p>
</li>
</ol>
</div>
</div></div>
            </div>
        </section>
        <section class="2xl:py-20 py-5">
            <div class="container mx-auto px-4">
                <div class="flex flex-wrap -mx-4 border-b border-gray-100 pt-5 lg:pt-10">
                    <div class="w-full lg:w-3/5 px-4">
                        <div class="flex flex-wrap -mx-4">
                            <div class="w-1/2 lg:w-1/3 px-4 mb-12">
                                <h3 class="mb-8 lg:mb-10 text-xl font-bold font-heading">IntelliFactory</h3>
                                <ul class="text-lg">
                                    <li class="mb-4"><a class="hover:underline" href="/blogs">Blogs</a></li>
                                    <li class="mb-4"><a class="hover:underline" href="/privacy-policy">Privacy Policy</a></li>
                                    <li class="mb-4 Cookies"><a class="hover:underline" href="/cookie-policy">Cookies</a></li>
                                    <li><a class="hover:underline" href="#">Contact</a></li>
                                </ul>
                            </div>
                            <div class="w-full lg:w-1/3 px-4 mb-4">
                                <h3 class="mb-8 lg:mb-10 text-xl font-bold font-heading">Services</h3>
                                <ul class="text-lg">
                                    <li class="mb-4"><a class="hover:underline" href="/home#consulting">Consulting</a></li>
                                    <li class="mb-4"><a class="hover:underline" href="/home#development">Development</a></li>
                                    <li class="mb-4"><a class="hover:underline" href="/home#code-synthesis">AI-driven Code Synthesis</a></li>
                                    <li class="mb-4"><a class="hover:underline" href="/home#dsls">Domain-Specific Languages</a></li>
                                </ul>
                            </div>
                            <div class="w-1/2 lg:w-1/3 px-4 mb-12">
                                <h3 class="mb-8 lg:mb-10 text-xl font-bold font-heading">Open Source</h3>
                                <ul class="text-lg">
                                    <li class="mb-4"><a class="hover:underline" href="https://websharper.com">WebSharper</a></li>
                                    <li class="mb-4"><a class="hover:underline" href="https://fsbolero.io">Bolero</a></li>
                                    <li class="mb-4"><a class="hover:underline" href="#">From our Lab</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="w-full lg:w-2/5 px-4 order-first lg:order-last mb-16 lg:mb-0">
                        <h3 class="mb-10 text-xl font-bold">Newsletter</h3>
                        <form method="post">
                            <div class="md:max-w-sm mb-8 flex items-center bg-white border border-gray-100 rounded-full">
                                <span class="inline-block pl-2 lg:pl-5">
                                    <svg width="37" height="37" viewbox="0 0 37 37" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="18.5" cy="18.5" r="9.5" fill="#1F40FF" fill-opacity="0.15"></circle>
                                        <circle cx="18.5" cy="18.5" r="18.5" fill="#1F40FF" fill-opacity="0.06"></circle>
                                        <circle cx="18.5" cy="18.5" r="2.5" fill="#282C36"></circle>
                                    </svg>
                                </span>
                                <input id="newsletter-input" class="pl-4 py-2 rounded-full placeholder-gray-900 font-bold" type="email" placeholder="Your email address" />
                                <button id="signup" class="ml-auto px-6 lg:px-8 py-4 text-white font-bold bg-blue-500 hover:bg-blue-600 rounded-full transition duration-200">Ok</button>
                            </div>
                            <div id="newsletter-alert-list"></div>
                            <p class="text-gray-300">We will not spam you or give your details to anyone.</p>
                        </form>
                    </div>
                </div>
                <div class="flex flex-wrap items-center mb-8 lg:mb-0 pt-5">
                    <div class="w-full md:w-3/4 mb-8 md:mb-0">
                        <div class="md:flex items-center">
                            <a class="inline-block text-gray-900 text-xl font-bold" href="/">
                                <img class="h-7" src="/img/if-logo-long.png" alt="" width="auto" />
                            </a>
                            <span class="hidden md:inline-block mx-8 w-px h-8 bg-gray-50"></span>
                            <p class="hidden lg:block text-sm"><span>© 2004-2021 IntelliFactory.</span>                <span class="text-gray-300">All rights reserved.</span></p>
                        </div>
                    </div>
                    <div class="w-full md:w-1/4">
                        <div class="md:flex items-center justify-end">
                            <a class="inline-block mr-2" href="#">
                                <img src="/files/logos/facebook.svg" alt="Facebook" />
                            </a>
                            <a class="inline-block mr-2" href="#">
                                <img src="/files/logos/instagram.svg" alt="" />
                            </a>
                            <a class="inline-block" href="#">
                                <img src="/files/logos/twitter.svg" alt="Twitter" />
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
    </div>
    
    <meta id='websharper-data' name='websharper-data' content='{"$TYPES":[],"$DATA":{"$V":{}}}' />
<script src="../../Scripts/WebSharper.Core.JavaScript/Runtime.js" type="text/javascript" charset="UTF-8"></script><script type="text/javascript">
if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '../../Scripts/';
  IntelliFactory.Runtime.Start();
}
</script>

    <script src="/js/Dynamic.min.js"></script>
</body>
</html>